(function(){"use strict";var t={8740:function(t,e,s){var i=s(9242),a=s(3396),r=s(7718);function l(t,e,s,i,l,o){const n=(0,a.up)("router-view");return(0,a.wg)(),(0,a.j4)(r.q,{class:"my-application"},{default:(0,a.w5)((()=>[(0,a.Wm)(n)])),_:1})}var o=s(7139),n={name:"App",data:()=>({theme:"light"}),methods:{...(0,o.nv)("user",["setIsLoggedIn","setPermissions"])},mounted(){}},d=s(89);const c=(0,d.Z)(n,[["render",l],["__scopeId","data-v-e47c86e2"]]);var w=c,u=s(2483);let p={roles:localStorage.getItem("roles")?JSON.parse(localStorage.getItem("roles")):[],user:localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):[],isLoggedIn:"true"==localStorage.getItem("isLoggedIn"),permissions:localStorage.getItem("permissions")?JSON.parse(localStorage.getItem("permissions")):[],users:[],agents:[],deliveries:[],fetched:!1,fetchedRoles:!1};var m={name:"user",namespaced:!0,state:p,getters:{fetched:t=>t.fetched,fetchedRoles:t=>t.fetchedRoles,isLoggedIn:t=>t.isLoggedIn,permissions:t=>t.permissions,user:t=>t.user,users:t=>t.users,roles:t=>t.roles,agents:t=>t.agents,deliveries:t=>t.deliveries},mutations:{SET_FETCHED:(t,e)=>{t.fetched=e},SET_FETCHED_ROLES:(t,e)=>{t.fetchedRoles=e},SET_IS_LOGGED_IN:(t,e)=>{localStorage.setItem("isLoggedIn",e),t.isLoggedIn=e},SET_USER:(t,e)=>{localStorage.setItem("user",JSON.stringify(e)),t.user=e},SET_USERS:(t,e)=>{t.users=e},SET_PERMISSIONS:(t,e)=>{localStorage.setItem("permissions",JSON.stringify(e)),t.permissions=e},SET_ROLES:(t,e)=>{localStorage.setItem("roles",JSON.stringify(e)),t.roles=e},SET_DELIVERIES:(t,e)=>{t.deliveries=e},SET_AGENTS:(t,e)=>{t.agents=e}},actions:{setFetched:({commit:t},e)=>{t("SET_FETCHED",e)},setFetchedRoles:({commit:t},e)=>{t("SET_FETCHED_ROLES",e)},setUser:({commit:t},e)=>{t("SET_USER",e)},setUsers:({commit:t},e)=>{t("SET_USERS",e)},setAgents:({commit:t},e)=>{t("SET_AGENTS",e)},setDeliveries:({commit:t},e)=>{t("SET_DELIVERIES",e)},setIsLoggedIn:({commit:t},e)=>{t("SET_IS_LOGGED_IN",e)},setPermissions:({commit:t},e)=>{t("SET_PERMISSIONS",e)},setRoles:({commit:t},e)=>{t("SET_ROLES",e)},logout:({commit:t})=>{t("SET_USER",{}),t("SET_IS_LOGGED_IN",!1),t("SET_PERMISSIONS",[]),t("SET_ROLES",[])}}},h={name:"alert",namespaced:!0,state:{active:!1,alert:{type:"success",title:"Toast",body:"Hello body"}},getters:{alert:t=>t},mutations:{TOGGLE_TOAST:(t,e)=>{t.alert=e,t.active=!0,setTimeout((()=>{t.active=!1}),4500)}},actions:{toggleAlert:({commit:t},e)=>{t("TOGGLE_TOAST",e)}}};s(7658);let g={products:[],fetched:!1};var f={name:"product",namespaced:!0,state:g,getters:{products:t=>t.products,fetched:t=>t.fetched},mutations:{SET_PRODUCTS:(t,e)=>{t.products=e},ADD_PRODUCT:(t,e)=>{t.products.push(e)},SET_FETCHED:(t,e)=>{t.fetched=e}},actions:{setProducts:({commit:t},e)=>{t("SET_PRODUCTS",e)},addProduct:({commit:t},e)=>{t("ADD_PRODUCT",e)},setFetched:({commit:t},e)=>{t("SET_FETCHED",e)}}};s(541);let v={fetched:!1,sales:[]};var y={name:"sale",namespaced:!0,state:v,getters:{sales:t=>t.sales,fetched:t=>t.fetched},mutations:{SET_SALES:(t,e)=>{t.sales=e},SET_FETCHED:(t,e)=>{t.fetched=e},UPDATE_SALE:(t,e)=>{t.sales=t.sales.map((t=>t.id===e.id?e.sale:t))},ADD_SALE:(t,e)=>{t.sales.unshift(e)},UPDATE_CONFIRMATION:(t,e)=>{t.sales=t.sales.map((t=>(t.id==e.id&&(t.confirmation=e.confirmation,console.log("sale updated")),t)))},UPDATE_UPSELL:(t,e)=>{t.sales=t.sales.map((t=>(t.id==e.id&&(t.upsell=e.upsell,console.log("sale updated")),t)))},UPDATE_AFFECTATION:(t,e)=>{t.sales=t.sales.map((t=>(t.id==e.id&&(t.affectation=e.affectation,null!=e.affectation?t.delivery="dispatch":t.delivery=null,console.log("sale updated")),t)))},UPDATE_NOTE:(t,e)=>{t.sales=t.sales.map((t=>(t.id==e.id&&(t.note=e.note,console.log("sale updated")),t)))},UPDATE_CONFIRMATION_WITH_NOTE:(t,e)=>{t.sales=t.sales.map((t=>(t.id==e.id&&(t.confirmation=e.confirmation,t.note=e.note,console.log("order updated")),t)))},UPDATE_DELIVERY:(t,e)=>{t.sales=t.sales.map((t=>(t.id==e.id&&(t.delivery=e.delivery,console.log("sale updated")),t)))},RESET_SALES:(t,e)=>{t.sales=t.sales.map((t=>(e.includes(t.id)&&(t.agente_id=null,t.upsell=null,t.confirmation=null,t.affectation=null,t.note=null,t.note_d=null,t.delivery=null,t.reported_agente_date=null,t.reported_agente_note=null,t.reported_delivery_date=null,t.reported_delivery_note=null),t)))}},actions:{setSales:({commit:t},e)=>{t("SET_SALES",e)},setFetched:({commit:t},e)=>{t("SET_FETCHED",e)},update:({commit:t},e)=>{t("UPDATE_SALE",e)},add:({commit:t},e)=>{t("ADD_SALE",e)},updateConfirmation:({commit:t},e)=>{t("UPDATE_CONFIRMATION",e)},updateUpsell:({commit:t},e)=>{t("UPDATE_UPSELL",e)},updateAffectation:({commit:t},e)=>{t("UPDATE_AFFECTATION",e)},updateNote:({commit:t},e)=>{t("UPDATE_NOTE",e)},updateConfirmationWithNote:({commit:t},e)=>{t("UPDATE_CONFIRMATION_WITH_NOTE",e)},updateDelivery:({commit:t},e)=>{t("UPDATE_DELIVERY",e)},resetSales:({commit:t},e)=>{t("RESET_SALES",e)}}};let _={orders:[],order:null,all_orders:[],fetched:!1};var x={name:"order",namespaced:!0,state:_,getters:{fetched:t=>t.fetched,orders:t=>t.orders,order:t=>t.order,allOrders:t=>t.all_orders},mutations:{SET_ORDERS:(t,e)=>{t.orders=e},ADD_ORDER:(t,e)=>{t.orders.unshift(e),t.all_orders.unshift(e)},SET_FETCHED:(t,e)=>{t.fetched=e},SET_ALL_ORDERS:(t,e)=>{t.all_orders=e},SET_ORDER:(t,e)=>{t.order=e},UPDATE_ORDER:(t,e)=>{t.orders=t.orders.map((t=>t.id===e.id?e.order:t)),t.all_orders=t.all_orders.map((t=>t.id===e.id?e.order:t))},UPDATE_CONFIRMATION:(t,e)=>{t.orders=t.orders.map((t=>(t.id==e.id&&(t.confirmation=e.confirmation,"confirmer"==e.confirmation&&(t.delivery="dispatch"),console.log("order updated")),t))),t.all_orders=t.all_orders.map((t=>(t.id==e.id&&(t.confirmation=e.confirmation,"confirmer"==e.confirmation&&(t.delivery="dispatch"),console.log("order updated")),t)))},UPDATE_CONFIRMATION_WITH_NOTE:(t,e)=>{t.orders=t.orders.map((t=>(t.id==e.id&&(t.confirmation=e.confirmation,t.note=e.note,"confirmer"==e.confirmation&&(t.delivery="dispatch"),console.log("order updated")),t))),t.all_orders=t.all_orders.map((t=>(t.id==e.id&&(t.confirmation=e.confirmation,t.note=e.note,"confirmer"==e.confirmation&&(t.delivery="dispatch"),console.log("order updated")),t)))},UPDATE_UPSELL:(t,e)=>{t.orders=t.orders.map((t=>(t.id==e.id&&(t.upsell=e.upsell,console.log("sale updated")),t))),t.all_orders=t.all_orders.map((t=>(t.id==e.id&&(t.upsell=e.upsell,console.log("sale updated")),t)))},UPDATE_AFFECTATION:(t,e)=>{t.orders=t.orders.map((t=>(t.id==e.id&&(t.affectation=e.affectation,console.log("sale updated")),t))),t.all_orders=t.all_orders.map((t=>(t.id==e.id&&(t.affectation=e.affectation,console.log("sale updated")),t)))},UPDATE_NOTE:(t,e)=>{t.orders=t.orders.map((t=>(t.id==e.id&&(t.note=e.note,console.log("sale updated")),t))),t.all_orders=t.all_orders.map((t=>(t.id==e.id&&(t.note=e.note,console.log("sale updated")),t)))},UPDATE_DELIVERY:(t,e)=>{t.orders=t.orders.map((t=>(t.id==e.id&&(t.delivery=e.delivery,console.log("sale updated")),t))),t.all_orders=t.all_orders.map((t=>(t.id==e.id&&(t.delivery=e.delivery,console.log("sale updated")),t)))}},actions:{setOrders:({commit:t},e)=>{t("SET_ORDERS",e)},addOrder:({commit:t},e)=>{t("ADD_ORDER",e)},setFetched:({commit:t},e)=>{t("SET_FETCHED",e)},setAllOrders:({commit:t},e)=>{t("SET_ALL_ORDERS",e)},setOrder:({commit:t},e)=>{t("SET_ORDER",e)},update:({commit:t},e)=>{t("UPDATE_ORDER",e)},updateConfirmation:({commit:t},e)=>{t("UPDATE_CONFIRMATION",e)},updateConfirmationWithNote:({commit:t},e)=>{t("UPDATE_CONFIRMATION_WITH_NOTE",e)},updateUpsell:({commit:t},e)=>{t("UPDATE_UPSELL",e)},updateAffectation:({commit:t},e)=>{t("UPDATE_AFFECTATION",e)},updateNote:({commit:t},e)=>{t("UPDATE_NOTE",e)},updateDelivery:({commit:t},e)=>{t("UPDATE_DELIVERY",e)}}};let b={fetcehd:!1,inventoryList:[],inventoryState:[],inventoryMovements:[]};var k={name:"inventory",namespaced:!0,state:b,getters:{fetched:t=>t.fetched,inventoryList:t=>t.inventoryList,inventoryState:t=>t.inventoryState,inventoryMovements:t=>t.inventoryMovements},mutations:{SET_FETCHED:(t,e)=>{t.fetched=e},SET_INVENTORY_LIST:(t,e)=>{t.inventoryList=e},SET_INVENTORY_STATE:(t,e)=>{t.inventoryState=e},SET_INVENTORY_MOVEMENTS:(t,e)=>{t.inventoryMovements=e}},actions:{setFetched:({commit:t},e)=>{t("SET_FETCHED",e)},setInventoryList:({commit:t},e)=>{t("SET_INVENTORY_LIST",e)},setInventoryState:({commit:t},e)=>{t("SET_INVENTORY_STATE",e)},setInventoryMovements:({commit:t},e)=>{t("SET_INVENTORY_MOVEMENTS",e)}}};const C=localStorage.getItem("cities");let D={fetched:!1,cities:C?JSON.parse(C):[]};var S={name:"city",namespaced:!0,state:D,getters:{cities:t=>t.cities,fetched:t=>t.fetched},mutations:{SET_CITIES:(t,e)=>{localStorage.setItem("cities",JSON.stringify(e)),t.cities=e},SET_FETCHED:(t,e)=>{t.fetched=e}},actions:{setCities:({commit:t},e)=>{t("SET_CITIES",e)},setFetched:({commit:t},e)=>{t("SET_FETCHED",e)}}};let z={shops:[]};var U={name:"shop",namespaced:!0,state:z,getters:{shops:t=>t.shops},mutations:{SET_SHOPS:(t,e)=>{t.shops=e}},actions:{setShops:({commit:t},e)=>{t("SET_SHOPS",e)}}};let L={fetched:!1,notifications:{productStockAlert:[],reportedSale:[],reportedOrderAgente:[],reportedOrderDelivery:[]}};var A={name:"notification",namespaced:!0,state:L,getters:{notifications:t=>t.notifications,fetched:t=>t.fetched},mutations:{SET_NOTIFICATIONS:(t,e)=>{t.notifications=e},SET_FETCHED:(t,e)=>{t.fetched=e}},actions:{setNotifications:({commit:t},e)=>{t("SET_NOTIFICATIONS",e)},setFetched:({commit:t},e)=>{t("SET_FETCHED",e)}}};let P={fetched:!1,warehouses:[]};var W={name:"warehouse",namespaced:!0,state:P,getters:{fetched:t=>t.fetched,warehouses:t=>t.warehouses},mutations:{SET_FETCHED:(t,e)=>{t.fetched=e},SET_WAREHOUSES:(t,e)=>{t.warehouses=e},ADD_WAREHOUSE:(t,e)=>{t.warehouses.push(e)},DELETE_WAREHOUSE:(t,e)=>{t.warehouses=t.warehouses.filter((t=>t.id!=e))},UPDATE_WAREHOUSE:(t,e)=>{t.warehouses=t.warehouses.map((t=>t.id==e.id?{...e}:t))}},actions:{setFetched:({commit:t},e)=>{t("SET_FETCHED",e)},setWarehouses:({commit:t},e)=>{t("SET_WAREHOUSES",e)},addWarehouse:({commit:t},e)=>{t("ADD_WAREHOUSE",e)},update:({commit:t},e)=>{t("UPDATE_WAREHOUSE",e)},delete:({commit:t},e)=>{t("DELETE_WAREHOUSE",e)}}};let E={fetched:!1,factorisations:[]};var $={name:"factorisation",namespaced:!0,state:E,getters:{fetched:t=>t.fetched,factorisations:t=>t.factorisations},mutations:{SET_FETCHED:(t,e)=>{t.fetched=e},SET_FACTORISATIONS:(t,e)=>{t.factorisations=e},ADD_FACTORISATION:(t,e)=>{t.factorisations.push(e)},DELETE_FACTORISATION:(t,e)=>{t.factorisations=t.factorisations.filter((t=>t.id!=e))},UPDATE_FACTORISATION:(t,e)=>{t.factorisations=t.factorisations.map((t=>t.id==e.id?{...e}:t))}},actions:{setFetched:({commit:t},e)=>{t("SET_FETCHED",e)},setFactorisations:({commit:t},e)=>{t("SET_FACTORISATIONS",e)},addFactorisation:({commit:t},e)=>{t("ADD_FACTORISATION",e)},update:({commit:t},e)=>{t("UPDATE_FACTORISATION",e)},delete:({commit:t},e)=>{t("DELETE_FACTORISATION",e)}}};let T={fetched:!1,sheets:[]};var O={name:"sheet",namespaced:!0,state:T,getters:{fetched:t=>t.fetched,sheets:t=>t.sheets},mutations:{SET_FETCHED:(t,e)=>{t.fetched=e},SET_SHEETS:(t,e)=>{t.sheets=e},ADD_SHEET:(t,e)=>{t.sheets.push(e)},DELETE_SHEET:(t,e)=>{t.sheets=t.sheets.filter((t=>t.id!=e))},UPDATE_SHEET:(t,e)=>{t.sheets=t.sheets.map((t=>t.id==e.id?{...e}:t))}},actions:{setFetched:({commit:t},e)=>{t("SET_FETCHED",e)},setSheets:({commit:t},e)=>{t("SET_SHEETS",e)},addSheet:({commit:t},e)=>{t("ADD_SHEET",e)},update:({commit:t},e)=>{t("UPDATE_SHEET",e)},delete:({commit:t},e)=>{t("DELETE_SHEET",e)}}},V=(0,o.MT)({state:{},getters:{},mutations:{},actions:{},modules:{user:m,product:f,alert:h,sale:y,order:x,inventory:k,city:S,shop:U,notification:A,warehouse:W,factorisation:$,sheet:O}}),R=s(6943);const q="https://vldo.shop/",F="https://api.vldo.shop/",I="$",N=R.Z.create({baseURL:F});N.defaults.withCredentials=!0,N.defaults.headers={"Content-Type":"application/json",Accept:"application/json"};var j=N,M=s(680),H={getCookie(){let t=M.Z.get("XSRF-TOKEN");return t?new Promise((t=>{t()})):j.get("sanctum/csrf-cookie")}};class Y{async login(t){return await H.getCookie(),j.post("api/auth/login",{email:t.email,password:t.password})}async register(t){return await H.getCookie(),j.post("api/users/new",{email:t.email,password:t.password,phone:t.phone,status:t.status,role:t.role,firstname:t.firstname,lastname:t.lastname,product_id:t.product_id,city:t?.city,deliverycity:t?.deliveryCities,having_all:t.having_all})}async update(t,e){return await H.getCookie(),j.post("api/users/update/"+t.id,{email:t.email,password:t.password,phone:t.phone,status:t.status,firstname:t.firstname,lastname:t.lastname,product_id:t.product_id,role:t.role,city:t?.city,deliverycity:t?.deliveryCities,updatePassword:e,having_all:t.having_all})}async updateProfile(t,e){return await H.getCookie(),j.post("api/users/profile",{password:t.password,phone:t.phone,firstname:t.firstname,lastname:t.lastname,updatePassword:e})}async online(){return await H.getCookie(),j.get("api/user")}async profile(){return await H.getCookie(),j.get("api/users/profile")}async logout(){return await H.getCookie(),j.get("api/auth/logout")}async permession(){return await H.getCookie(),j.get("api/auth/permission")}async roles(){return await H.getCookie(),j.get("api/auth/roles")}async all(){return await H.getCookie(),j.get("api/users")}async updateStatus({id:t,status:e}){return await H.getCookie(),j.post("api/users/status/"+t,{status:e})}async delete(t){return await H.getCookie(),j["delete"]("api/users/delete/"+t)}async getUser(t){return await H.getCookie(),j.get("api/users/"+t)}async createRole({name:t,permissions:e}){return await H.getCookie(),j.post("api/roles/new",{name:t,permissions:e})}async updateRole(t,{name:e,permissions:s}){return await H.getCookie(),j.post("api/roles/update/"+t,{name:e,permissions:s})}async deleteRole(t){return await H.getCookie(),j["delete"]("api/roles/delete/"+t)}async getRole(t){return await H.getCookie(),j.get("api/roles/"+t)}async agents(){return await H.getCookie(),j.get("api/agents")}async deliveries(){return await H.getCookie(),j.get("api/delevries")}async cities(){return await H.getCookie(),j.get("api/cities")}}var K=new Y;function Z(t){if(document.title=t.meta?.title+" | Vldo Shop",console.log(t),!V.getters["user/isLoggedIn"])return"/login"==t.path||{name:"login"};if(K.online(),"/login"==t.path)return{name:"404"};const{gate:e}=t.meta,s=V.getters["user/permissions"];return"all"===e||((e||"/404"===t.path)&&!(!s.includes(e)&&"/404"!==t.path)||{name:"404"})}var Q=s(2268),G=s(7312),B=s(3369),J=s(3289),X=s(165);const tt={class:"tw-min-h-screen tw-overflow-auto tw-bg-slate-50"},et={class:"tw-grid tw-h-fit tw-overflow-hidden md:tw-grid-cols-2 tw-grid-cols-1"},st={class:"py-md-5 py-10 pb-0 tw-flex tw-justify-center md:tw-items-center"},it={class:"px-md-10 tw-w-full"},at={class:"tw-w-[150px]"},rt=["src"],lt={class:"mt-md-10 mt-15 pt-5 px-md-5 px-lg-16 tw-w-full d-felx justify-center align-center"},ot={class:"pa-5 py-7 tw-border bg-white tw-rounded-lg tw-mx-auto tw-max-w-[450px]"},nt=(0,a._)("h1",{class:"text-h5 font-weight-medium !tw-text-gray-600"},"Login",-1),dt=(0,a._)("p",{class:"text-body-1 mt-2 !tw-text-gray-500"},"Please login to your account",-1),ct={key:0,class:"text-body-2 mt-2 !tw-text-red-500"},wt={class:"mt-5"},ut=(0,a._)("p",{class:"mb-1"},"Email",-1),pt=(0,a._)("p",{class:"mb-1"},"Password",-1),mt={class:"mt-5"},ht=(0,a._)("span",{class:"text-capitalize text-white"},"Login",-1),gt={class:"bg-primary-color tw-min-h-screen tw-hidden md:tw-flex tw-items-center tw-justify-center"},ft=["src"];function vt(t,e,s,r,l,o){const n=(0,a.up)("Alert");return(0,a.wg)(),(0,a.iD)("div",tt,[(0,a.Wm)(n),(0,a._)("div",et,[(0,a._)("div",st,[(0,a.Wm)(B.K,{class:"py-0"},{default:(0,a.w5)((()=>[(0,a._)("div",it,[(0,a._)("div",at,[(0,a._)("img",{class:"tw-w-full",src:l.localUrl+"assets/img/logo.png"},null,8,rt)]),(0,a._)("div",lt,[(0,a._)("div",ot,[nt,dt,l.error.active?((0,a.wg)(),(0,a.iD)("p",ct,(0,Q.zw)(l.error.message),1)):(0,a.kq)("",!0),(0,a._)("div",wt,[(0,a._)("div",null,[ut,(0,a.Wm)(X.hw,{name:"email",onKeyup:e[0]||(e[0]=t=>o.resetError("email")),modelValue:l.email,"onUpdate:modelValue":e[1]||(e[1]=t=>l.email=t),error:!l.emailStatus.valid,"error-messages":l.emailStatus.valid?"":l.emailStatus.message,autofocus:"",onBlur:e[2]||(e[2]=t=>l.emailFocus=!1),onFocus:e[3]||(e[3]=t=>l.emailFocus=!0),color:"primary-color",variant:"outlined",class:"tw-w-full",density:"compact"},{"append-inner":(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:l.emailFocus?l.emailStatus.valid?"primary-color":"error":"grey-darken-3"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-email-outline")])),_:1},8,["color"])])),_:1},8,["modelValue","error","error-messages"])]),(0,a._)("div",null,[pt,(0,a.Wm)(X.hw,{name:"password",onKeyup:(0,i.D2)(o.login,["enter"]),modelValue:l.password,"onUpdate:modelValue":e[5]||(e[5]=t=>l.password=t),error:!l.passwordStatus.valid,"error-messages":l.passwordStatus.valid?"":l.passwordStatus.message,type:l.showPassword?"text":"password",onBlur:e[6]||(e[6]=t=>l.passwordFocus=!1),onFocus:e[7]||(e[7]=t=>l.passwordFocus=!0),color:"primary-color",variant:"outlined",class:"tw-w-full",density:"compact"},{"append-inner":(0,a.w5)((()=>[(0,a.Wm)(J.t,{onClick:e[4]||(e[4]=t=>l.showPassword=!l.showPassword),class:"tw-relative tw-z-50 tw-cursor-pointer",color:l.passwordFocus?l.passwordStatus.valid?"primary-color":"error":"grey-darken-3"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Q.zw)(l.showPassword?"mdi-eye-off-outline":"mdi-eye-outline"),1)])),_:1},8,["color"])])),_:1},8,["onKeyup","modelValue","error","error-messages","type"])]),(0,a._)("div",mt,[(0,a.Wm)(G.T,{loading:l.isLoading,onClick:o.login,block:"",size:"large",color:"primary-color",variant:"flat",class:"!tw-text-white"},{default:(0,a.w5)((()=>[ht])),_:1},8,["loading","onClick"])])])])])])])),_:1})]),(0,a._)("div",gt,[(0,a._)("img",{src:l.localUrl+"assets/img/login.jpg",class:"tw-w-full tw-h-full tw-object-cover",alt:""},null,8,ft)])])])}function yt(t){var e=/^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/;return t?new RegExp(e).test(t)?{valid:!0}:{valid:!1,message:"Email is not valid."}:{valid:!1,message:"Email is required."}}function _t(t){return t?t.length<=4||t.length>=16?{valid:!1,message:"Password length must be between 4 and 16."}:{valid:!0}:{valid:!1,message:"This field is required"}}function xt(t,e="This field"){return t?{valid:!0}:{valid:!1,message:`${e} is required`}}function bt(t,e="This field"){return t?isNaN(t)?{valid:!1,message:`${e} must be a valid number`}:{valid:!0}:{valid:!1,message:`${e} is required`}}function kt(t,e){return t?t!==e?{valid:!1,message:"Passwords doesn't match"}:{valid:!0}:{valid:!1,message:"This field is required."}}function Ct(t){return t.length?{valid:!0}:{valid:!1,message:"You need at least one variant to create a product !"}}function Dt(t){return t.length?{valid:!0}:{valid:!1,message:"You need at least one permission to create a role !"}}var St=s(7771),zt=s(8952);const Ut={key:0,class:"pa-2 tw-absolute !tw-z-[510000]"},Lt={class:"tw-text-sm"};function At(t,e,s,i,r,l){return(0,a.wg)(),(0,a.j4)(a.lR,{to:"body"},[(0,a.Wm)(zt.V,null,{default:(0,a.w5)((()=>[l.state.active?((0,a.wg)(),(0,a.iD)("div",Ut,[(0,a.Wm)(St.w,{closable:"",density:"compact",variant:"flat",type:l.state.alert.type,position:"fixed",location:"bottom right",class:"ma-2"},{default:(0,a.w5)((()=>[(0,a._)("div",Lt,(0,Q.zw)(l.state.alert.title),1)])),_:1},8,["type"])])):(0,a.kq)("",!0)])),_:1})])}var Pt={computed:{state(){return this.$store.getters["alert/alert"]}}};const Wt=(0,d.Z)(Pt,[["render",At]]);var Et=Wt,$t={components:{Alert:Et},data(){return{localUrl:q,isLoading:!1,error:{active:!1,message:""},email:"",password:"",emailStatus:{valid:!0,message:""},passwordStatus:{valid:!0,message:""},emailFocus:!1,passwordFocus:!1,showPassword:!1}},methods:{...(0,o.nv)("user",["setIsLoggedIn","setPermissions","setUser"]),validateForm(){return this.emailStatus=yt(this.email),this.passwordStatus=_t(this.password),this.passwordStatus.valid&&this.emailStatus.valid},login(){this.validateForm()&&(this.isLoading=!0,this.error={active:!1,message:""},K.login({email:this.email,password:this.password}).then((t=>{if("AUTHENTICATION_SUCCESSFUL"==t.data.code){this.setUser(t.data.data.user),this.setIsLoggedIn(!0);const e=t.data.data.user.permissions;this.setPermissions(e),this.$router.push("/")}})).catch((t=>{this.$handleApiError(t),"INVALID_CREDENTIALS"==t.response?.data.code&&(this.error={active:!0,message:t.response.data.message}),"NOT_ACTIVE_ERROR"==t.response?.data.code&&(this.error={active:!0,message:t.response.data.message}),"VALIDATION_ERROR"==t.response?.data.code&&(this.emailStatus={valid:!1,message:t.response.data.error["email"][0]},this.passwordStatus={valid:!1,message:t.response.data.error["password"][0]})})).finally((()=>{this.isLoading=!1})),console.log("login..."))},resetError(t){"email"==t&&(this.emailStatus={valid:!0,message:""}),"password"==t&&(this.passwordStatus={valid:!0,message:""})}},mounted(){}};const Tt=(0,d.Z)($t,[["render",vt]]);var Ot=Tt,Vt={name:"login",path:"/login",component:Ot,meta:{title:"Login"}},Rt=s(4454),qt=s(3140);function Ft(t,e,s,i,r,l){const o=(0,a.up)("AppSidebar"),n=(0,a.up)("AppHeader"),d=(0,a.up)("Alert"),c=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)("div",null,[l.isLoggedIn?((0,a.wg)(),(0,a.j4)(Rt.s,{key:0,"full-height":!0},{default:(0,a.w5)((()=>[(0,a.Wm)(o,{active:r.drawer},null,8,["active"]),(0,a.Wm)(n,{onToggleSidebar:l.toggleSidebar},null,8,["onToggleSidebar"]),(0,a.Wm)(d),(0,a.Wm)(qt.O,{class:"tw-bg-gray-50 tw-min-h-screen tw-overflow-y-auto"},{default:(0,a.w5)((()=>[(0,a.Wm)(B.K,{fluid:"",class:"py-6 px-6"},{default:(0,a.w5)((()=>[(0,a.Wm)(c)])),_:1})])),_:1})])),_:1})):(0,a.kq)("",!0)])}var It=s(6439),Nt=s(9156);const jt={class:"tw-flex tw-items-center tw-gap-2"};function Mt(t,e,s,r,l,o){const n=(0,a.up)("Notification"),d=(0,a.up)("HeaderMenu");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(It.L,{color:"white",density:"default",elevation:"0",class:"tw-border-b-0 !tw-shadow-lg !tw-shadow-gray-400/10 tw-top-0 !tw-fixed tw-overflow-visible",absolute:!1},(0,a.Nv)({append:(0,a.w5)((()=>[(0,a._)("div",jt,[(0,a.Wm)(n),(0,a.Wm)(d)])])),default:(0,a.w5)((()=>[(0,a.Wm)(Nt.g,{variant:"text",onClick:e[0]||(e[0]=(0,i.iM)((t=>o.handleClick()),["stop"]))})])),_:2},[void 0]),1024)])}var Ht=s(652),Yt=s(4075),Kt=s(8694),Zt=s(8793);const Qt={class:"tw-relative"},Gt=(0,a._)("div",{class:"tw-absolute tw-bottom-0 tw-border-2 tw-border-solid tw-border-white tw-right-0 tw-w-3 tw-h-3 tw-rounded-full tw-bg-green-500"},null,-1),Bt={key:0,class:"!tw-duration-100"},Jt={class:"tw-absolute tw-bg-white tw-border tw-border-solid tw-border-neutral-200 tw-rounded-md tw-bordesr !tw-shadow-lg !tw-shadow-gray-400/10 tw-top-14 tw-right-0 tw-w-[200px] tw-min-h-[50px]"},Xt={class:"pa-2 d-flex tw-items-center tw-gap-2 tw-border-b tw-border-b-neutral-100"},te={class:"d-flex flex-column justify-center"},ee={class:"tw-text-sm tw-text-neutral-800 text-capitalize"},se={class:"tw-text-xs tw-rounded-lg tw-text-green-500 text-capitalize"},ie=(0,a._)("span",{class:"text-capitalize tw-text-neutral-700 tw-text-xs"}," Profile ",-1),ae={class:"d-flex tw-items-center tw-gap-2"},re=(0,a._)("span",{class:"text-capitalize tw-text-red-700 tw-text-xs"}," Logout ",-1);function le(t,e,s,i,r,l){return(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",Qt,[(0,a.Wm)(G.T,{onClick:l.toggleMenu,icon:"","max-width":"35","max-height":"35"},{default:(0,a.w5)((()=>[(0,a.Wm)(Ht.V,{size:"32"},{default:(0,a.w5)((()=>[(0,a.Wm)(Kt.f,{src:r.localUrl+"assets/img/profiles/avatar.webp"},null,8,["src"])])),_:1}),Gt])),_:1},8,["onClick"]),(0,a.Wm)(zt.Z5,null,{default:(0,a.w5)((()=>[r.isActive?((0,a.wg)(),(0,a.iD)("div",Bt,[(0,a._)("div",Jt,[(0,a._)("div",Xt,[(0,a.Wm)(Ht.V,{size:"35"},{default:(0,a.w5)((()=>[(0,a.Wm)(Kt.f,{eager:"",src:r.localUrl+"assets/img/profiles/avatar.webp"},null,8,["src"])])),_:1}),(0,a._)("div",te,[(0,a._)("div",ee,(0,Q.zw)(l.user.firstname)+" "+(0,Q.zw)(l.user.lastname),1),(0,a._)("div",se,(0,Q.zw)(l.user.role),1)])]),(0,a.Wm)(Yt.J),(0,a._)("div",{onClick:e[0]||(e[0]=(...t)=>l.closeMenu&&l.closeMenu(...t)),class:"d-flex tw-items-center tw-gap-2"},[(0,a.Wm)(G.T,{block:"",class:"justify-start",variant:"text",color:"gray",ripple:!1},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{class:"mr-2 tw-text-neutral-700"},{default:(0,a.w5)((()=>[(0,a.Uk)(" mdi-account-outline ")])),_:1}),ie])),_:1})]),(0,a.Wm)(Yt.J),(0,a._)("div",ae,[(0,a.Wm)(G.T,{onClick:l.logout,block:"",class:"justify-start",variant:"text",color:"gray",ripple:!1},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{class:(0,Q.C_)([{"tw-animate-pulse":r.loginOut},"mr-2 tw-text-red-700"])},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Q.zw)(r.loginOut?"mdi-power-settings":"mdi-power"),1)])),_:1},8,["class"]),re])),_:1},8,["onClick"])])])])):(0,a.kq)("",!0)])),_:1})])),[[Zt.L,l.closeMenu]])}var oe={data(){return{localUrl:q,isActive:!1,loginOut:!1}},methods:{toggleMenu(){this.isActive=!this.isActive},closeMenu(){this.isActive=!1},logout(){this.loginOut=!0,K.logout().then((()=>{this.$store.dispatch("user/logout"),this.$router.push("/login")})).finally((()=>{this.loginOut=!1}))}},computed:{user(){return this.$store.getters["user/user"]}}};const ne=(0,d.Z)(oe,[["render",le]]);var de=ne;function ce(t,e,s,i,r,l){const o=(0,a.up)("AdminNotification"),n=(0,a.up)("UserNotification");return(0,a.wg)(),(0,a.iD)("div",null,["admin"==l.user.role?((0,a.wg)(),(0,a.j4)(o,{key:0})):(0,a.kq)("",!0),["agente","delivery"].includes(l.user.role)?((0,a.wg)(),(0,a.j4)(n,{key:1})):(0,a.kq)("",!0)])}const we={class:"tw-relative"},ue={key:0,class:"tw-absolute tw-border-2 tw-border-solid tw-border-white tw-top-1 tw-right-1 tw-w-3 tw-h-3 tw-rounded-full tw-bg-red-500"},pe={key:0,class:"!tw-duration-100"},me={class:"tw-absolute tw-text-sm tw-bg-white tw-border tw-border-solid tw-border-neutral-200 tw-rounded-md tw-bordesr !tw-shadow-lg !tw-shadow-gray-400/10 tw-top-14 tw-right-0 tw-w-[230px] tw-min-h-[50px]"},he=(0,a._)("p",{class:"tw-p-2 tw-text-sm"},"Notifications",-1),ge={key:0},fe={class:"tw-py-10 tw-flex tw-items-center tw-justify-center"},ve={key:1},ye=(0,a._)("p",{class:""},"Stock Alert",-1),_e=(0,a._)("p",{class:""},"Delivery Reported",-1),xe=(0,a._)("p",{class:""},"Confirmation Reported",-1);function be(t,e,s,i,r,l){const o=(0,a.up)("router-link");return(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",we,[(0,a.Wm)(G.T,{onClick:l.toggleMenu,icon:"",width:"35",height:"35",class:"tw-relative"},{default:(0,a.w5)((()=>[(0,a.Wm)(Kt.f,{width:"22",height:"22",src:r.localUrl+"assets/img/icons/notification-bing.svg"},null,8,["src"]),l.stockAlert.length||l.reportedDeliveries.length||l.reportedConfirmations.length?((0,a.wg)(),(0,a.iD)("div",ue)):(0,a.kq)("",!0)])),_:1},8,["onClick"]),(0,a.Wm)(zt.Z5,null,{default:(0,a.w5)((()=>[r.isActive?((0,a.wg)(),(0,a.iD)("div",pe,[(0,a._)("div",me,[he,r.isLoaded?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",ge,[(0,a._)("div",fe,[(0,a.Wm)(J.t,{size:"large",class:"tw-animate-spin",color:"primary-color"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-loading")])),_:1})])])),r.isLoaded?((0,a.wg)(),(0,a.iD)("div",ve,[(0,a.Wm)(o,{to:"/notifications/stock",class:"hover:tw-bg-black/5 tw-p-2 tw-border-y tw-flex tw-gap-2 tw-items-start tw-border-neutral-100"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{class:"tw-mt-1 tw-text-neutral-400",size:"x-small"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-alert-outline")])),_:1}),(0,a._)("div",null,[ye,(0,a._)("p",{class:(0,Q.C_)([[l.stockAlert.length>0?"tw-text-red-400 ":"tw-text-green-400 "],"tw-text-xs"])},(0,Q.zw)(l.stockAlert.length)+" "+(0,Q.zw)(l.stockAlert.length>1?"products":"product"),3)])])),_:1}),(0,a.Wm)(o,{to:"/sales",class:"hover:tw-bg-black/5 tw-p-2 tw-border-y tw-flex tw-gap-2 tw-items-start tw-border-neutral-100"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{class:"tw-mt-1 tw-text-neutral-400",size:"x-small"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-autorenew")])),_:1}),(0,a._)("div",null,[_e,(0,a._)("p",{class:(0,Q.C_)([[l.reportedDeliveries.length>0?"tw-text-red-400 ":"tw-text-green-400 "],"tw-text-xs"])},(0,Q.zw)(l.reportedDeliveries.length)+" today",3)])])),_:1}),(0,a.Wm)(o,{to:"/sales",class:"hover:tw-bg-black/5 tw-p-2 tw-border-y tw-flex tw-gap-2 tw-items-start tw-border-neutral-100"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{class:"tw-mt-1 tw-text-neutral-400",size:"x-small"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-autorenew")])),_:1}),(0,a._)("div",null,[xe,(0,a._)("p",{class:(0,Q.C_)([[l.reportedConfirmations.length>0?"tw-text-red-400 ":"tw-text-green-400 "],"tw-text-xs"])},(0,Q.zw)(l.reportedConfirmations.length)+" today",3)])])),_:1})])):(0,a.kq)("",!0)])])):(0,a.kq)("",!0)])),_:1})])),[[Zt.L,l.closeMenu]])}class ke{async all(){return await H.getCookie(),j.get("api/notifications")}async agente(){return await H.getCookie(),j.get("api/notifications/agente")}async delivery(){return await H.getCookie(),j.get("api/notifications/delivery")}}var Ce=new ke,De={data(){return{localUrl:q,isActive:!1,isLoaded:!1}},methods:{toggleMenu(){this.isActive=!this.isActive},closeMenu(){this.isActive=!1},getNotifications(){Ce.all().then((t=>{"SUCCESS"==t.data.code&&(console.log("success"),this.$store.dispatch("notification/setNotifications",t.data.data),this.$store.dispatch("notification/setFetched",!0))}),this.$handleApiError).finally((()=>{this.isLoaded=!0}))}},computed:{user(){return this.$store.getters["user/user"]},notifications(){return this.$store.getters["notification/notifications"]},stockAlert(){return this.notifications["productStockAlert"]||[]},reportedConfirmations(){return this.notifications["reportedOrderAgente"]||[]},reportedDeliveries(){return this.notifications["reportedOrderDelivery"]||[]}},mounted(){this.getNotifications()}};const Se=(0,d.Z)(De,[["render",be]]);var ze=Se;const Ue={class:"tw-relative"},Le={key:0,class:"tw-absolute tw-border-2 tw-border-solid tw-border-white tw-top-1 tw-right-1 tw-w-3 tw-h-3 tw-rounded-full tw-bg-red-500"},Ae={key:0,class:"!tw-duration-100"},Pe={class:"tw-absolute tw-text-sm tw-bg-white tw-border tw-border-solid tw-border-neutral-200 tw-rounded-md tw-bordesr !tw-shadow-lg !tw-shadow-gray-400/10 tw-top-14 tw-right-0 tw-w-[230px] tw-min-h-[50px]"},We=(0,a._)("p",{class:"tw-p-2 tw-text-sm"},"Notifications",-1),Ee={key:0},$e={class:"tw-py-10 tw-flex tw-items-center tw-justify-center"},Te={key:1},Oe=(0,a._)("p",{class:""},"Confirmation Reported",-1),Ve=(0,a._)("p",{class:""},"Delivery Reported",-1);function Re(t,e,s,i,r,l){const o=(0,a.up)("router-link");return(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",Ue,[(0,a.Wm)(G.T,{onClick:l.toggleMenu,icon:"",width:"35",height:"35",class:"tw-relative"},{default:(0,a.w5)((()=>[(0,a.Wm)(Kt.f,{width:"22",height:"22",src:r.localUrl+"assets/img/icons/notification-bing.svg"},null,8,["src"]),l.reportedDeliveries.length||l.reportedConfirmations.length?((0,a.wg)(),(0,a.iD)("div",Le)):(0,a.kq)("",!0)])),_:1},8,["onClick"]),(0,a.Wm)(zt.Z5,null,{default:(0,a.w5)((()=>[r.isActive?((0,a.wg)(),(0,a.iD)("div",Ae,[(0,a._)("div",Pe,[We,r.isLoaded?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",Ee,[(0,a._)("div",$e,[(0,a.Wm)(J.t,{size:"large",class:"tw-animate-spin",color:"primary-color"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-loading")])),_:1})])])),r.isLoaded?((0,a.wg)(),(0,a.iD)("div",Te,["agente"==l.user.role?((0,a.wg)(),(0,a.j4)(o,{key:0,to:"/orders",class:"hover:tw-bg-black/5 tw-p-2 tw-border-y tw-flex tw-gap-2 tw-items-start tw-border-neutral-100"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{class:"tw-mt-1 tw-text-neutral-400",size:"x-small"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-autorenew")])),_:1}),(0,a._)("div",null,[Oe,(0,a._)("p",{class:(0,Q.C_)([[l.reportedConfirmations.length>0?"tw-text-red-400 ":"tw-text-green-400 "],"tw-text-xs"])},(0,Q.zw)(l.reportedConfirmations.length)+" today",3)])])),_:1})):(0,a.kq)("",!0),"delivery"==l.user.role?((0,a.wg)(),(0,a.j4)(o,{key:1,to:"/deliveries",class:"hover:tw-bg-black/5 tw-p-2 tw-border-y tw-flex tw-gap-2 tw-items-start tw-border-neutral-100"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{class:"tw-mt-1 tw-text-neutral-400",size:"x-small"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-autorenew")])),_:1}),(0,a._)("div",null,[Ve,(0,a._)("p",{class:(0,Q.C_)([[l.reportedConfirmations.length>0?"tw-text-red-400 ":"tw-text-green-400 "],"tw-text-xs"])},(0,Q.zw)(l.reportedConfirmations.length)+" today",3)])])),_:1})):(0,a.kq)("",!0)])):(0,a.kq)("",!0)])])):(0,a.kq)("",!0)])),_:1})])),[[Zt.L,l.closeMenu]])}var qe={data(){return{localUrl:q,isActive:!1,isLoaded:!1}},methods:{toggleMenu(){this.isActive=!this.isActive},closeMenu(){this.isActive=!1},getAgenteNotifications(){Ce.agente().then((t=>{"SUCCESS"==t.data.code&&(console.log("success"),this.$store.dispatch("notification/setNotifications",t.data.data),this.$store.dispatch("notification/setFetched",!0))}),this.$handleApiError).finally((()=>{this.isLoaded=!0}))},getDeliveryNotifications(){Ce.delivery().then((t=>{"SUCCESS"==t.data.code&&(console.log("success"),this.$store.dispatch("notification/setNotifications",t.data.data),this.$store.dispatch("notification/setFetched",!0))}),this.$handleApiError).finally((()=>{this.isLoaded=!0}))}},computed:{user(){return this.$store.getters["user/user"]},notifications(){return this.$store.getters["notification/notifications"]},stockAlert(){return this.notifications["productStockAlert"]||[]},reportedConfirmations(){return this.notifications["reportedOrderAgente"]||[]},reportedDeliveries(){return this.notifications["reportedOrderDelivery"]||[]}},mounted(){"agente"==this.user.role&&this.getAgenteNotifications(),"delivery"==this.user.role&&this.getDeliveryNotifications()}};const Fe=(0,d.Z)(qe,[["render",Re]]);var Ie=Fe,Ne={components:{AdminNotification:ze,UserNotification:Ie},computed:{user(){return this.$store.getters["user/user"]}}};const je=(0,d.Z)(Ne,[["render",ce]]);var Me=je,He={emits:["toggleSidebar"],components:{HeaderMenu:de,Notification:Me},data(){return{localUrl:q}},computed:{},methods:{handleClick(){this.$emit("toggleSidebar")}}};const Ye=(0,d.Z)(He,[["render",Mt]]);var Ke=Ye,Ze=s(9457),Qe=s(2329),Ge=s(9657);function Be(t,e,s,i,r,l){const o=(0,a.up)("SidebarItem");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(Ge.V,{modelValue:r.drawer,"onUpdate:modelValue":e[0]||(e[0]=t=>r.drawer=t),location:"left",absolute:!1,class:"!tw-top-0 !tw-fixed"},{default:(0,a.w5)((()=>[(0,a.Wm)(Ze.l,{class:"tw-py-3"},{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a.Wm)(Kt.f,{width:"140",src:r.localUrl+"assets/img/logo.png"},null,8,["src"])])])),_:1}),(0,a.Wm)(Qe.i,{class:"mt-2",nav:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.links,(t=>((0,a.wg)(),(0,a.j4)(o,{key:t.id,link:t},null,8,["link"])))),128))])),_:1})])),_:1},8,["modelValue"])])}const Je=[4,6,7],Xe=[{id:1,title:"Dashboard",module:"dashboard",to:"/",hasChildren:!1,gate:"all",icon:{type:"svg",value:"assets/img/icons/dashboard.svg"}},{id:2,module:"product",title:"Product",hasChildren:!0,gate:"access_to_products",icon:{type:"svg",value:"assets/img/icons/product.svg"},children:[{id:1,title:"Products List",subModule:"product/list",gate:"show_all_products",to:"/products"},{id:2,title:"Add Product",subModule:"product/add",gate:"create_product",to:"/products/add"}]},{id:3,module:"track",title:"Tracking",hasChildren:!0,gate:"none",icon:{type:"icon",value:"mdi-radar"},children:[{id:1,title:"Deliveries",subModule:"track/delivery",gate:"none",to:"/tracking/delivery"}]},{id:4,module:"sale",title:"Sales",hasChildren:!0,gate:"access_to_sales",icon:{type:"icon",value:"mdi-sale"},children:[{id:1,title:"Sales list",subModule:"sale/list",gate:"show_all_sales",to:"/sales"},{id:2,title:"Expidation",subModule:"sale/expidation",gate:"show_all_expidations",to:"/sales/expidation"},{id:3,title:"Shipping",subModule:"sale/shipping",gate:"show_all_expidations",to:"/sales/shipping"}]},{id:5,module:"factorisation",title:"Factorisation",hasChildren:!0,gate:"access_to_factorisations",icon:{type:"icon",value:"mdi-note-multiple"},children:[{id:1,title:"Factorisation list",subModule:"factorisation/list",gate:"show_all_factorisations",to:"/factorisations"}]},{id:6,module:"order",title:"Orders",hasChildren:!0,gate:"access_to_orders",icon:{type:"icon",value:"mdi-barcode-scan"},children:[{id:1,title:"Order",subModule:"order/show",gate:"show_all_orders",to:"/order"},{id:2,title:"My Orders",subModule:"order/list",gate:"show_all_orders",to:"/orders"},{id:3,title:"Confirmed Orders",subModule:"order/confirmed",gate:"show_all_orders",to:"/orders/confirmed"}]},{id:7,module:"delivery",title:"Orders",hasChildren:!0,gate:"access_to_delivery",icon:{type:"icon",value:"mdi-bike"},children:[{id:1,title:"Orders List",subModule:"delivery/list",gate:"show_all_deliveries",to:"/deliveries"},{id:2,title:"Orders Delivered",subModule:"delivery/delivered",gate:"show_all_deliveries",to:"/delivered"}]},{id:8,module:"inventory",title:"Inventory",hasChildren:!0,gate:"access_to_inventory",icon:{type:"icon",value:"mdi-warehouse"},children:[{id:1,title:"Inventory State",gate:"show_all_inventory_states",subModule:"inventory/state",to:"/inventories"},{id:2,title:"Inventory Movements",gate:"show_all_inventory_movements",subModule:"inventory/movements",to:"/inventories/movements"},{id:4,title:"Add Movement",gate:"create_inventory_movement",subModule:"inventory/add",to:"/inventories/add"}]},{id:9,module:"shop",title:"Shop",hasChildren:!0,gate:"access_to_shop",icon:{type:"icon",value:"mdi-store"},children:[{id:1,title:"Shop List",gate:"show_all_shops",subModule:"shop/list",to:"/shops"},{id:2,title:"Add Shop",gate:"create_shop",subModule:"shop/add",to:"/shops/add"}]},{id:10,module:"warehouse",title:"Warehouses",hasChildren:!0,gate:"access_to_warehouse",icon:{type:"icon",value:"mdi-home-group"},children:[{id:1,title:"Warehouses list",subModule:"warehouse/list",gate:"show_all_warehouses",to:"/warehouses"}]},{id:11,title:"Users",module:"user",gate:"access_to_users",hasChildren:!0,icon:{type:"svg",value:"assets/img/icons/users1.svg"},children:[{id:1,title:"Users List",subModule:"user/list",gate:"show_all_users",to:"/users"},{id:2,title:"Add User",subModule:"user/add",gate:"create_user",to:"/users/add"},{id:3,title:"Roles List",subModule:"user/roles",gate:"show_all_roles",to:"/users/roles"},{id:4,title:"Add Role",subModule:"user/addRole",gate:"create_role",to:"/users/addRole"}]},{id:15,title:"Sheets",module:"sheets",to:"/sheets",gate:"access_to_sheets",hasChildren:!1,icon:{type:"icon",value:"mdi-note-text-outline"}},{id:12,title:"Settings",module:"settings",to:"/settings",gate:"access_to_account",hasChildren:!1,icon:{type:"svg",value:"assets/img/icons/settings.svg"}},{id:10,title:"Test",module:"test",to:"/test",hasChildren:!1,gate:"all",icon:{type:"icon",value:"mdi-hammer-wrench"}}];var ts=s(9234),es=s(2127);const ss={key:0},is={class:"d-flex align-center"},as={class:"tw-rounded-md tw-bg-gray-50"},rs={class:"tw-h-full py-2"},ls={key:1},os={key:2},ns={key:3};function ds(t,e,s,i,r,l){const o=(0,a.up)("SidebarSales"),n=(0,a.up)("SidebarDelivery"),d=(0,a.up)("SidebarAgente");return(0,a.wg)(),(0,a.iD)("div",null,[!t.$can(s.link.gate)&&"all"!=s.link.gate||r.disabled_links.includes(s.link.id)?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",ss,[(0,a.Wm)(Ze.l,{class:(0,Q.C_)(["mx-3 mb-2",{"bg-secondary-color":r.isActive}]),onClick:e[0]||(e[0]=t=>l.handleClick()),density:"comfortable",active:!1,ripple:!1,to:s.link.hasChildren?"":s.link.to,link:""},{default:(0,a.w5)((()=>[(0,a._)("div",is,["icon"==s.link.icon.type?((0,a.wg)(),(0,a.j4)(J.t,{key:0,icon:s.link.icon.value,color:r.isActive?"white":"grey-darken-2",class:"mr-2",size:"small"},null,8,["icon","color"])):(0,a.kq)("",!0),"svg"==s.link.icon.type?((0,a.wg)(),(0,a.j4)(Kt.f,{key:1,src:r.localUrl+s.link.icon.value,"max-width":"18",class:(0,Q.C_)([{active:r.isActive},"mr-2 tw-fill-white"]),size:"small"},null,8,["src","class"])):(0,a.kq)("",!0),(0,a.Wm)(es.V,{class:(0,Q.C_)(["text-body-2 font-weight-regular",{"text-white":r.isActive}]),textContent:(0,Q.zw)(s.link.title)},null,8,["class","textContent"]),(0,a.Wm)(ts.C),s.link.hasChildren?((0,a.wg)(),(0,a.j4)(J.t,{key:2,class:(0,Q.C_)(["item-icon",{activeRotate:r.isActive}]),icon:"mdi-chevron-right"},null,8,["class"])):(0,a.kq)("",!0)])])),_:1},8,["class","to"]),s.link.hasChildren?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,Q.C_)([{"!tw-max-h-[1000px] mb-2 mt-n3":r.isActive},"tw-max-h-0 tw-w-auto mx-3 tw-overflow-hidden tw-duration-300"])},[(0,a._)("div",as,[(0,a.Wm)(Qe.i,{density:"compact"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.allowedChildren,(t=>((0,a.wg)(),(0,a.j4)(Ze.l,{key:t.id,link:"",exact:"",active:!1,to:t.to,height:"10",class:"!tw-h-fit !tw-py-0"},{default:(0,a.w5)((()=>[(0,a._)("div",rs,[(0,a.Wm)(J.t,{size:"x-small",class:"mr-2",color:l.isSublinkActive(t)?"primary-color":"secondary-color",icon:l.isSublinkActive(t)?"mdi-chevron-double-right":"mdi-circle-medium"},null,8,["color","icon"]),(0,a._)("span",{class:(0,Q.C_)(["tw-text-sm",{"text-primary-color":l.isSublinkActive(t)}])},(0,Q.zw)(t.title),3)])])),_:2},1032,["to"])))),128))])),_:1})])],2)):(0,a.kq)("",!0)])),4==s.link.id?((0,a.wg)(),(0,a.iD)("div",ls,[(0,a.Wm)(o)])):(0,a.kq)("",!0),7==s.link.id?((0,a.wg)(),(0,a.iD)("div",os,[(0,a.Wm)(n)])):(0,a.kq)("",!0),8==s.link.id?((0,a.wg)(),(0,a.iD)("div",ns,[(0,a.Wm)(d)])):(0,a.kq)("",!0)])}const cs={key:0},ws={class:"d-flex align-center"},us={class:"tw-w-fit tw-h-[24px] tw-flex tw-items-center tw-justify-center tw-px-1 tw-bg-orange-500 tw-text-sm tw-text-white tw-rounded tw-ml-2"},ps={key:1,class:"tw-text-xs"},ms={class:"tw-rounded-md tw-bg-gray-50"},hs={class:"tw-h-full py-2"};function gs(t,e,s,i,r,l){return t.$can(r.link.gate)||"all"==r.link.gate?((0,a.wg)(),(0,a.iD)("div",cs,[(0,a.Wm)(Ze.l,{class:(0,Q.C_)(["mx-3 mb-2",{"bg-secondary-color":r.isActive}]),onClick:e[0]||(e[0]=t=>l.handleClick()),density:"comfortable",active:!1,ripple:!1,to:r.link.hasChildren?"":r.link.to,link:""},{default:(0,a.w5)((()=>[(0,a._)("div",ws,["icon"==r.link.icon.type?((0,a.wg)(),(0,a.j4)(J.t,{key:0,icon:r.link.icon.value,color:r.isActive?"white":"grey-darken-2",class:"mr-2",size:"small"},null,8,["icon","color"])):(0,a.kq)("",!0),"svg"==r.link.icon.type?((0,a.wg)(),(0,a.j4)(Kt.f,{key:1,src:r.localUrl+r.link.icon.value,"max-width":"18",class:(0,Q.C_)([{active:r.isActive},"mr-2 tw-fill-white"]),size:"small"},null,8,["src","class"])):(0,a.kq)("",!0),(0,a.Wm)(es.V,{class:(0,Q.C_)(["text-body-2 font-weight-regular",{"text-white":r.isActive}]),textContent:(0,Q.zw)(r.link.title)},null,8,["class","textContent"]),(0,a._)("div",us,[r.isLoaded?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(J.t,{key:0,color:"white",class:"tw-animate-spin",size:"x-small"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-loading")])),_:1})),r.isLoaded?((0,a.wg)(),(0,a.iD)("p",ps,(0,Q.zw)(l.sales.length),1)):(0,a.kq)("",!0)]),(0,a.Wm)(ts.C),r.link.hasChildren?((0,a.wg)(),(0,a.j4)(J.t,{key:2,class:(0,Q.C_)(["item-icon",{activeRotate:r.isActive}]),icon:"mdi-chevron-right"},null,8,["class"])):(0,a.kq)("",!0)])])),_:1},8,["class","to"]),r.link.hasChildren?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,Q.C_)([{"!tw-max-h-[1000px] mb-2 mt-n3":r.isActive},"tw-max-h-0 tw-w-auto mx-3 tw-overflow-hidden tw-duration-300"])},[(0,a._)("div",ms,[(0,a.Wm)(Qe.i,{density:"compact"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.allowedChildren,(t=>((0,a.wg)(),(0,a.j4)(Ze.l,{key:t.id,link:"",exact:"",active:!1,to:t.to,height:"10",class:"!tw-h-fit !tw-py-0"},{default:(0,a.w5)((()=>[(0,a._)("div",hs,[(0,a.Wm)(J.t,{size:"x-small",class:"mr-2",color:l.isSublinkActive(t)?"primary-color":"secondary-color",icon:l.isSublinkActive(t)?"mdi-chevron-double-right":"mdi-circle-medium"},null,8,["color","icon"]),(0,a._)("span",{class:(0,Q.C_)(["tw-text-sm",{"text-primary-color":l.isSublinkActive(t)}])},(0,Q.zw)(t.title),3)])])),_:2},1032,["to"])))),128))])),_:1})])],2)):(0,a.kq)("",!0)])):(0,a.kq)("",!0)}class fs{async all(){return await H.getCookie(),j.get("api/sales")}async delete(t){return await H.getCookie(),j.get("api/sales/delete/"+t)}async update(t,e){return await H.getCookie(),j.post("api/orders/update/"+t,e)}async create(t){return await H.getCookie(),j.post("api/sales/new",t)}async agenteOrders(){return await H.getCookie(),j.get("api/orders")}async agenteConfirmedOrders(){return await H.getCookie(),j.get("api/orders/confirmer")}async agenteAddOrder(){return await H.getCookie(),j.get("api/orders/add")}async agenteGetOrder(){return await H.getCookie(),j.get("api/orders/toconfirmate")}async agenteUpdateConfirmation(t,e,s={}){return await H.getCookie(),j.post("api/orders/update/confirmation/"+t,{confirmation:e,...s})}async agenteUpdateConfirmationWithNote(t,e,s){return await H.getCookie(),j.post("api/orders/update/confirmationandnote/"+t,{confirmation:e,note:s})}async agenteUpdateUpsell(t,e){return await H.getCookie(),j.post("api/orders/update/upsell/"+t,{upsell:e})}async agenteUpdateAffectaion(t,e){return await H.getCookie(),j.post("api/orders/update/affectation/"+t,{affectation:e})}async agenteUpdateNote(t,e){return await H.getCookie(),j.post("api/orders/update/note/"+t,{note:e})}async deliveryOrders(){return await H.getCookie(),j.get("api/orders/todelivery")}async deliveryDeliveredOrders(){return await H.getCookie(),j.get("api/orders/delivred")}async deliveryUpdateDelivery(t,e,s){return await H.getCookie(),j.post("api/orders/update/delivery/"+t,{delivery:e,...s})}async history(t){return await H.getCookie(),j.get("api/orders/history/show/"+t)}async resetSale(t){return await H.getCookie(),j.post("api/sales/reset",{ids:t})}async scanSale(t){return await H.getCookie(),j.post("api/sales/scan",t)}async availableOrders(){return await H.getCookie(),j.get("api/orders/count")}}var vs=new fs,ys={props:[],data(){return{localUrl:q,isActive:!1,isLoaded:!1,link:{id:4,module:"sale",title:"Sales",hasChildren:!0,gate:"access_to_sales",icon:{type:"icon",value:"mdi-sale"},children:[{id:1,title:"Sales list",subModule:"sale/list",gate:"show_all_sales",to:"/sales"},{id:2,title:"Expidation",subModule:"sale/expidation",gate:"show_all_expidations",to:"/sales/expidation"},{id:3,title:"Shipping",subModule:"sale/shipping",gate:"show_all_expidations",to:"/sales/shipping"}]}}},methods:{handleClick(){this.$route.path!==this.link.to?this.isActive=!this.isActive:this.isActive=!0},isSublinkActive(t){return this.$route.path==t.to},isLinkActive(){return this.link.hasChildren?this.link.module==this.$route.meta.module:this.link.to===this.$route.path},getSales(){return this.isLoaded=!1,vs.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;console.log(t.data),this.$store.dispatch("sale/setSales",e),this.$store.dispatch("sale/setFetched",!0),this.isLoaded=!0}})).catch(this.$handleApiError)}},computed:{allowedChildren(){return this.link?.children.filter((t=>this.$can(t.gate)||"all"===t.gate))},sales(){return this.$store.getters["sale/sales"]}},watch:{$route(){this.isActive=this.isLinkActive()}},mounted(){this.isActive=this.isLinkActive(),this.$can(this.link.gate)&&this.getSales()}};const _s=(0,d.Z)(ys,[["render",gs],["__scopeId","data-v-bfdbb7e6"]]);var xs=_s;const bs={key:0},ks={class:"d-flex align-center"},Cs={class:"tw-w-fit tw-h-[24px] tw-flex tw-items-center tw-justify-center tw-px-1 tw-bg-orange-500 tw-text-sm tw-text-white tw-rounded tw-ml-2"},Ds={key:1,class:"tw-text-xs"};function Ss(t,e,s,i,r,l){return t.$can(r.link.gate)||"all"==r.link.gate?((0,a.wg)(),(0,a.iD)("div",bs,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.link.children,(s=>((0,a.wg)(),(0,a.j4)(Ze.l,{class:(0,Q.C_)(["mx-3 mb-2",{"bg-secondary-color":t.$route.path==s.to}]),onClick:e[0]||(e[0]=t=>l.handleClick()),density:"comfortable",active:!1,ripple:!1,to:s.to,link:"",key:s.id},{default:(0,a.w5)((()=>[(0,a._)("div",ks,[(0,a.Wm)(J.t,{icon:s.icon,color:t.$route.path==s.to?"white":"grey-darken-2",class:"mr-2",size:"small"},null,8,["icon","color"]),(0,a.Wm)(es.V,{class:(0,Q.C_)(["text-body-2 font-weight-regular",{"text-white":t.$route.path==s.to}]),textContent:(0,Q.zw)(s.title)},null,8,["class","textContent"]),(0,a.Wm)(ts.C),(0,a._)("div",Cs,[l.fetched?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(J.t,{key:0,color:"white",class:"tw-animate-spin",size:"x-small"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-loading")])),_:1})),l.fetched?((0,a.wg)(),(0,a.iD)("p",Ds,(0,Q.zw)(1==s.id?l.orders.length-l.deliveredOrders.length:l.deliveredOrders.length),1)):(0,a.kq)("",!0)])])])),_:2},1032,["class","to"])))),128))])):(0,a.kq)("",!0)}class zs{async delivery(){return await H.getCookie(),j.get("api/dashboard/delivery")}async agente(){return await H.getCookie(),j.get("api/dashboard/agente")}}var Us=new zs,Ls={props:[],data(){return{localUrl:q,isActive:!1,isLoaded:!1,link:{id:7,module:"delivery",title:"Orders",hasChildren:!1,gate:"access_to_delivery",icon:{type:"icon",value:"mdi-bike"},children:[{id:1,title:"Orders",subModule:"delivery/list",gate:"show_all_deliveries",to:"/deliveries",icon:"mdi-truck"},{id:2,title:"Delivered Orders",subModule:"delivery/delivered",gate:"show_all_deliveries",to:"/delivered",icon:"mdi-truck-check"}]}}},methods:{handleClick(){this.$route.path!==this.link.to?this.isActive=!this.isActive:this.isActive=!0},isSublinkActive(t){return this.$route.path==t.to},isLinkActive(){return this.link.hasChildren?this.link.module==this.$route.meta.module:this.link.to===this.$route.path},getOrders(){return this.isLoaded=!1,Us.delivery().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;this.$store.dispatch("order/setAllOrders",e),this.$store.dispatch("order/setFetched",!0),this.isLoaded=!0}console.log(t)})).catch(this.$handleApiError)}},computed:{allowedChildren(){return this.link?.children.filter((t=>this.$can(t.gate)||"all"===t.gate))},orders(){return this.$store.getters["order/allOrders"].filter((t=>"confirmer"==t.confirmation))},deliveredOrders(){return this.orders.filter((t=>"livrer"==t.delivery))},fetched(){return this.$store.getters["order/fetched"]}},watch:{$route(){this.isActive=this.isLinkActive()}},mounted(){this.isActive=this.isLinkActive(),this.$can(this.link.gate)&&this.getOrders()}};const As=(0,d.Z)(Ls,[["render",Ss],["__scopeId","data-v-69fa82e9"]]);var Ps=As;const Ws={key:0},Es={class:"d-flex align-center"},$s={key:0,class:"tw-w-fit tw-h-[24px] tw-flex tw-items-center tw-justify-center tw-px-1 tw-bg-orange-500 tw-text-sm tw-text-white tw-rounded tw-ml-2"},Ts={key:1,class:"tw-text-xs"},Os={key:1,class:"tw-w-fit tw-h-[24px] tw-flex tw-items-center tw-justify-center tw-px-1 tw-bg-orange-500 tw-text-sm tw-text-white tw-rounded tw-ml-2"},Vs={key:1,class:"tw-text-xs"};function Rs(t,e,s,i,r,l){return t.$can(r.link.gate)||"all"==r.link.gate?((0,a.wg)(),(0,a.iD)("div",Ws,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.link.children,(s=>((0,a.wg)(),(0,a.j4)(Ze.l,{class:(0,Q.C_)(["mx-3 mb-2",{"bg-secondary-color":t.$route.path==s.to}]),onClick:e[0]||(e[0]=t=>l.handleClick()),density:"comfortable",active:!1,ripple:!1,to:s.to,link:"",key:s.id},{default:(0,a.w5)((()=>[(0,a._)("div",Es,[(0,a.Wm)(J.t,{icon:s.icon,color:t.$route.path==s.to?"white":"grey-darken-2",class:"mr-2",size:"small"},null,8,["icon","color"]),(0,a.Wm)(es.V,{class:(0,Q.C_)(["text-body-2 font-weight-regular",{"text-white":t.$route.path==s.to}]),textContent:(0,Q.zw)(s.title)},null,8,["class","textContent"]),(0,a.Wm)(ts.C),1!=s.id?((0,a.wg)(),(0,a.iD)("div",$s,[l.fetched?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(J.t,{key:0,color:"white",class:"tw-animate-spin",size:"x-small"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-loading")])),_:1})),l.fetched?((0,a.wg)(),(0,a.iD)("p",Ts,(0,Q.zw)(2==s.id?l.myOrders.length:l.confirmedOrders.length),1)):(0,a.kq)("",!0)])):(0,a.kq)("",!0),1==s.id?((0,a.wg)(),(0,a.iD)("div",Os,[r.isCountLoading?((0,a.wg)(),(0,a.j4)(J.t,{key:0,color:"white",class:"tw-animate-spin",size:"x-small"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-loading")])),_:1})):(0,a.kq)("",!0),r.isCountLoading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("p",Vs,(0,Q.zw)(r.available),1))])):(0,a.kq)("",!0)])])),_:2},1032,["class","to"])))),128))])):(0,a.kq)("",!0)}var qs={props:[],data(){return{localUrl:q,isActive:!1,isLoaded:!1,isCountLoading:!1,available:0,link:{id:6,module:"order",title:"Orders",hasChildren:!0,gate:"access_to_orders",icon:{type:"icon",value:"mdi-barcode-scan"},children:[{id:1,title:"Order",subModule:"order/show",gate:"show_all_orders",to:"/order",icon:"mdi-plus-box"},{id:2,title:"My Orders",subModule:"order/list",gate:"show_all_orders",to:"/orders",icon:"mdi-package-variant-closed"},{id:3,title:"Confirmed Orders",subModule:"order/confirmed",gate:"show_all_orders",to:"/orders/confirmed",icon:"mdi-checkbox-marked"}]}}},methods:{handleClick(){this.$route.path!==this.link.to?this.isActive=!this.isActive:this.isActive=!0},isSublinkActive(t){return this.$route.path==t.to},isLinkActive(){return this.link.hasChildren?this.link.module==this.$route.meta.module:this.link.to===this.$route.path},getOrders(){return this.isLoaded=!1,Us.agente().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;this.$store.dispatch("order/setAllOrders",e),this.$store.dispatch("order/setFetched",!0),this.isLoaded=!0}console.log(t)})).catch(this.$handleApiError)},getCountOrders(){this.isCountLoading=!0,vs.availableOrders().then((t=>{console.log(t),"SUCCESS"==t.data.code&&(this.available=t.data.data.availble)}),this.$handleApiError).finally((()=>{this.isCountLoading=!1}))}},computed:{allowedChildren(){return this.link?.children.filter((t=>this.$can(t.gate)||"all"===t.gate))},orders(){return this.$store.getters["order/allOrders"]},myOrders(){return this.orders.filter((t=>"confirmer"!=t.confirmation))},confirmedOrders(){return this.orders.filter((t=>"confirmer"==t.confirmation))},fetched(){return this.$store.getters["order/fetched"]}},watch:{$route(){this.isActive=this.isLinkActive()},orders(){this.getCountOrders()}},mounted(){this.isActive=this.isLinkActive(),this.$can(this.link.gate)&&(this.getOrders(),this.getCountOrders())}};const Fs=(0,d.Z)(qs,[["render",Rs],["__scopeId","data-v-0cd1b9c4"]]);var Is=Fs,Ns={props:["link"],components:{SidebarSales:xs,SidebarDelivery:Ps,SidebarAgente:Is},data(){return{localUrl:q,disabled_links:Je,isActive:!1}},methods:{handleClick(){this.$route.path!==this.link.to?this.isActive=!this.isActive:this.isActive=!0},isSublinkActive(t){return this.$route.path==t.to},isLinkActive(){return this.link.hasChildren?this.link.module==this.$route.meta.module:this.link.to===this.$route.path}},computed:{allowedChildren(){return this.link?.children.filter((t=>this.$can(t.gate)||"all"===t.gate))}},watch:{$route(){this.isActive=this.isLinkActive()}},mounted(){this.isActive=this.isLinkActive()}};const js=(0,d.Z)(Ns,[["render",ds],["__scopeId","data-v-35ca0437"]]);var Ms=js,Hs={components:{SidebarItem:Ms},props:["active"],data(){return{localUrl:q,drawer:!0,links:Xe}},computed:{},watch:{active(){this.drawer=!this.drawer}},methods:{},mounted(){this.$vuetify.display.mdAndDown&&(this.drawer=!1)}};const Ys=(0,d.Z)(Hs,[["render",Be]]);var Ks=Ys,Zs=s(4410),Qs=s.n(Zs),Gs=s(6027);class Bs{async all(){return await H.getCookie(),j.get("api/sheets")}async create(t){await H.getCookie();const e={name:t.name,sheet_id:t.sheet_id,sheet_name:t.sheet_name,auto_fetch:t.auto_fetch};return j.post("api/sheets",e)}async update(t,e){await H.getCookie();const s={name:e.name,sheet_id:e.sheet_id,sheet_name:e.sheet_name,auto_fetch:e.auto_fetch};return j.post("api/sheets/"+t,s)}async delete(t){return await H.getCookie(),j["delete"]("api/sheets/"+t)}async updateAutoFetch(t,e){return await H.getCookie(),j.post("api/sheets/"+t+"/auto-fetch",{autoFetch:e})}async sync(t){return await H.getCookie(),j.get("api/sync/"+t)}async sync_all(){return await H.getCookie(),j.get("api/sync")}async auto(){return await H.getCookie(),j.post("api/sync")}async saveOrders(t){return await H.getCookie(),j.get("api/sync/"+t+"/save")}}var Js=new Bs;class Xs{async create(t){return await H.getCookie(),j.post("api/products/new",{name:t.name,buying_price:t.buyingPrice,selling_price:t.sellingPrice,ref:t.reference,variations:t.variants,description:t.description,deliveries:t.selectedDeliveries,status:1})}async update(t,e){return await H.getCookie(),j.post("api/products/update/"+t,{name:e.name,buying_price:e.buyingPrice,selling_price:e.sellingPrice,ref:e.reference,variations:e.variants,description:e.description,status:1,deliveries:e.selectedDeliveries})}async all(){return await H.getCookie(),j.get("api/products")}async getProduct(t){return await H.getCookie(),j.get("api/products/"+t)}async delete(t){return await H.getCookie(),j["delete"]("api/products/delete/"+t)}async stockAlert(){return await H.getCookie(),j.get("api/product/stockAlert")}}var ti=new Xs,ei={components:{AppHeader:Ke,AppSidebar:Ks,Alert:Et},data(){return{drawer:!1,subscribed:!1,fetching:null,delay:6e4}},computed:{isLoggedIn(){return this.$store.getters["user/isLoggedIn"]},cities(){return this.$store.getters["city/cities"]},user(){return this.$store.getters["user/user"]},sales(){return this.$store.getters["sale/sales"]}},methods:{toggleSidebar(){this.drawer=!this.drawer},async getCities(){if(0==this.cities.length||1!=localStorage.getItem("update_cities"))return K.cities().then((t=>{const e=t.data.data;this.$store.dispatch("city/setCities",e),localStorage.setItem("update_cities",1)}))},subscribe(){console.log(Qs());const t=new Gs.Z({broadcaster:"pusher",key:"ABCDEFG",wsHost:"127.0.0.1",wsPort:6001,forceTLS:!1,disableStats:!0,cluster:"mt1"});window.Echo=t,t.channel("notification").listenToAll((t=>{console.log(t)})),this.subscribed=!0},sync_sheets(){"admin"==this.user.role?Js.sync_all().then((t=>{if("SUCCESS"==t.data.code){const e=[...t.data.data.orders,...this.sales];this.$store.dispatch("sale/setSales",e),t.data.data.orders.length>0&&this.$alert({type:"info",title:t.data.data.orders.length+" New orders has been added"})}})):Js.auto()},getUsers(){K.all().then((t=>{if("SHOW_ALL_USERS"==t?.data.code){const e=t.data.data.users;this.$store.dispatch("user/setUsers",e),this.$store.dispatch("user/setFetched",!0)}})).catch(this.$handleApiError)},getProducts(){return ti.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))}},mounted(){this.getCities(),this.fetching=setInterval(this.sync_sheets,this.delay),this.$can("show_all_products")&&this.getProducts(),this.getUsers()}};const si=(0,d.Z)(ei,[["render",Ft]]);var ii=si;function ai(t,e,s,i,r,l){return(0,a.wg)(),(0,a.iD)("div",null,[((0,a.wg)(),(0,a.j4)((0,a.LL)(l.dashboard)))])}var ri=s(6824),li=s(8521);const oi={key:0},ni={key:1},di=(0,a._)("div",{class:"mb-2 mt-5 tw-flex tw-justify-between tw-items-center"},[(0,a._)("div",null,[(0,a._)("h2",{class:"tw-text-gray-500 tw-text-lg"},"Online")])],-1),ci={class:"py-2 px-2 tw-border bg-white tw-w-full tw-rounded"},wi=(0,a._)("div",{class:"mb-2 mt-2 tw-flex tw-justify-between tw-items-center"},[(0,a._)("div",null,[(0,a._)("h2",{class:"tw-text-gray-500 tw-text-lg"},"Statistiques")])],-1),ui={class:"px-5 tw-border bg-white tw-w-full tw-rounded-md"};function pi(t,e,s,i,r,l){const o=(0,a.up)("LoadingAnimation"),n=(0,a.up)("UsersTable"),d=(0,a.up)("FilterTabs"),c=(0,a.up)("DashItem"),w=(0,a.up)("TabSwitcher");return(0,a.wg)(),(0,a.iD)("div",null,[r.isLoaded?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",oi,[(0,a.Wm)(o)])),r.isLoaded?((0,a.wg)(),(0,a.iD)("div",ni,[di,(0,a._)("div",ci,[(0,a.Wm)(ri.o,null,{default:(0,a.w5)((()=>[(0,a.Wm)(li.D,{cols:"12",md:"12"},{default:(0,a.w5)((()=>[(0,a.Wm)(n)])),_:1})])),_:1})]),wi,(0,a._)("div",ui,[(0,a.Wm)(ri.o,null,{default:(0,a.w5)((()=>[(0,a.Wm)(li.D,{cols:"12",md:"12"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{filters:r.filters,"onUpdate:filters":e[0]||(e[0]=t=>r.filters=t)},null,8,["filters"])])),_:1})])),_:1}),(0,a.Wm)(ri.o,null,{default:(0,a.w5)((()=>[(0,a.Wm)(li.D,{cols:"12",sm:"6",md:"3"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{dash:l.dashChiffreAffaires},null,8,["dash"])])),_:1}),(0,a.Wm)(li.D,{cols:"12",sm:"6",md:"3"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{dash:l.dashChiffreAffairesVerse},null,8,["dash"])])),_:1}),(0,a.Wm)(li.D,{cols:"12",sm:"6",md:"3"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{dash:l.dashChiffreAffairesNonVerse},null,8,["dash"])])),_:1}),(0,a.Wm)(li.D,{cols:"12",sm:"6",md:"3"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{dash:l.dashChiffreAffairesEnCaisse},null,8,["dash"])])),_:1})])),_:1}),(0,a.Wm)(ri.o,null,{default:(0,a.w5)((()=>[(0,a.Wm)(li.D,{cols:"12",md:"12"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{"filtered-sales":l.filteredSales},null,8,["filtered-sales"])])),_:1})])),_:1})])])):(0,a.kq)("",!0)])}var mi=s(4286);const hi={class:"tw-flex tw-items-center"},gi={class:"tw-flex tw-flex-col tw-h-full tw-text-neutral-600"},fi={class:"tw-text-lg tw-font-bold"},vi={class:"tw-text-sm"};function yi(t,e,s,i,r,l){return(0,a.wg)(),(0,a.j4)(mi.C,{class:"tw-rounded-lg tw-border pa-5 py-2",color:"white",height:"fit"},{default:(0,a.w5)((()=>[(0,a._)("div",hi,[(0,a._)("div",{class:(0,Q.C_)([l.bgColor,"pa-3 rounded-circle tw-w-fit tw-mr-3"])},[(0,a.Wm)(J.t,{color:s.dash.color,size:"large",icon:s.dash.icon},null,8,["color","icon"])],2),(0,a._)("div",gi,[(0,a._)("p",fi,(0,Q.zw)(s.dash.value),1),(0,a.Wm)(ts.C),(0,a._)("p",vi,(0,Q.zw)(s.dash.title),1)])])])),_:1})}var _i={props:["dash"],computed:{bgColor(){const t={orange:"tw-bg-orange-500/10",green:"tw-bg-green-500/10",blue:"tw-bg-blue-500/10",pink:"tw-bg-pink-500/10",red:"tw-bg-red-500/10",yellow:"tw-bg-yellow-500/10"};return t[this.dash.color]}}};const xi=(0,d.Z)(_i,[["render",yi]]);var bi=xi;const ki={key:0,class:""},Ci={class:"tw-flex tw-items-center tw-flex-wrap tw-gap-2"},Di=(0,a._)("div",{class:"tw-w-[120px] tw-h-[55px] tw-bg-neutral-300/10 tw-animate-pulse tw-rounded tw-border tw-grid tw-grid-cols-12"},null,-1),Si=[Di],zi={key:1,class:"tw-min-h-[50px]"},Ui={class:"tw-flex tw-items-center tw-flex-wrap tw-gap-2"},Li={class:"py-2 px-3 tw-rounded tw-border tw-grid tw-grid-cols-12"},Ai={class:"tw-col-span-12 tw-font-medium tw-capitalize tw-text-sm tw-text-neutral-600 tw-whitespace-nowrap"},Pi={class:"tw-col-span-12 tw-whitespace-nowrap tw-text-xs"},Wi={key:0,class:"tw-text-red-500 tw-flex tw-items-center tw-gap-2"},Ei=(0,a._)("div",{class:"tw-p-1 tw-rounded-full tw-bg-red-400"},null,-1),$i={key:1},Ti={key:0,class:"tw-text-green-500 tw-flex tw-items-center tw-gap-2"},Oi=(0,a._)("div",{class:"tw-p-1 tw-rounded-full tw-bg-green-500"},null,-1),Vi={key:1,class:"tw-flex tw-items-center tw-gap-2"},Ri=(0,a._)("div",{class:"tw-p-1 tw-rounded-full tw-bg-yellow-400"},null,-1);function qi(t,e,s,i,r,l){return(0,a.wg)(),(0,a.iD)("div",null,[r.isLoaded?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",ki,[(0,a._)("div",Ci,[((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(4,(t=>(0,a._)("div",{key:t},Si))),64))])])),r.isLoaded?((0,a.wg)(),(0,a.iD)("div",zi,[(0,a._)("div",Ui,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.users,(t=>((0,a.wg)(),(0,a.iD)("div",{key:t.id},[(0,a._)("div",Li,[(0,a._)("div",Ai,(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),1),(0,a._)("div",Pi,[t.last_action?((0,a.wg)(),(0,a.iD)("div",$i,[1==l.isOnline(l.lastSeen(t.last_action))?((0,a.wg)(),(0,a.iD)("div",Ti,[Oi,(0,a.Uk)(" Online ")])):((0,a.wg)(),(0,a.iD)("div",Vi,[Ri,(0,a.Uk)(" "+(0,Q.zw)(l.lastSeen(t.last_action)),1)]))])):((0,a.wg)(),(0,a.iD)("div",Wi,[Ei,(0,a.Uk)(" Never Connected ")]))])])])))),128))]),(0,a.kq)("",!0)])):(0,a.kq)("",!0)])}var Fi=s(8777),Ii={components:{},data(){return{isLoaded:!1}},computed:{users(){return this.$store.getters["user/users"].slice(0,5)}},methods:{getUsers(){K.all().then((t=>{if("SHOW_ALL_USERS"==t?.data.code){const e=t.data.data.users;this.$store.dispatch("user/setUsers",e),console.log(t),this.isLoaded=!0}})).catch(this.$handleApiError)},lastSeen(t){let e=Date.parse(t.replace("-","/"))/1e3;return(0,Fi.x)(e)},isOnline(t){let e=["Just Now","1 minute ago","2 minute ago"];return e.includes(t)}},mounted(){this.getUsers()}};const Ni=(0,d.Z)(Ii,[["render",qi]]);var ji=Ni,Mi=s(1489),Hi=s(3144),Yi=s(9870),Ki=s(6161),Zi=s(4722);function Qi(t,e,s,i,r,l){return(0,a.wg)(),(0,a.j4)(Mi._,{flat:""},{default:(0,a.w5)((()=>[(0,a.Wm)(Hi.d,{modelValue:r.tab,"onUpdate:modelValue":e[0]||(e[0]=t=>r.tab=t),color:"primary-color","align-tabs":"start",density:"compact"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.tabs,(t=>((0,a.wg)(),(0,a.j4)(Yi.L,{key:t.id,value:t.id},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Q.zw)(t.name),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"]),(0,a.Wm)(Ki.Oo,{class:"tw-mt-0",modelValue:r.tab,"onUpdate:modelValue":e[1]||(e[1]=t=>r.tab=t)},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.tabs,(t=>((0,a.wg)(),(0,a.j4)(Zi.H,{key:t.id,value:t.id,transition:"fade-transition","reverse-transition":"fade-transition"},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(t.component),{"filtered-sales":s.filteredSales},null,8,["filtered-sales"]))])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])),_:1})}const Gi={class:"tw-grid tw-mb-5 tw-grid-cols-4 md:tw-grid-cols-4 lg:tw-grid-cols-4 tw-gap-2 py-5"},Bi={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},Ji={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},Xi={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},ta={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},ea={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},sa={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"};function ia(t,e,s,i,r,l){const o=(0,a.up)("DashItemTwo");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",Gi,[(0,a._)("div",Bi,[(0,a.Wm)(o,{dash:l.totalSales},null,8,["dash"])]),(0,a._)("div",Ji,[(0,a.Wm)(o,{dash:l.deliveredSales},null,8,["dash"])]),(0,a._)("div",Xi,[(0,a.Wm)(o,{dash:l.shippedSales},null,8,["dash"])]),(0,a._)("div",ta,[(0,a.Wm)(o,{dash:l.reportedSales},null,8,["dash"])]),(0,a._)("div",ea,[(0,a.Wm)(o,{dash:l.noanswerSales},null,8,["dash"])]),(0,a._)("div",sa,[(0,a.Wm)(o,{dash:l.canceledSales},null,8,["dash"])])])])}const aa={class:"tw-flex tw-justify-between tw-items-center tw-w-full tw-h-full pa-3 px-4"},ra={class:"tw-flex tw-flex-col tw-justify-center tw-w-full tw-h-full tw-text-white"},la={class:"tw-text-xl tw-font-bold"},oa={class:"tw-flex tw-items-center tw-gap-1 tw-w-full tw-h-full tw-text-white"},na={class:"tw-text-sm"},da={class:"rounded-circle tw-w-fit tw-mr-3"};function ca(t,e,s,i,r,l){const o=(0,a.up)("number");return(0,a.wg)(),(0,a.j4)(mi.C,{class:"tw-rounded-lg",color:s.dash.color,height:"70"},{default:(0,a.w5)((()=>[(0,a._)("div",aa,[(0,a._)("div",ra,[(0,a._)("p",la,(0,Q.zw)(isNaN(s.dash.pourcentage)?"0.00%":s.dash.pourcentage)+" "+(0,Q.zw)(s.symbol),1),(0,a._)("span",oa,[s.numbers?((0,a.wg)(),(0,a.j4)(o,{key:0,class:"tw-font-bold",ref:"number1",from:0,to:s.dash.value,duration:1,delay:0,easing:"Power.easeOut"},null,8,["to"])):(0,a.kq)("",!0),(0,a._)("p",na,(0,Q.zw)(s.dash.title),1)])]),(0,a._)("div",da,[(0,a.Wm)(J.t,{color:"white",size:"large",class:"md:tw-scale-[1.8] tw-scale-[1.3]",icon:s.dash.icon},null,8,["icon"])])])])),_:1},8,["color"])}var wa={props:{dash:{required:!0},symbol:{required:!1,default:"%"},numbers:{required:!1,default:!0}}};const ua=(0,d.Z)(wa,[["render",ca]]);var pa=ua,ma={components:{DashItemTwo:pa},props:["filteredSales"],data(){return{isLoaded:!1}},computed:{user(){return this.$store.getters["user/user"]},isAdmin(){return"admin"==this.user.role},sales(){return this.filteredSales},totalSales(){return{id:1,title:"Total",value:this.sales.filter((t=>"confirmer"==t.confirmation)).length,pourcentage:100*this.sales.filter((t=>"confirmer"==t.confirmation)).length/this.sales.filter((t=>"confirmer"==t.confirmation)).length,color:"deep-purple-accent-2",icon:"mdi mdi-all-inclusive"}},deliveredSales(){return{id:2,title:"Delivered",value:this.sales.filter((t=>"livrer"==t.delivery)).length,pourcentage:(100*this.sales.filter((t=>"livrer"==t.delivery)).length/this.sales.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"primary-green",icon:"mdi-account-check-outline"}},toProcess(){return{id:3,title:"Process",value:this.sales.filter((t=>!!t.confirmation&&!["confirmer","livrer","expidier"].includes(t.delivery))).length,color:"primary-orange",icon:"mdi-reload"}},shippedSales(){return{id:4,title:"Shipped",value:this.sales.filter((t=>"expidier"==t.delivery)).length,pourcentage:(100*this.sales.filter((t=>"expidier"==t.delivery)).length/this.sales.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"primary-orange",icon:"mdi-truck"}},reportedSales(){return{id:5,title:"Reported",value:this.sales.filter((t=>"reporter"==t.delivery)).length,pourcentage:(100*this.sales.filter((t=>"reporter"==t.delivery)).length/this.sales.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"primary-blue",icon:"mdi mdi-clock-outline"}},canceledSales(){return{id:6,title:"Canceled",value:this.sales.filter((t=>"annuler"==t.delivery)).length,pourcentage:(100*this.sales.filter((t=>"annuler"==t.delivery)).length/this.sales.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"red-accent-3",icon:"mdi mdi-cancel"}},noanswerSales(){return{id:6,title:"No Answer",value:this.sales.filter((t=>"pas-de-reponse"==t.delivery)).length,pourcentage:(100*this.sales.filter((t=>"pas-de-reponse"==t.delivery)).length/this.sales.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"yellow-darken-3",icon:"mdi mdi-headphones-off"}}},mounted(){vs.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;console.log(t.data),this.$store.dispatch("sale/setSales",e),this.$store.dispatch("sale/setFetched",!0),this.isLoaded=!0}})).catch(this.$handleApiError)}};const ha=(0,d.Z)(ma,[["render",ia]]);var ga=ha;const fa={class:"tw-grid tw-mb-5 tw-grid-cols-4 md:tw-grid-cols-4 lg:tw-grid-cols-4 tw-gap-2 py-5"},va={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},ya={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},_a={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},xa={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},ba={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},ka={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"};function Ca(t,e,s,i,r,l){const o=(0,a.up)("DashItemTwo");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",fa,[(0,a._)("div",va,[(0,a.Wm)(o,{dash:l.totalSales},null,8,["dash"])]),(0,a._)("div",ya,[(0,a.Wm)(o,{dash:l.confirmedSales},null,8,["dash"])]),(0,a._)("div",_a,[(0,a.Wm)(o,{dash:l.newSales},null,8,["dash"])]),(0,a._)("div",xa,[(0,a.Wm)(o,{dash:l.reportedSales},null,8,["dash"])]),(0,a._)("div",ba,[(0,a.Wm)(o,{dash:l.noanswerSales},null,8,["dash"])]),(0,a._)("div",ka,[(0,a.Wm)(o,{dash:l.canceledSales},null,8,["dash"])])])])}var Da={components:{DashItemTwo:pa},props:["filteredSales"],data(){return{isLoaded:!1}},computed:{user(){return this.$store.getters["user/user"]},isAdmin(){return"admin"==this.user.role},sales(){return this.filteredSales},totalSales(){return{id:1,title:"Total",pourcentage:100,value:this.sales.length,color:"deep-purple-accent-2",icon:"mdi mdi-all-inclusive"}},newSales(){return{id:2,title:"New",value:this.sales.filter((t=>!t.confirmation)).length,pourcentage:(100*this.sales.filter((t=>!t.confirmation)).length/this.sales.length).toFixed(2),color:"grey",icon:"mdi mdi-new-box"}},toProcess(){return{id:3,title:"Process",value:this.sales.filter((t=>!!t.confirmation&&!["confirmer","livrer","expidier"].includes(t.confirmation))).length,pourcentage:(100*this.sales.filter((t=>!!t.confirmation&&!["confirmer","livrer","expidier"].includes(t.confirmation))).length/this.sales.length).toFixed(2),color:"primary-orange",icon:"mdi-reload"}},confirmedSales(){return{id:4,title:"Confirmed",value:this.sales.filter((t=>"confirmer"==t.confirmation)).length,pourcentage:(100*this.sales.filter((t=>"confirmer"==t.confirmation)).length/this.sales.length).toFixed(2),color:"primary-green",icon:"mdi-phone-check"}},reportedSales(){return{id:5,title:"Reported",value:this.sales.filter((t=>"reporter"==t.confirmation)).length,pourcentage:(100*this.sales.filter((t=>"reporter"==t.confirmation)).length/this.sales.length).toFixed(2),color:"primary-blue",icon:"mdi mdi-clock-outline"}},canceledSales(){return{id:6,title:"Canceled",value:this.sales.filter((t=>"annuler"==t.confirmation)).length,pourcentage:(100*this.sales.filter((t=>"annuler"==t.confirmation)).length/this.sales.length).toFixed(2),color:"red-accent-3",icon:"mdi mdi-cancel"}},noanswerSales(){return{id:6,title:"No Answer",value:this.sales.filter((t=>["day-one-call-one","day-one-call-two","day-one-call-three","day-two-call-one","day-two-call-two","day-two-call-three","day-three-call-one","day-three-call-two","day-three-call-three"].includes(t.confirmation))).length,pourcentage:(100*this.sales.filter((t=>["day-one-call-one","day-one-call-two","day-one-call-three","day-two-call-one","day-two-call-two","day-two-call-three","day-three-call-one","day-three-call-two","day-three-call-three"].includes(t.confirmation))).length/this.sales.length).toFixed(2),color:"yellow-darken-3",icon:"mdi mdi-headphones-off"}}},mounted(){vs.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;console.log(t.data),this.$store.dispatch("sale/setSales",e),this.$store.dispatch("sale/setFetched",!0),this.isLoaded=!0}})).catch(this.$handleApiError)}};const Sa=(0,d.Z)(Da,[["render",Ca]]);var za=Sa,Ua={components:{DeliveryTab:ga,ConfirmationTab:za},props:["filteredSales"],data(){return{tab:1,tabs:[{id:1,name:"Confirmation",component:"ConfirmationTab"},{id:2,name:"Delivery",component:"DeliveryTab"}]}}};const La=(0,d.Z)(Ua,[["render",Qi]]);var Aa=La;const Pa={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4 py-5"},Wa={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},Ea={class:"tw-relative"},$a={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},Ta=(0,a._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Agents",-1),Oa={class:"tw-relative"},Va=(0,a._)("option",{value:"all"},"Select",-1),Ra=["value"],qa={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},Fa=(0,a._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Deliveries",-1),Ia={class:"tw-relative"},Na=(0,a._)("option",{value:"all"},"Select",-1),ja=["value"],Ma={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},Ha=(0,a._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Cities",-1),Ya={class:"tw-relative"},Ka=(0,a._)("option",{value:"all"},"Select",-1),Za=["value"],Qa={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},Ga=(0,a._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Products",-1),Ba={class:"tw-relative"},Ja=(0,a._)("option",{value:"all"},"Select",-1),Xa=["value"],tr={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},er=(0,a._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Shops",-1),sr={class:"tw-relative"},ir=(0,a._)("select",{class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[(0,a._)("option",{value:"all"},"Select")],-1),ar={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},rr=(0,a._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Sources",-1),lr={class:"tw-relative"},or=(0,a._)("select",{class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[(0,a._)("option",{value:"all"},"Select")],-1),nr={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},dr=(0,a._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Upsell",-1),cr={class:"tw-relative"},wr=(0,a._)("option",{value:"all"},"Select",-1),ur=(0,a._)("option",{value:"oui"},"Oui",-1),pr=(0,a._)("option",{value:"non"},"Non",-1),mr=[wr,ur,pr];function hr(t,e,s,r,l,o){const n=(0,a.up)("DateFilter");return(0,a.wg)(),(0,a.iD)("div",Pa,[(0,a._)("div",Wa,[(0,a._)("div",Ea,[(0,a.Wm)(n,{filter:l.dateFilter,"onUpdate:filter":e[0]||(e[0]=t=>l.dateFilter=t)},null,8,["filter"])])]),(0,a._)("div",$a,[Ta,(0,a._)("div",Oa,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.agentFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[Va,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.agents,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),9,Ra)))),128))],512),[[i.bM,l.agentFilter]]),(0,a.Wm)(J.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-chevron-down")])),_:1})])]),(0,a._)("div",qa,[Fa,(0,a._)("div",Ia,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.deliveryFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[Na,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.deliveries,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),9,ja)))),128))],512),[[i.bM,l.deliveryFilter]]),(0,a.Wm)(J.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-chevron-down")])),_:1})])]),(0,a._)("div",Ma,[Ha,(0,a._)("div",Ya,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[3]||(e[3]=t=>l.cityFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[Ka,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.cities,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t.name,key:t.id},(0,Q.zw)(t.name),9,Za)))),128))],512),[[i.bM,l.cityFilter]]),(0,a.Wm)(J.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-chevron-down")])),_:1})])]),(0,a._)("div",Qa,[Ga,(0,a._)("div",Ba,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>l.productFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[Ja,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.products,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,Xa)))),128))],512),[[i.bM,l.productFilter]]),(0,a.Wm)(J.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-chevron-down")])),_:1})])]),(0,a._)("div",tr,[er,(0,a._)("div",sr,[ir,(0,a.Wm)(J.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-chevron-down")])),_:1})])]),(0,a._)("div",ar,[rr,(0,a._)("div",lr,[or,(0,a.Wm)(J.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-chevron-down")])),_:1})])]),(0,a._)("div",nr,[dr,(0,a._)("div",cr,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>l.upsellFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},mr,512),[[i.bM,l.upsellFilter]]),(0,a.Wm)(J.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-chevron-down")])),_:1})])]),(0,a.kq)("",!0),(0,a.kq)("",!0),(0,a.kq)("",!0)])}const gr=(0,a._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Date",-1),fr=["onClick"];function vr(t,e,s,i,r,l){const o=(0,a.up)("VueDatePicker");return(0,a.wg)(),(0,a.iD)("div",null,[gr,(0,a.Wm)(o,{modelValue:r.date,"onUpdate:modelValue":[e[0]||(e[0]=t=>r.date=t),l.onDateRangePicked],onCleared:l.cleared,format:r.dateFilterFormat,range:"","preset-ranges":r.presetRanges},{yearly:(0,a.w5)((({label:t,range:e,presetDateRange:s})=>[(0,a._)("span",{onClick:t=>s(e)},(0,Q.zw)(t),9,fr)])),_:1},8,["modelValue","onCleared","onUpdate:modelValue","format","preset-ranges"])])}var yr=s(1271),_r=s(2292),xr=s(1745),br=s(4253),kr=s(4819),Cr=s(2143),Dr={data(){return{date:["",""],dateFilterFormat:"yyyy-MM-dd",formattedStartDate:"",formattedEndDate:"",presetRanges:[{label:"Today",range:[new Date,new Date]},{label:"Yesterday",range:[(0,yr.Z)(new Date,1),(0,yr.Z)(new Date,1)]},{label:"This month",range:[(0,_r.Z)(new Date),(0,xr.Z)(new Date)]},{label:"Last month",range:[(0,_r.Z)((0,br.Z)(new Date,1)),(0,xr.Z)((0,br.Z)(new Date,1))]},{label:"This year",range:[(0,kr.Z)(new Date),(0,Cr.Z)(new Date)]}]}},watch:{date(){this.$emit("update:filter",[this.formattedStartDate,this.formattedEndDate])}},methods:{onDateRangePicked(t){t?(this.formattedStartDate=t[0],this.formattedEndDate=t[1]):(this.formattedStartDate=null,this.formattedEndDate=null)},cleared(){this.date=["",""]}}};const Sr=(0,d.Z)(Dr,[["render",vr]]);var zr=Sr,Ur={components:{DateFilter:zr},props:["filters"],data(){return{deliveryFilter:"all",agentFilter:"all",productFilter:"all",cityFilter:"all",upsellFilter:"all",dateFilter:["",""],isLoaded:!1,dashItems:[{id:1,title:"Total Chiffres d'affaire",value:1200,icon:"mdi-currency-usd",color:"green"},{id:2,title:"Chiffres d'affaire versé",value:"35000 DH",icon:"mdi mdi-credit-card-check-outline",color:"orange"},{id:3,title:"Chiffres d'affaire non versé",value:600,icon:"mdi mdi-credit-card-remove-outline",color:"red"},{id:4,title:"Chiffres d'affaire en caisse",value:543,icon:"mdi mdi-bank",color:"pink"}],filledDashItems:[{id:1,title:"Customers",value:2300,color:"primary-orange",icon:"mdi-account-outline"},{id:2,title:"Suppliers",value:300,color:"primary-blue",icon:"mdi-account-check-outline"},{id:3,title:"Purchase Invoice",value:1100,color:"primary-indigo",icon:"mdi-file-document-outline"},{id:4,title:"Agents",value:10,color:"primary-green",icon:"mdi-moped-outline"}]}},watch:{agentFilter(t){this.$emit("update:filters",{...this.filters,agentFilter:t})},deliveryFilter(t){this.$emit("update:filters",{...this.filters,deliveryFilter:t})},productFilter(t){this.$emit("update:filters",{...this.filters,productFilter:t})},cityFilter(t){this.$emit("update:filters",{...this.filters,cityFilter:t})},upsellFilter(t){this.$emit("update:filters",{...this.filters,upsellFilter:t})},dateFilter:{deep:!0,handler(t){this.$emit("update:filters",{...this.filters,dateFilter:t})}}},computed:{agents(){return this.$store.getters["user/agents"]},deliveries(){return this.$store.getters["user/deliveries"]},products(){return this.$store.getters["product/products"]},cities(){return this.$store.getters["city/cities"]}},mounted(){K.deliveries().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data;console.log(t.data),this.$store.dispatch("user/setDeliveries",e),this.isLoaded=!0}})).catch(this.$handleApiError),ti.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.products;console.log(t.data),this.$store.dispatch("product/setProducts",e),this.isLoaded=!0}})).catch(this.$handleApiError),K.cities().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data;console.log(t.data),this.$store.dispatch("city/setCities",e),this.isLoaded=!0}})).catch(this.$handleApiError),K.agents().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data;console.log(t.data),this.$store.dispatch("user/setAgents",e),this.isLoaded=!0}})).catch(this.$handleApiError)}};const Lr=(0,d.Z)(Ur,[["render",hr]]);var Ar=Lr,Pr={components:{DashItem:bi,UsersTable:ji,TabSwitcher:Aa,FilterTabs:Ar},data(){return{isLoaded:!1,filters:{deliveryFilter:"all",agentFilter:"all",productFilter:"all",cityFilter:"all",upsellFilter:"all",dateFilter:["",""]}}},computed:{user(){return this.$store.getters["user/user"]},isAdmin(){return"admin"==this.user.role},sales(){return this.$store.getters["sale/sales"]},filteredSales(){const t=this.filters.agentFilter,e=this.filters.deliveryFilter,s=this.filters.productFilter,i=this.filters.cityFilter,a=this.filters.upsellFilter,r=this.filters.dateFilter[0],l=this.filters.dateFilter[1];return this.sales.filter((o=>{if("all"!==t&&parseInt(o.agente_id)!=parseInt(t))return!1;if("all"!==e&&parseInt(o.affectation)!=parseInt(e))return!1;if("all"!==a&&o.upsell!=a)return!1;if("all"!==s&&!o.items.some((t=>parseInt(t.product_id)==parseInt(s))))return!1;if("all"!==i&&o.city?.toLocaleLowerCase()!=i?.toLocaleLowerCase())return!1;const n=new Date(o.created_at),d=n.getDate(),c=n.getMonth(),w=n.getFullYear();if(r){const t=r.getDate(),e=r.getMonth(),s=r.getFullYear();if(w<s||w===s&&c<e||w===s&&c===e&&d<t)return!1}if(l){const t=l.getDate(),e=l.getMonth(),s=l.getFullYear();if(w>s||w===s&&c>e||w===s&&c===e&&d>t)return!1}return!0}))},dashChiffreAffaires(){return{id:1,title:"Total Chiffres d'affaire",value:this.getChiffresDaffaire().toFixed(2),icon:"mdi-currency-usd",color:"green"}},dashChiffreAffairesVerse(){return{id:2,title:"Chiffres d'affaire versé",value:this.getChiffresDaffaireVerse().toFixed(2),icon:"mdi mdi-credit-card-check-outline",color:"orange"}},dashChiffreAffairesNonVerse(){return{id:3,title:"Chiffres d'affaire non versé",value:this.getChiffresDaffaireNonVerse().toFixed(2),icon:"mdi mdi-credit-card-remove-outline",color:"red"}},dashChiffreAffairesEnCaisse(){return{id:4,title:"Chiffres d'affaire en caisse",value:this.getChiffresDaffaireEnCaise().toFixed(2),icon:"mdi mdi-bank",color:"yellow"}},newSales(){return{id:1,title:"New",value:this.sales.filter((t=>!t.confirmation)).length,color:"primary-green",icon:"mdi mdi-new-box"}},toProcess(){return{id:2,title:"Process",value:this.sales.filter((t=>!!t.confirmation&&!["confirmer","livre","expidier"].includes(t.confirmation))).length,color:"primary-orange",icon:"mdi-reload"}},confirmedSales(){return{id:3,title:"Confirmed",value:this.sales.filter((t=>"confirmer"==t.confirmation)).length,color:"deep-purple-accent-2",icon:"mdi-phone-check"}},deliveredSales(){return{id:4,title:"Delivered",value:this.sales.filter((t=>"livre"==t.confirmation)).length,color:"primary-blue",icon:"mdi-account-check-outline"}},shippedSales(){return{id:5,title:"Shipped",value:this.sales.filter((t=>"expidier"==t.confirmation)).length,color:"red",icon:"mdi-truck"}}},methods:{getSales(){vs.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;console.log(t.data),this.$store.dispatch("sale/setSales",e),this.$store.dispatch("sale/setFetched",!0),this.isLoaded=!0}})).catch(this.$handleApiError)},getChiffresDaffaire(){let t=0;return this.filteredSales.forEach((e=>{t+=e.price})),t},getChiffresDaffaireVerse(){let t=0;return this.filteredSales.forEach((e=>{null!=e.factorisations&&e.factorisations.paid&&(t+=e.price)})),t},getChiffresDaffaireNonVerse(){let t=0;return this.filteredSales.forEach((e=>{null==e.factorisations||e.factorisations.paid||(t+=e.price)})),t},getChiffresDaffaireEnCaise(){return this.getChiffresDaffaire()-this.getChiffresDaffaireVerse()}},mounted(){this.getSales()}};const Wr=(0,d.Z)(Pr,[["render",pi]]);var Er=Wr;const $r=(0,a._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,a._)("div",null,[(0,a._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Dashboard")])],-1),Tr={key:0},Or={key:1},Vr={class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},Rr={class:"tw-grid tw-mb-5 tw-grid-cols-4 md:tw-grid-cols-4 lg:tw-grid-cols-5 tw-gap-2"},qr={class:"lg:tw-col-span-1 md:tw-col-span-1 tw-col-span-4"},Fr={class:"lg:tw-col-span-1 md:tw-col-span-1 tw-col-span-4"},Ir={class:"lg:tw-col-span-1 md:tw-col-span-1 tw-col-span-4"},Nr={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},jr={class:"lg:tw-col-span-1 md:tw-col-span-4 tw-col-span-5"},Mr={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"};function Hr(t,e,s,i,r,l){const o=(0,a.up)("LoadingAnimation"),n=(0,a.up)("DashItemTwo");return(0,a.wg)(),(0,a.iD)("div",null,[$r,r.isLoaded?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",Tr,[(0,a.Wm)(o)])),r.isLoaded?((0,a.wg)(),(0,a.iD)("div",Or,[(0,a._)("div",Vr,[(0,a._)("div",Rr,[(0,a._)("div",qr,[(0,a.Wm)(n,{dash:l.earningsDash,symbol:"DH",numbers:!1},null,8,["dash"])]),(0,a._)("div",Fr,[(0,a.Wm)(n,{dash:l.totalSales},null,8,["dash"])]),(0,a._)("div",Ir,[(0,a.Wm)(n,{dash:l.deliveredSales},null,8,["dash"])]),(0,a._)("div",Nr,[(0,a.Wm)(n,{dash:l.reportedSales},null,8,["dash"])]),(0,a._)("div",jr,[(0,a.Wm)(n,{dash:l.shippedSales},null,8,["dash"])]),(0,a._)("div",Mr,[(0,a.Wm)(n,{dash:l.canceledSales},null,8,["dash"])])])])])):(0,a.kq)("",!0)])}var Yr={components:{DashItemTwo:pa},data(){return{isLoaded:!0,orders:[],cities:[]}},computed:{user(){return this.$store.getters["user/user"]},isAdmin(){return"admin"==this.user.role},sales(){return this.$store.getters["sale/sales"]},totalSales(){return{id:1,title:"Total Orders",value:this.orders.length,pourcentage:100,color:"deep-purple-accent-2",icon:"mdi mdi-all-inclusive"}},deliveredSales(){return{id:2,title:"Delivered",value:this.filterByStatus("livrer").length,pourcentage:100*this.filterByStatus("livrer").length/this.orders.length,color:"primary-green",icon:"mdi-account-check-outline"}},toProcess(){return{id:3,title:"Process",value:231,color:"primary-orange",icon:"mdi-reload"}},shippedSales(){return{id:4,title:"Shipped",value:this.filterByStatus("expidier").length,pourcentage:100*this.filterByStatus("expidier").length/this.orders.length,color:"primary-orange",icon:"mdi-truck"}},reportedSales(){return{id:5,title:"Reported",value:this.filterByStatus("reporter").length,pourcentage:100*this.filterByStatus("reporter").length/this.orders.length,color:"primary-blue",icon:"mdi mdi-clock-outline"}},canceledSales(){return{id:6,title:"Canceled",value:this.filterByStatus("annuler").length,pourcentage:100*this.filterByStatus("annuler").length/this.orders.length,color:"red-accent-3",icon:"mdi mdi-cancel"}},earningsDash(){return{id:2,title:"Earnings",pourcentage:this.earnings,color:"green-darken-4",icon:"mdi-currency-usd"}},earnings(){return this.orders.reduce(((t,e)=>null==e.factorisations||e.factorisations.paid||e.factorisations.close?t:t+e.factorisations.price),0)}},methods:{filterByStatus(t){return this.orders.filter((e=>e.delivery==t))},getOrders(){this.isLoaded=!1,Us.delivery().then((t=>{"SUCCESS"==t.data.code&&(this.orders=t.data.data.orders)})).finally((()=>{this.isLoaded=!0}))}},mounted(){this.getOrders()}};const Kr=(0,d.Z)(Yr,[["render",Hr]]);var Zr=Kr;const Qr=(0,a._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,a._)("div",null,[(0,a._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Dashboard ")])],-1),Gr={key:0},Br={key:1},Jr={class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},Xr={class:"tw-grid tw-mb-5 tw-grid-cols-4 md:tw-grid-cols-4 lg:tw-grid-cols-5 tw-gap-2"},tl={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},el={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},sl={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},il={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},al={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"};function rl(t,e,s,i,r,l){const o=(0,a.up)("LoadingAnimation"),n=(0,a.up)("DashItemTwo");return(0,a.wg)(),(0,a.iD)("div",null,[Qr,r.isLoaded?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",Gr,[(0,a.Wm)(o)])),r.isLoaded?((0,a.wg)(),(0,a.iD)("div",Br,[(0,a._)("div",Jr,[(0,a._)("div",Xr,[(0,a._)("div",tl,[(0,a.Wm)(n,{dash:l.totalSales},null,8,["dash"])]),(0,a._)("div",el,[(0,a.Wm)(n,{dash:l.confirmedSales},null,8,["dash"])]),(0,a._)("div",sl,[(0,a.Wm)(n,{dash:l.reportedSales},null,8,["dash"])]),(0,a._)("div",il,[(0,a.Wm)(n,{dash:l.noanswerSales},null,8,["dash"])]),(0,a._)("div",al,[(0,a.Wm)(n,{dash:l.canceledSales},null,8,["dash"])])])])])):(0,a.kq)("",!0)])}var ll={components:{DashItemTwo:pa},data(){return{isLoaded:!0,orders:[]}},computed:{user(){return this.$store.getters["user/user"]},isAdmin(){return"admin"==this.user.role},totalSales(){return{id:1,title:"Total",pourcentage:0===this.orders.length?0:100,value:this.orders.length,color:"deep-purple-accent-2",icon:"mdi mdi-all-inclusive"}},newSales(){return{id:2,title:"New",value:this.orders.filter((t=>!t.confirmation)).length,pourcentage:(100*this.orders.filter((t=>!t.confirmation)).length/this.orders.length).toFixed(2),color:"grey",icon:"mdi mdi-new-box"}},confirmedSales(){return{id:4,title:"Confirmed",value:this.orders.filter((t=>"confirmer"==t.confirmation)).length,pourcentage:(100*this.orders.filter((t=>"confirmer"==t.confirmation)).length/this.orders.length).toFixed(2),color:"primary-green",icon:"mdi-phone-check"}},reportedSales(){return{id:5,title:"Reported",value:this.orders.filter((t=>"reporter"==t.confirmation)).length,pourcentage:(100*this.orders.filter((t=>"reporter"==t.confirmation)).length/this.orders.length).toFixed(2),color:"primary-blue",icon:"mdi mdi-clock-outline"}},canceledSales(){return{id:6,title:"Canceled",value:this.orders.filter((t=>"annuler"==t.confirmation)).length,pourcentage:(100*this.orders.filter((t=>"annuler"==t.confirmation)).length/this.orders.length).toFixed(2),color:"red-accent-3",icon:"mdi mdi-cancel"}},noanswerSales(){return{id:6,title:"No Answer",value:this.orders.filter((t=>["day-one-call-one","day-one-call-two","day-one-call-three","day-two-call-one","day-two-call-two","day-two-call-three","day-three-call-one","day-three-call-two","day-three-call-three"].includes(t.confirmation))).length,pourcentage:(100*this.orders.filter((t=>["day-one-call-one","day-one-call-two","day-one-call-three","day-two-call-one","day-two-call-two","day-two-call-three","day-three-call-one","day-three-call-two","day-three-call-three"].includes(t.confirmation))).length/this.orders.length).toFixed(2),color:"yellow-darken-3",icon:"mdi mdi-headphones-off"}}},methods:{filterByStatus(t){return this.orders.filter((e=>e.confirmation==t))},getOrders(){this.isLoaded=!1,Us.agente().then((t=>{"SUCCESS"==t.data.code&&(this.orders=t.data.data.orders)})).finally((()=>{this.isLoaded=!0}))}},mounted(){this.getOrders()}};const ol=(0,d.Z)(ll,[["render",rl]]);var nl=ol;const dl=(0,a._)("div",{class:"tw-w-full tw-rounded-lg tw-py-5 tw-px-5 tw-flex tw-flex-center tw-justify-center"},[(0,a._)("h1",{class:"tw-text-lg"},"Welcome to Dashboard !")],-1),cl=[dl];function wl(t,e,s,i,r,l){return(0,a.wg)(),(0,a.iD)("div",null,cl)}var ul={components:{},data(){return{dashItems:[{id:1,title:"Orders",value:1200,icon:"mdi-package-variant-closed",color:"orange"},{id:2,title:"Total Sales",value:"35000 DH",icon:"mdi-currency-usd",color:"green"},{id:3,title:"Orders Confirmed",value:600,icon:"mdi-phone-check-outline",color:"blue"},{id:4,title:"Orders Delivered",value:543,icon:"mdi-truck-check-outline",color:"pink"}],filledDashItems:[{id:1,title:"Customers",value:2300,color:"primary-orange",icon:"mdi-account-outline"},{id:2,title:"Suppliers",value:300,color:"primary-blue",icon:"mdi-account-check-outline"},{id:3,title:"Purchase Invoice",value:1100,color:"primary-indigo",icon:"mdi-file-document-outline"},{id:4,title:"Agents",value:10,color:"primary-green",icon:"mdi-moped-outline"}]}},computed:{user(){return this.$store.getters["user/user"]},isAdmin(){return"admin"==this.user.role}}};const pl=(0,d.Z)(ul,[["render",wl]]);var ml=pl,hl={components:{admin:Er,delivery:Zr,agente:nl,default:ml},data(){return{localUrl:q}},computed:{user(){return this.$store.getters["user/user"]},dashboard(){return["admin","delivery","agente"].includes(this.user.role)?this.user.role:"default"}},mounted(){console.log(this.user)}};const gl=(0,d.Z)(hl,[["render",ai]]);var fl=gl,vl=s(3104);const yl=(0,a._)("div",{class:"mb-5"},[(0,a._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Settings ")],-1),_l={key:0},xl={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},bl={class:"tw-w-full"},kl=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," First Name ",-1),Cl={class:"tw-w-full"},Dl=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Last Name",-1),Sl={class:"tw-w-full"},zl=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Email",-1),Ul={class:"tw-w-full"},Ll=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Phone Number ",-1),Al={class:"tw-w-full tw-flex tw-gap-10 tw-items-center"},Pl=(0,a._)("span",null,"Update Password: ",-1),Wl={class:"tw-w-full"},El=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Password",-1),$l={class:"tw-w-full"},Tl=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Confirm Password ",-1),Ol={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},Vl=(0,a._)("span",{class:"text-white text-capitalize"},"Cancel",-1),Rl=(0,a._)("span",{class:"text-white text-capitalize"},"Update",-1);function ql(t,e,s,i,r,l){const o=(0,a.up)("LoadingAnimation");return(0,a.wg)(),(0,a.iD)("div",null,[yl,l.isFormReady?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",_l,[(0,a.Wm)(o)])),l.isFormReady?((0,a.wg)(),(0,a.iD)("div",xl,[(0,a._)("div",null,[(0,a.Wm)(ri.o,null,{default:(0,a.w5)((()=>[(0,a.Wm)(li.D,{cols:"12",md:"12"},{default:(0,a.w5)((()=>[(0,a.Wm)(ri.o,null,{default:(0,a.w5)((()=>[(0,a.Wm)(li.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,a.w5)((()=>[(0,a._)("div",bl,[kl,(0,a.Wm)(X.hw,{"error-messages":r.formStatus.firstname.message,modelValue:r.firstname,"onUpdate:modelValue":e[0]||(e[0]=t=>r.firstname=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,a.Wm)(li.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,a.w5)((()=>[(0,a._)("div",Cl,[Dl,(0,a.Wm)(X.hw,{"error-messages":r.formStatus.lastname.message,modelValue:r.lastname,"onUpdate:modelValue":e[1]||(e[1]=t=>r.lastname=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,a.Wm)(li.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,a.w5)((()=>[(0,a._)("div",Sl,[zl,(0,a.Wm)(X.hw,{"error-messages":r.formStatus.email.message,modelValue:r.email,"onUpdate:modelValue":e[2]||(e[2]=t=>r.email=t),readonly:"",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,a.Wm)(li.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,a.w5)((()=>[(0,a._)("div",Ul,[Ll,(0,a.Wm)(X.hw,{"error-messages":r.formStatus.phone.message,modelValue:r.phone,"onUpdate:modelValue":e[3]||(e[3]=t=>r.phone=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,a.Wm)(li.D,{class:"!tw-py-0",cols:"12"},{default:(0,a.w5)((()=>[(0,a._)("div",Al,[Pl,(0,a.Wm)(vl.G,{modelValue:r.updatePassword,"onUpdate:modelValue":e[4]||(e[4]=t=>r.updatePassword=t),color:"primary-color","hide-details":!0},null,8,["modelValue"])])])),_:1}),r.updatePassword?((0,a.wg)(),(0,a.j4)(li.D,{key:0,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,a.w5)((()=>[(0,a._)("div",Wl,[El,(0,a.Wm)(X.hw,{"error-messages":r.formStatus.password.message,modelValue:r.password,"onUpdate:modelValue":e[5]||(e[5]=t=>r.password=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1})):(0,a.kq)("",!0),r.updatePassword?((0,a.wg)(),(0,a.j4)(li.D,{key:1,class:"!tw-py-2 tw-pt-0",cols:"12",md:"6"},{default:(0,a.w5)((()=>[(0,a._)("div",$l,[Tl,(0,a.Wm)(X.hw,{"error-messages":r.formStatus.confirmPassword.message,modelValue:r.confirmPassword,"onUpdate:modelValue":e[6]||(e[6]=t=>r.confirmPassword=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1})):(0,a.kq)("",!0)])),_:1})])),_:1})])),_:1})]),(0,a._)("div",Ol,[(0,a.Wm)(G.T,{link:"",to:{name:"user/list"},color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,a.w5)((()=>[Vl])),_:1}),t.$can("update_account")?((0,a.wg)(),(0,a.j4)(G.T,{key:0,onClick:l.update,loading:r.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,a.w5)((()=>[Rl])),_:1},8,["onClick","loading"])):(0,a.kq)("",!0)])])):(0,a.kq)("",!0)])}var Fl={data(){return{serverUrl:F,isFetched:!1,isUserFetched:!1,isLoading:!1,updatePassword:!1,formStatus:{firstname:{valid:!0,message:""},lastname:{valid:!0,message:""},phone:{valid:!0,message:""},email:{valid:!0,message:""},password:{valid:!0,message:""},confirmPassword:{valid:!0,message:""}},id:null,firstname:"",lastname:"",phone:"",email:"",password:"",confirmPassword:""}},computed:{isFormReady(){return this.isFetched},user(){return{id:this.id,firstname:this.firstname,lastname:this.lastname,phone:this.phone,password:this.password}}},methods:{update(){if(!this.validate())return!1;this.isLoading=!0,K.updateProfile(this.user,this.updatePassword).then((t=>{"USER_UPDATED"==t.data.code&&this.$alert({type:"success",title:t.data.message})})).catch((t=>{this.$handleApiError(t);const e=t?.response?.data;switch(console.log(t),e?.code){case"VALIDATION_ERROR":for(let t in e.error)this.formStatus[t]={valid:!1,message:e.error[t][0]};break}return t})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1}))},validate(){this.formStatus["firstname"]=xt(this.firstname),this.formStatus["lastname"]=xt(this.lastname),this.formStatus["phone"]=xt(this.phone),this.formStatus["password"]=_t(this.password),this.formStatus["confirmPassword"]=kt(this.password,this.confirmPassword);const t=this.formStatus["firstname"].valid,e=this.formStatus["lastname"].valid,s=this.formStatus["phone"].valid;if(this.updatePassword){const i=this.formStatus["password"].valid,a=this.formStatus["confirmPassword"].valid;return t&&e&&i&&a&&s}return t&&e&&s},async getUser(){return K.profile().then((t=>{if("USER_SUCCESS"==t?.data.code){const e=t.data.data.user;this.id=e.id,this.firstname=e.firstname,this.lastname=e.lastname,this.email=e.email,this.phone=e.phone,this.isUserFetched=!0}})).catch(this.$handleApiError)}},async mounted(){Promise.allSettled([this.getUser()]).then((()=>this.isFetched=!0),(t=>this.$handleApiError(t)))}};const Il=(0,d.Z)(Fl,[["render",ql]]);var Nl=Il;const jl=(0,a._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,a._)("div",null,[(0,a._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Notifications")])],-1),Ml={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},Hl={class:"!tw-capitalize"};function Yl(t,e,s,i,r,l){(0,a.up)("LoadingAnimation");return(0,a.wg)(),(0,a.iD)("div",null,[jl,(0,a.kq)("",!0),((0,a.wg)(),(0,a.iD)("div",Ml,[(0,a.Wm)(Mi._,{flat:""},{default:(0,a.w5)((()=>[(0,a.Wm)(Hi.d,{modelValue:r.tab,"onUpdate:modelValue":e[0]||(e[0]=t=>r.tab=t),color:"primary-color","align-tabs":"start",density:"compact"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.tabs,(t=>((0,a.wg)(),(0,a.j4)(Yi.L,{class:"!tw-capitalize !tw-text-neutral-600",key:t.id,value:t.id},{default:(0,a.w5)((()=>[(0,a._)("span",Hl,(0,Q.zw)(t.name),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"]),(0,a.Wm)(Ki.Oo,{class:"tw-mt-5",modelValue:r.tab,"onUpdate:modelValue":e[1]||(e[1]=t=>r.tab=t)},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.tabs,(t=>((0,a.wg)(),(0,a.j4)(Zi.H,{key:t.id,value:t.id},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(t.component)))])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])),_:1})]))])}const Kl={key:0};function Zl(t,e,s,i,r,l){const o=(0,a.up)("SalesTable");return l.fetched?((0,a.wg)(),(0,a.iD)("div",Kl,[((0,a.wg)(),(0,a.j4)(o,{key:l.sales.length,columns:r.columns,sales:l.sales},null,8,["columns","sales"]))])):(0,a.kq)("",!0)}const Ql={class:"tw-grid tw-grid-cols-12 tw-mb-5"},Gl={class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-items-center"},Bl=(0,a._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"}," Show per page: ",-1),Jl=["value"],Xl={class:"tw-relative tw-pb-5 tw-overflow-x-auto tw-min-h-[400px] tw-overflow-y-visible sm:tw-rounded-lg"},to={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},eo={scope:"col",class:"tw-p-4"},so={class:"tw-flex tw-items-center"},io=(0,a._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox",-1),ao={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},ro={class:"tw-w-4 tw-p-4 tw-relative"},lo={class:"tw-flex tw-items-center"},oo=["onChange","checked"],no=(0,a._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox",-1),co={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},wo={class:"tw-px-6 tw-py-4 tw-relative"},uo={key:0},po={class:"tw-px-6 tw-py-4"},mo={class:"!tw-max-w-[300px] !tw-min-w-[300px] tw-whitespace-normal"},ho={class:"tw-px-6 tw-py-4 tw-relative"},go={class:"tw-pb-2"},fo={class:"tw-text-orange-500 tw-font-bold tw-pr-1 tw-text-xs"},vo={key:0},yo={key:1},_o={class:"tw-absolute tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-text-xs"},xo={key:0,class:"tw-bg-emerald-500/10 tw-text-emerald-500 tw-px-2 tw-rounded-t"},bo={key:1,class:"tw-bg-blue-500/10 tw-text-blue-500 tw-px-2 tw-rounded-t"},ko={class:"tw-px-6 tw-py-4"},Co={class:"tw-px-6 tw-py-4 tw-relative"},Do={class:"tw-flex tw-items-center tw-justify-center"},So={class:"tw-flex tw-gap-1"},zo={key:0},Uo={class:"tw-px-6 tw-py-4"},Lo={class:"tw-px-6 tw-py-4 tw-relative"},Ao={class:"tw-flex tw-items-center tw-justify-center"},Po={class:"tw-flex tw-gap-1"},Wo={key:0},Eo={class:"tw-px-6 tw-py-4"},$o={class:"tw-px-6 tw-py-4"},To={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},Oo={class:"tw-col-span-12 md:tw-col-span-12 d-flex tw-justify-end tw-flex-wrap align-center"},Vo={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},Ro={class:"tw-flex tw-flex-wrap tw-gap-2"},qo={class:"tw-text-white"};function Fo(t,e,s,r,l,o){const n=(0,a.up)("SaleConfirmation"),d=(0,a.up)("SaleAffectation"),c=(0,a.up)("SaleDelivery"),w=(0,a.up)("SaleActions");return(0,a.wg)(),(0,a.iD)("div",{key:o.items.length},[(0,a._)("div",Ql,[(0,a._)("div",Gl,[Bl,(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.allowedLimit,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t,key:t},(0,Q.zw)(t),9,Jl)))),128))],512),[[i.bM,l.paginationLimit]])])]),(0,a._)("div",Xl,[((0,a.wg)(),(0,a.iD)("table",{key:o.reportedForToday.length,class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},[(0,a._)("thead",to,[(0,a._)("tr",null,[(0,a._)("th",eo,[(0,a._)("div",so,[(0,a.wy)((0,a._)("input",{onClick:e[1]||(e[1]=(...t)=>o.handleSelectAll&&o.handleSelectAll(...t)),"onUpdate:modelValue":e[2]||(e[2]=t=>l.isAllSelected=t),id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"},null,512),[[i.e8,l.isAllSelected]]),io])]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.columns,(t=>((0,a.wg)(),(0,a.iD)("th",{key:t,class:(0,Q.C_)([["city"==t&&"!tw-max-w-[150px]"],"tw-px-6 tw-py-3 text-truncate"]),scope:"col"},[(0,a._)("div",ao,(0,Q.zw)(t),1)],2)))),128))])]),(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.items,(t=>((0,a.wg)(),(0,a.iD)("tr",{key:t.id,class:(0,Q.C_)([[[t.confirmation,t.delivery].includes("reporter")&&"tw-relative",o.isReportedToday(t)&&"!tw-border tw-border-red-400"],"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"])},[(0,a._)("td",ro,[(0,a._)("div",lo,[(0,a._)("input",{onChange:e=>o.handleSelect(e,t.id),checked:o.isSelected(t.id),id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"},null,40,oo),no])]),(0,a._)("th",co,(0,Q.zw)(t.id),1),(0,a._)("td",wo,[(0,a.Uk)((0,Q.zw)(t?.created_at?.split("T")[0])+" ",1),"reporter"==t.confirmation||"reporter"==t.delivery?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,Q.C_)([o.isReportedToday(t)&&"!tw-bg-red-400","tw-text-xs tw-text-white tw-px-1 tw-rounded-t tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-absolute tw-bg-gray-500"])},[o.isReportedToday(t)?((0,a.wg)(),(0,a.iD)("span",uo," Reported for today ")):(0,a.kq)("",!0)],2)):(0,a.kq)("",!0)]),(0,a._)("td",po,[(0,a._)("div",mo,(0,Q.zw)(t.city),1)]),(0,a._)("td",ho,[(0,a._)("div",go,[(0,a._)("ul",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.items,(t=>((0,a.wg)(),(0,a.iD)("li",{key:t.id,class:"tw-font-bold"},[(0,a.Uk)(" - "),(0,a._)("span",fo,(0,Q.zw)(t.quantity)+" X ",1),(0,a.Uk)((0,Q.zw)(t.product.name)+" ",1),t.product_variation.size?((0,a.wg)(),(0,a.iD)("span",vo,"| "+(0,Q.zw)(t.product_variation.size),1)):(0,a.kq)("",!0),t.product_variation.color?((0,a.wg)(),(0,a.iD)("span",yo,"| "+(0,Q.zw)(t.product_variation.color),1)):(0,a.kq)("",!0)])))),128))]),(0,a._)("div",_o,[t.counts_from_warehouse?((0,a.wg)(),(0,a.iD)("p",xo," warehouse ")):(0,a.kq)("",!0),t.counts_from_warehouse?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("p",bo," delivery "))])])]),(0,a._)("td",ko,(0,Q.zw)(t.fullname),1),(0,a._)("td",Co,[(0,a._)("div",Do,[((0,a.wg)(),(0,a.j4)(n,{class:(0,Q.C_)("reporter"==t.confirmation&&"tw-mb-1"),sale:t,id:t.id,confirmation:t.confirmation,key:t.confirmation},null,8,["class","sale","id","confirmation"])),"reporter"==t.confirmation?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,Q.C_)([o.isReportedToday(t)&&"!tw-bg-red-400","tw-text-xs tw-text-white tw-px-1 tw-rounded-t tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-absolute tw-bg-gray-500"])},[(0,a._)("span",So,["reporter"==t.confirmation?((0,a.wg)(),(0,a.iD)("span",zo,[(0,a.Wm)(J.t,{size:"x-small"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-autorenew")])),_:1}),(0,a._)("span",null,(0,Q.zw)(t?.reported_agente_date?.split("T")[0]),1)])):(0,a.kq)("",!0)])],2)):(0,a.kq)("",!0)])]),(0,a._)("td",Uo,["confirmer"==t.confirmation?((0,a.wg)(),(0,a.j4)(d,{sale:t,affectation:t.affectation,id:t.id,key:t.affectation},null,8,["sale","affectation","id"])):(0,a.kq)("",!0)]),(0,a._)("td",Lo,[(0,a._)("div",Ao,[((0,a.wg)(),(0,a.j4)(c,{class:(0,Q.C_)("reporter"==t.delivery&&"tw-mb-1"),sale:t,id:t.id,key:t.delivery,delivery:t.delivery},null,8,["class","sale","id","delivery"])),"reporter"==t.delivery?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,Q.C_)([o.isReportedToday(t)&&"!tw-bg-red-400","tw-text-xs tw-text-white tw-px-1 tw-rounded-t tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-absolute tw-bg-gray-500"])},[(0,a._)("span",Po,["reporter"==t.delivery?((0,a.wg)(),(0,a.iD)("span",Wo,[(0,a.Wm)(J.t,{size:"x-small"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-autorenew")])),_:1}),(0,a._)("span",null,(0,Q.zw)(t.reported_delivery_date),1)])):(0,a.kq)("",!0)])],2)):(0,a.kq)("",!0)])]),(0,a._)("td",Eo,(0,Q.zw)(o.getPrice(t)),1),(0,a._)("td",$o,[((0,a.wg)(),(0,a.j4)(w,{id:t.id,key:t.delivery,sale:t},null,8,["id","sale"]))])],2)))),128))])]))]),(0,a._)("div",To,[(0,a._)("div",Oo,[(0,a._)("div",Vo,(0,Q.zw)(o.prevRange+1)+" - "+(0,Q.zw)(l.currentPage==o.pageCount?s.sales.length:o.nextRange)+" of "+(0,Q.zw)(s.sales.length)+" items ",1),(0,a._)("div",Ro,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.pageCount,(t=>((0,a.wg)(),(0,a.j4)(G.T,{onClick:e=>l.currentPage=t,ripple:!1,variant:"flat",icon:"",rounded:"lg",color:t==l.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,a.w5)((()=>[(0,a._)("span",qo,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const Io={class:"tw-py-2 tw-space-y-1 tw-text-sm tw-text-gray-700 tw-max-h-[250px] tw-overflow-y-auto"},No=["onClick"],jo={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},Mo=(0,a._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter note",-1),Ho={class:"tw-flex tw-justify-end tw-mt-2"};function Yo(t,e,s,r,l,o){const n=(0,a.up)("popup-full"),d=(0,a.up)("SaleConfirmationReporting");return(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",{key:s.confirmation,class:"tw-relative tw-min-w-[100px]"},[(0,a._)("button",{onClick:e[0]||(e[0]=(...t)=>o.toggle&&o.toggle(...t)),class:(0,Q.C_)([[o.selected.text,o.selected.bg,o.selected.ring],"focus:tw-ring-4 tw-min-w-[100px] focus:tw-outline-none tw-font-medium tw-rounded-lg tw-text-sm tw-px-2 tw-py-1 tw-text-center tw-inline-flex tw-items-center tw-justify-between"]),type:"button"},[(0,a.Uk)((0,Q.zw)(o.selected.name)+" ",1),l.isLoading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(J.t,{key:0,class:"tw-ml-1"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Q.zw)(l.isOpen?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})),l.isLoading?((0,a.wg)(),(0,a.j4)(J.t,{key:1,class:"tw-animate-spin tw-ml-1"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-loading")])),_:1})):(0,a.kq)("",!0)],2),(0,a._)("div",{class:(0,Q.C_)([{"tw-hidden":!l.isOpen},"tw-z-[20] tw-bg-white tw-absolute tw-top-full tw-left-0 tw-divide-y tw-divide-gray-100 tw-rounded-lg tw-shadow tw-w-44"])},[(0,a._)("ul",Io,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.options,(t=>((0,a.wg)(),(0,a.iD)("li",{onClick:e=>o.handleChange(t),key:t.id},[(0,a._)("a",{class:(0,Q.C_)(["tw-block tw-px-4 tw-py-2 hover:tw-bg-gray-100",[t.text,t.bg]])},(0,Q.zw)(t.name),3)],8,No)))),128))])],2),(0,a.Wm)(n,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>l.showPopup=!1),visible:l.showPopup},{default:(0,a.w5)((()=>[(0,a._)("div",jo,[Mo,(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.note=t),cols:"30",rows:"3",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n        ",512),[[i.nr,l.note]]),(0,a._)("div",Ho,[(0,a.Wm)(G.T,{class:"tw-capitalize",loading:l.isLoading,variant:"flat",color:"green",onClick:o.handleClick},{default:(0,a.w5)((()=>[(0,a.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"]),(0,a.Wm)(d,{order:s.sale,visible:l.showPopupReporter,onCancel:e[3]||(e[3]=t=>l.showPopupReporter=!1)},null,8,["order","visible"])])),[[Zt.L,o.close]])}const Ko=[{id:0,value:null,name:"New",text:"tw-text-white",bg:"tw-bg-green-500",ring:"tw-ring-green-300"},{id:1,value:"day-one-call-one",name:"No reply 1 / day1",text:"tw-text-rose-500",bg:"tw-bg-rose-200/10",ring:"tw-ring-rose-200"},{id:2,value:"day-one-call-two",name:"No reply 2 / day1",text:"tw-text-rose-500",bg:"tw-bg-rose-400/10",ring:"tw-ring-rose-300"},{id:3,value:"day-one-call-three",name:"No reply 3 / day1",text:"tw-text-rose-500",bg:"tw-bg-rose-600/10",ring:"tw-ring-rose-400"},{id:4,value:"day-two-call-one",name:"No reply 1 / day2",text:"tw-text-indigo-500",bg:"tw-bg-indigo-200/10",ring:"tw-ring-indigo-200"},{id:5,value:"day-two-call-two",name:"No reply 2 / day2",text:"tw-text-indigo-500",bg:"tw-bg-indigo-400/10",ring:"tw-ring-indigo-300"},{id:6,value:"day-two-call-three",name:"No reply 3 / day2",text:"tw-text-indigo-500",bg:"tw-bg-indigo-600/10",ring:"tw-ring-indigo-400"},{id:7,value:"day-three-call-one",name:"No reply 1 / day3",text:"tw-text-blue-500",bg:"tw-bg-blue-200/10",ring:"tw-ring-blue-200"},{id:8,value:"day-three-call-two",name:"No reply 2 / day3",text:"tw-text-blue-500",bg:"tw-bg-blue-400/10",ring:"tw-ring-blue-300"},{id:9,value:"day-three-call-three",name:"No reply 3 / day3",text:"tw-text-blue-500",bg:"tw-bg-blue-600/10",ring:"tw-ring-blue-400"},{id:10,value:"reporter",name:"Reported",text:"tw-text-teal-500",bg:"tw-bg-teal-500/10",ring:"tw-ring-teal-300"},{id:11,value:"annuler",name:"Canceled",text:"tw-text-red-500",bg:"tw-bg-red-500/10",ring:"tw-ring-red-300"},{id:12,value:"wrong-number",name:"Wrong number",text:"tw-text-fuchsia-500",bg:"tw-bg-fuchsia-500/10",ring:"tw-ring-fuchsia-300"},{id:13,value:"confirmer",name:"Confirmed",text:"tw-text-green-500",bg:"tw-bg-green-500/10",ring:"tw-ring-green-300"},{id:14,value:"double",name:"Double",text:"tw-text-purple-500",bg:"tw-bg-purple-500/10",ring:"tw-ring-purple-300"}],Zo=[{id:0,value:null,name:"select",text:"tw-text-neutral-600",bg:"tw-bg-neutral-500/10",ring:"tw-ring-neutral-300"},{id:1,value:"oui",name:"Oui",text:"tw-text-green-500",bg:"tw-bg-green-500/10",ring:"tw-ring-green-300"},{id:2,value:"non",name:"Non",text:"tw-text-pink-500",bg:"tw-bg-pink-500/10",ring:"tw-ring-pink-300"}],Qo=[{id:0,value:null,name:"Select",text:"tw-text-gray-500",bg:"tw-bg-gray-500/10",ring:"tw-ring-gray-300"},{id:1,value:"dispatch",name:"Dispatched",text:"tw-text-yellow-500",bg:"tw-bg-yellow-500/10",ring:"tw-ring-yellow-300"},{id:2,value:"expidier",name:"Shipped",text:"tw-text-fuchsia-500",bg:"tw-bg-fuchsia-500/10",ring:"tw-ring-fuchsia-300"},{id:3,value:"livrer",name:"Delivered",text:"tw-text-green-500",bg:"tw-bg-green-500/10",ring:"tw-ring-green-300"},{id:4,value:"reporter",name:"Reported",text:"tw-text-orange-500",bg:"tw-bg-orange-500/10",ring:"tw-ring-orange-300"},{id:5,value:"refuser",name:"Refused",text:"tw-text-pink-500",bg:"tw-bg-pink-500/10",ring:"tw-ring-pink-300"},{id:6,value:"annuler",name:"Canceled",text:"tw-text-red-500",bg:"tw-bg-red-500/10",ring:"tw-ring-red-300"},{id:9,value:"pas-de-reponse",name:"No Answer",text:"tw-text-yellow-500",bg:"tw-bg-yellow-500/10",ring:"tw-ring-yellow-300"},{id:10,value:"retourner",name:"Retourned",text:"tw-text-purple-500",bg:"tw-bg-purple-500/10",ring:"tw-ring-purple-300"},{id:11,value:"reconfirmer",name:"Reconfirmed",text:"tw-text-indigo-500",bg:"tw-bg-indigo-500/10",ring:"tw-ring-indigo-300"},{id:12,value:"paid",name:"Paid",text:"tw-text-emerald-500",bg:"tw-bg-emerald-500/10",ring:"tw-ring-emerald-300"},{id:13,value:"transfer",name:"Transferd",text:"tw-text-violet-500",bg:"tw-bg-violet-500/10",ring:"tw-ring-violet-300"}],Go=[null,"expidier","paid","transfer","dispatch"],Bo={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},Jo=(0,a._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Reported Date",-1),Xo=(0,a._)("br",null,null,-1),tn=(0,a._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Note",-1),en={class:"tw-flex tw-justify-end tw-mt-2"};function sn(t,e,s,r,l,o){const n=(0,a.up)("VueDatePicker"),d=(0,a.up)("popup-full");return(0,a.wg)(),(0,a.iD)("div",{key:s.order.id},[(0,a.Wm)(d,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>o.cancel()),visible:s.visible},{default:(0,a.w5)((()=>[(0,a._)("div",Bo,[Jo,(0,a.Wm)(n,{modelValue:l.date,"onUpdate:modelValue":e[0]||(e[0]=t=>l.date=t),format:o.format},null,8,["modelValue","format"]),Xo,tn,(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.note=t),cols:"30",rows:"12",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n        ",512),[[i.nr,l.note]]),(0,a._)("div",en,[(0,a.Wm)(G.T,{class:"tw-capitalize",loading:l.isLoading,variant:"flat",color:"green",onClick:o.handleConfirm},{default:(0,a.w5)((()=>[(0,a.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var an={props:["visible","order"],data(){return{isLoading:!1,note:"",date:null,realDate:null,newOrder:null}},methods:{handleConfirm(){if(!this.date)return this.$alert({type:"warning",title:"Please select a date"}),!1;const t={...this.order};t.reported_agente_date=this.realDate,t.reported_agente_note=this.note,t.confirmation="reporter",this.isLoading=!0,vs.agenteUpdateConfirmation(t.id,"reporter",t).then((e=>{console.log(e.data),this.$alert({type:"success",title:"Order reported successfully"}),this.$store.dispatch("sale/update",{id:t.id,sale:t}),this.cancel()}),this.$handleApiError).finally((()=>this.isLoading=!1))},format(t){const e=t.getDate(),s=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getMonth()+1,a=i.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),r=t.getFullYear();return this.realDate=`${r}-${a}-${s}`,`${s}/${a}/${r}`},cancel(){this.$emit("cancel")}},mounted(){}};const rn=(0,d.Z)(an,[["render",sn]]);var ln=rn,on={props:["confirmation","id","sale"],components:{SaleConfirmationReporting:ln},data(){return{isLoading:!1,isOpen:!1,showPopup:!1,nextOption:null,note:"",noteReporter:"",selectedId:0,allOptions:Ko,showPopupReporter:!1}},computed:{options(){return this.allOptions.filter((t=>t.id!==this.selectedId))},selected(){return this.allOptions.filter((t=>t.id==this.selectedId))[0]},availableOptions(){return this.allOptions.map((t=>t.value))}},watc:{date(t){console.log(t)}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleResolved(t){t?(this.selectedId=this.nextOption,this.showPopup=!1,this.updateOrderWithNote().catch(this.$handleApiError).finally((()=>this.showPopup=!1))):this.showPopup=!1},handleClick(){this.selectedId=this.nextOption,this.showPopup=!1,this.updateOrderWithNote().catch(this.$handleApiError).finally((()=>this.showPopup=!1))},handleClickReporter(){console.log("repoting..."),this.showPopupReporter=!1},async handleChange(t){if(t.id===this.selectedId)return!1;"confirmer"!==t.value&&"reporter"!==t.value?(this.selectedId=t.id,this.updateOrder()):"reporter"===t.value?this.showPopupReporter=!0:(this.nextOption=t.id,this.showPopup=!0),this.close()},async updateOrder(){return this.isLoading=!0,vs.agenteUpdateConfirmation(this.id,this.selected.value).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateConfirmation(this.id,this.selected.value),this.isLoading=!1)}),(t=>this.$handleApiError(t))).then((()=>this.$emit("update",this.selected.value)))},async updateOrderWithNote(){return this.isLoading=!0,vs.agenteUpdateConfirmationWithNote(this.id,this.selected.value,this.note).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateConfirmationNote(this.id,this.selected.value,this.note),this.isLoading=!1)}),(t=>this.$handleApiError(t))).then((()=>this.$emit("update",this.selected.value)))},updateConfirmation(t,e){this.$store.dispatch("sale/updateConfirmation",{id:t,confirmation:e})},updateConfirmationNote(t,e,s){this.$store.dispatch("sale/updateConfirmationWithNote",{id:t,confirmation:e,note:s})}},mounted(){this.availableOptions.includes(this.confirmation)?this.selectedId=this.allOptions.find((t=>t.value==this.confirmation)).id:this.selectedId=0}};const nn=(0,d.Z)(on,[["render",Yo]]);var dn=nn;const cn={class:"tw-py-2 tw-space-y-1 tw-text-sm tw-text-gray-700 tw-max-h-[250px] tw-overflow-y-auto"},wn=["onClick"],un={class:"tw-block tw-px-4 tw-py-2 hover:tw-bg-gray-100"},pn={key:1,class:"tw-relative tw-min-w-[100px] tw-flex tw-items-center"};function mn(t,e,s,i,r,l){return l.fetched?(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",{key:s.affectation,class:"tw-relative tw-min-w-[100px]"},[(0,a._)("button",{onClick:e[0]||(e[0]=(...t)=>l.toggle&&l.toggle(...t)),class:"tw-whitespace-nowrap focus:tw-ring-4 tw-ring-neutral-200 tw-bg-neutral-600/10 tw-text-neutral-800 focus:tw-outline-none tw-font-medium tw-rounded-lg tw-text-sm tw-px-2 tw-py-1 tw-text-center tw-inline-flex tw-items-center",type:"button"},[(0,a.Uk)((0,Q.zw)(l.selected.firstname)+" "+(0,Q.zw)(l.selected.lastname)+" ",1),r.isLoading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(J.t,{key:0,class:"tw-ml-1"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Q.zw)(r.isOpen?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})),r.isLoading?((0,a.wg)(),(0,a.j4)(J.t,{key:1,class:"tw-animate-spin tw-ml-1"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-loading")])),_:1})):(0,a.kq)("",!0)]),(0,a._)("div",{class:(0,Q.C_)([{"tw-hidden":!r.isOpen},"tw-z-[20] tw-bg-white tw-absolute tw-top-full tw-left-0 tw-divide-y tw-divide-gray-100 tw-rounded-lg tw-shadow tw-w-44"])},[(0,a._)("ul",cn,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.options,(t=>((0,a.wg)(),(0,a.iD)("li",{onClick:e=>l.handleChange(t),key:t.id},[(0,a._)("a",un,(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),1)],8,wn)))),128))])],2)])),[[Zt.L,l.close]]):((0,a.wg)(),(0,a.iD)("div",pn,[(0,a.Wm)(J.t,{class:"tw-animate-spin tw-ml-1 tw-text-orange-500"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-loading")])),_:1})]))}var hn={props:["affectation","id","sale"],data(){return{isOpen:!1,isLoading:!1,selectedId:null,old:null}},computed:{options(){return[{id:null,firstname:"select",lastname:""},...this.deliveries]},selected(){const t=[...this.deliveries.map((t=>parseInt(t.id)))];return null!=this.selectedId&&t.includes(parseInt(this.selectedId))?this.options.filter((t=>t.id==this.selectedId))[0]:{id:null,firstname:"select",lastname:""}},users(){return this.$store.getters["user/users"]},allDeliveries(){return this.users.filter((t=>"delivery"==t.role_name))},fetched(){return this.$store.getters["user/fetched"]},deliveries(){return this.allDeliveries.filter((t=>t.delivery_products.some((t=>this.sale.items.some((e=>e.product_id==t.product_id))))))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleChange(t){if(this.old=this.affectation,t.id===this.selectedId)return!1;this.selectedId=t.id,this.isLoading=!0,this.updateOrder(),this.close()},updateOrder(){vs.agenteUpdateAffectaion(this.id,this.selectedId).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateAffectation(this.id,this.selected.id),this.isLoading=!1)}),(t=>{this.$handleApiError(t),this.isLoading=!1,this.selectedId=this.old}))},updateAffectation(t,e){this.$store.dispatch("sale/updateAffectation",{id:t,affectation:e})}},mounted(){this.selectedId=this.affectation}};const gn=(0,d.Z)(hn,[["render",mn]]);var fn=gn;const vn={class:"tw-py-2 tw-space-y-1 tw-text-sm tw-text-gray-700 tw-max-h-[250px] tw-overflow-y-auto"},yn=["onClick"];function _n(t,e,s,i,r,l){const o=(0,a.up)("SaleDeliveryReporting");return(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",{key:s.delivery,class:"tw-relative tw-min-w-[100px]"},[(0,a._)("button",{onClick:e[0]||(e[0]=(...t)=>l.toggle&&l.toggle(...t)),class:(0,Q.C_)([[l.selected.text,l.selected.bg,l.selected.ring],"focus:tw-ring-4 tw-min-w-[100px] focus:tw-outline-none tw-font-medium tw-rounded-lg tw-text-sm tw-px-2 tw-py-1 tw-text-center tw-inline-flex tw-items-center tw-justify-between"]),type:"button"},[(0,a.Uk)((0,Q.zw)(l.selected.name)+" ",1),r.isLoading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(J.t,{key:0,class:"tw-ml-1"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Q.zw)(r.isOpen?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})),r.isLoading?((0,a.wg)(),(0,a.j4)(J.t,{key:1,class:"tw-animate-spin tw-ml-1"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-loading")])),_:1})):(0,a.kq)("",!0)],2),(0,a._)("div",{class:(0,Q.C_)([{"tw-hidden":!r.isOpen},"tw-z-[20] tw-bg-white tw-absolute tw-top-full tw-left-0 tw-divide-y tw-divide-gray-100 tw-rounded-lg tw-shadow tw-w-44"])},[(0,a._)("ul",vn,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.options,(t=>((0,a.wg)(),(0,a.iD)("li",{onClick:e=>l.handleChange(t),key:t.id},[(0,a._)("a",{class:(0,Q.C_)(["tw-block tw-px-4 tw-py-2 hover:tw-bg-gray-100",[t.text,t.bg]])},(0,Q.zw)(t.name),3)],8,yn)))),128))])],2),(0,a.Wm)(o,{order:s.sale,visible:r.showPopupReporter,onCancel:e[1]||(e[1]=t=>r.showPopupReporter=!1)},null,8,["order","visible"])])),[[Zt.L,l.close]])}const xn={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},bn=(0,a._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Reported Date",-1),kn=(0,a._)("br",null,null,-1),Cn=(0,a._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Note",-1),Dn={class:"tw-flex tw-justify-end tw-mt-2"};function Sn(t,e,s,r,l,o){const n=(0,a.up)("VueDatePicker"),d=(0,a.up)("popup-full");return(0,a.wg)(),(0,a.iD)("div",{key:s.order.id},[(0,a.Wm)(d,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>o.cancel()),visible:s.visible},{default:(0,a.w5)((()=>[(0,a._)("div",xn,[bn,(0,a.Wm)(n,{modelValue:l.date,"onUpdate:modelValue":e[0]||(e[0]=t=>l.date=t),format:o.format},null,8,["modelValue","format"]),kn,Cn,(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.note=t),cols:"30",rows:"12",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n        ",512),[[i.nr,l.note]]),(0,a._)("div",Dn,[(0,a.Wm)(G.T,{class:"tw-capitalize",loading:l.isLoading,variant:"flat",color:"green",onClick:o.handleConfirm},{default:(0,a.w5)((()=>[(0,a.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var zn={props:["visible","order"],data(){return{isLoading:!1,note:"",date:null,realDate:null,newOrder:null}},methods:{handleConfirm(){if(!this.date)return this.$alert({type:"warning",title:"Please select a date"}),!1;const t={...this.order};t.reported_delivery_date=this.realDate,t.reported_delivery_note=this.note,t.delivery="reporter",this.isLoading=!0,vs.deliveryUpdateDelivery(t.id,"reporter",t).then((()=>{this.$alert({type:"success",title:"Order reported successfully"}),this.$store.dispatch("sale/update",{id:t.id,sale:t}),this.cancel()}),this.$handleApiError).finally((()=>this.isLoading=!1))},format(t){const e=t.getDate(),s=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getMonth()+1,a=i.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),r=t.getFullYear();return this.realDate=`${r}-${a}-${s}`,`${s}/${a}/${r}`},cancel(){this.$emit("cancel")}},mounted(){}};const Un=(0,d.Z)(zn,[["render",Sn]]);var Ln=Un,An={props:["delivery","id","sale"],components:{SaleDeliveryReporting:Ln},data(){return{isLoading:!1,isOpen:!1,showPopup:!1,nextOption:null,note:"",selectedId:0,allOptions:Qo,showPopupReporter:!1}},computed:{options(){return this.allOptions.filter((t=>t.id!==this.selectedId))},selected(){return this.allOptions.filter((t=>t.id==this.selectedId))[0]},availableOptions(){return this.allOptions.map((t=>t.value))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleChange(t){return t.id!==this.selectedId&&("reporter"!==t.value?(this.selectedId=t.id,this.updateOrder(),this.close(),!0):void("reporter"==t.value&&(this.showPopupReporter=!0,this.close())))},async updateOrder(){return this.isLoading=!0,vs.deliveryUpdateDelivery(this.id,this.selected.value).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateDelivery(this.id,this.selected.value),this.isLoading=!1),"QUANTITY_ERROR"==t.data.code&&this.$alert({type:"warning",title:t.data.message})}),(t=>this.$handleApiError(t))).then((()=>this.$emit("update",this.selected.value)))},updateDelivery(t,e){this.$store.dispatch("sale/updateDelivery",{id:t,delivery:e})}},mounted(){this.availableOptions.includes(this.delivery)?this.selectedId=this.allOptions.find((t=>t.value==this.delivery)).id:this.selectedId=0}};const Pn=(0,d.Z)(An,[["render",_n]]);var Wn=Pn;const En={key:0};function $n(t,e,s,i,r,l){const o=(0,a.up)("SaleHistory"),n=(0,a.up)("popup-full"),d=(0,a.up)("UpdateSale");return s.sale?((0,a.wg)(),(0,a.iD)("div",En,[(0,a.Wm)(G.T,{link:"",target:"_blank",href:"https://api.whatsapp.com/send?phone="+s.sale.phone.replace("+","").replace("-","").replace(" ",""),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-whatsapp")])),_:1})])),_:1},8,["href"]),t.$can("update_sale")?((0,a.wg)(),(0,a.j4)(G.T,{key:0,onClick:e[0]||(e[0]=t=>r.showUpdatePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-pencil-outline")])),_:1})])),_:1})):(0,a.kq)("",!0),(t.$can("view_sale"),(0,a.kq)("",!0)),(t.$can("delete_sale"),(0,a.kq)("",!0)),(0,a.Wm)(G.T,{onClick:e[2]||(e[2]=t=>r.showHistoryPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"teal",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-sort-clock-ascending-outline")])),_:1})])),_:1}),(0,a.Wm)(n,{visible:r.showHistoryPopup,onCancel:e[4]||(e[4]=t=>r.showHistoryPopup=!1)},{default:(0,a.w5)((()=>[r.showHistoryPopup?((0,a.wg)(),(0,a.j4)(o,{key:0,onCancel:e[3]||(e[3]=t=>r.showHistoryPopup=!1),sale:s.sale},null,8,["sale"])):(0,a.kq)("",!0)])),_:1},8,["visible"]),(0,a.Wm)(d,{visible:r.showUpdatePopup,"onUpdate:visible":e[5]||(e[5]=t=>r.showUpdatePopup=t),order:s.sale},null,8,["visible","order"])])):(0,a.kq)("",!0)}var Tn=s(7103),On=s(795),Vn=s(2773);const Rn={class:"md:tw-w-[50%] tw-max-h-full tw-relative tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},qn={key:0,class:"tw-w-full tw-h-full"},Fn={key:1,class:"tw-p-5"},In={class:"d-flextw-flex-col justify-space-between flex-grow-1"},Nn={class:"tw-flex tw-items-center tw-gap-2 tw-my-2"},jn={class:"tw-text-sm tw-capitalize tw-text-neutral-600"},Mn={class:"flex-shrink-0 tw-text-neutral-500 tw-flex tw-items-center tw-gap-2 tw-text-sm"},Hn={class:"d-flextw-flex-col justify-space-between flex-grow-1"},Yn={class:"tw-flex tw-flex-col tw-my-2"},Kn=(0,a._)("div",null," New Order Created ",-1),Zn={class:"flex-shrink-0 tw-flex tw-items-center tw-gap-2 tw-text-sm"};function Qn(t,e,s,i,r,l){const o=(0,a.up)("LoadingAnimation");return(0,a.wg)(),(0,a.iD)("div",Rn,[r.isLoaded?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",qn,[(0,a.Wm)(o,{class:"text-primary-color"})])),(0,a.Wm)(G.T,{onClick:l.cancel,icon:"mdi-close",variant:"flat",size:"w-small",color:"red",class:"tw-absolute tw-top-3 tw-z-10 tw-right-3"},null,8,["onClick"]),r.isLoaded?((0,a.wg)(),(0,a.iD)("div",Fn,[(0,a.Wm)(On.R,{density:"compact",side:"end"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.events,(t=>((0,a.wg)(),(0,a.j4)(Vn.N,{key:t.id,class:"mb-4","dot-color":l.eventColor(t.type),size:"x-small"},{default:(0,a.w5)((()=>[(0,a._)("div",In,[(0,a._)("div",Nn,[(0,a.Wm)(Tn.v,{class:"ms-0 tw-capitalize tw-w-fit",color:l.eventColor(t.type),label:"",size:"small"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Q.zw)(t.type),1)])),_:2},1032,["color"]),(0,a.Wm)(J.t,{size:"x-small",color:"grey"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-arrow-right")])),_:1}),(0,a.Wm)(Tn.v,{class:"ms-0 tw-capitalize tw-w-fit",color:"green",label:"",size:"small"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Q.zw)(t.historique),1)])),_:2},1024)]),(0,a._)("div",jn,(0,Q.zw)(t.users.firstname)+" "+(0,Q.zw)(t.users.lastname),1),(0,a._)("div",Mn,[(0,a._)("span",null,(0,Q.zw)(t.created_at?.split("T")[0]),1),(0,a._)("span",null,(0,Q.zw)(t.created_at?.split("T")[1].split(".")[0]),1)])])])),_:2},1032,["dot-color"])))),128)),(0,a.Wm)(Vn.N,{class:"mb-4","dot-color":"green",size:"x-small"},{default:(0,a.w5)((()=>[(0,a._)("div",Hn,[(0,a._)("div",Yn,[(0,a.Wm)(Tn.v,{class:"ms-0 tw-capitalize tw-w-fit",color:"green",label:"",size:"small"},{default:(0,a.w5)((()=>[(0,a.Uk)(" Order Created ")])),_:1}),Kn]),(0,a._)("div",Zn,[(0,a._)("span",null,(0,Q.zw)(s.sale.created_at?.split("T")[0]),1),(0,a._)("span",null,(0,Q.zw)(s.sale.created_at?.split("T")[1].split(".")[0]),1)])])])),_:1})])),_:1})])):(0,a.kq)("",!0)])}var Gn={props:["sale"],data(){return{isLoaded:!1,allEvents:[]}},computed:{events(){return[...this.allEvents].reverse()}},methods:{cancel(){this.$emit("cancel")},getHistory(){this.isLoaded=!1,vs.history(this.sale.id).then((t=>{console.log(t.data),this.allEvents=t.data.data.orders}),this.$handleApiError).finally((()=>{this.isLoaded=!0}))},eventColor(t){let e={confirmation:"primary-color",delivery:"blue",upsell:"purple",affectation:"cyan"};return["confirmation","delivery","upsell","affectation"].includes(t)?e[t]:"primary-color"}},mounted(){this.getHistory()}};const Bn=(0,d.Z)(Gn,[["render",Qn]]);var Jn=Bn;const Xn={key:0,class:"md:tw-w-[80%] tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},td={key:1,class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[880px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},ed=(0,a._)("h1",{class:"tw-text-lg"},"Update Order",-1),sd={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},id={class:"md:tw-col-span-6 tw-col-span-12"},ad=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Client",-1),rd={class:"md:tw-col-span-6 tw-col-span-12"},ld=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Phone",-1),od={class:"md:tw-col-span-6 tw-col-span-12"},nd=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"City",-1),dd=["value"],cd=["value"],wd={class:"md:tw-col-span-6 tw-col-span-12"},ud=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Address",-1),pd={class:"md:tw-col-span-12 tw-col-span-12 tw-mt-3 tw-border-t tw-border-neutral-300 tw-pt-3"},md=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Confirmation",-1),hd={class:"md:tw-col-span-6 tw-col-span-12"},gd=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Affectation",-1),fd={class:"md:tw-col-span-6 tw-col-span-12"},vd=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Upsell",-1),yd=["value"],_d={class:"md:tw-col-span-6 tw-col-span-12 tw-mt-4"},xd={class:"tw-flex tw-items-center tw-w-full tw-text-neutral-600 dark:tw-text-neutral-200 tw-text-md tw-py-1"},bd={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit -tw-rotate-90 tw-scale-75"},kd=(0,a._)("div",{class:"tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),Cd={class:"tw-flex tw-flex-col tw-justify-center"},Dd=(0,a._)("p",{class:"tw-col-span-12 tw-mt-5 tw-mb-2"},"Order Items",-1),Sd={key:4,class:"tw-col-span-12 tw-rounded tw-text-center tw-p-5 tw-text-gray-700 tw-bg-gray-50"},zd={key:5,class:"md:tw-col-span-12 tw-col-span-12"},Ud={class:"tw-max-w-full tw-overflow-auto"},Ld={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},Ad={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},Pd={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},Wd=["onUpdate:modelValue"],Ed=(0,a._)("option",{value:0},"Select",-1),$d=["value"],Td={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},Od=["onUpdate:modelValue"],Vd=(0,a._)("option",{value:0},"Select",-1),Rd=["value"],qd={key:0},Fd={key:1},Id={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},Nd={class:"md:tw-col-span-6 tw-col-span-12"},jd=["onUpdate:modelValue"],Md={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},Hd={key:0},Yd={key:1,class:"md:tw-col-span-6 tw-col-span-12"},Kd=["onUpdate:modelValue"],Zd={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},Qd={key:0,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},Gd={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},Bd=(0,a._)("option",{value:0},"Select",-1),Jd=["value"],Xd={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},tc=(0,a._)("option",{value:0},"Select",-1),ec=["value"],sc={key:0},ic={key:1},ac={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},rc={class:"md:tw-col-span-6 tw-col-span-12"},lc={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},oc={class:"md:tw-col-span-6 tw-col-span-12"},nc=(0,a._)("th",{scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},null,-1),dc={class:"tw-w-full tw-col-span-12 tw-flex tw-justify-end tw-mt-3"},cc=(0,a._)("span",{class:"!tw-text-sm !tw-capitalize"},"Add",-1),wc={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},uc=(0,a._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),pc={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},mc=(0,a._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-mb-2 tw-whitespace-nowrap"},"Price: ",-1),hc={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},gc=(0,a._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),fc={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},vc=(0,a._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-whitespace-nowrap"},"Total Price: ",-1),yc={class:"tw-font-medium"},_c={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},xc=(0,a._)("span",{class:"text-white"}," Cancel ",-1),bc=(0,a._)("span",{class:"text-white"}," Update ",-1);function kc(t,e,s,r,l,o){const n=(0,a.up)("LoadingAnimation"),d=(0,a.up)("AddOrderConfirmation"),c=(0,a.up)("AddOrderAffectation"),w=(0,a.up)("popup-full");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(w,{onCancel:e[19]||(e[19]=e=>t.$emit("update:visible",!1)),visible:s.visible},{default:(0,a.w5)((()=>[o.isLoaded?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",Xn,[(0,a.Wm)(n)])),o.isLoaded?((0,a.wg)(),(0,a.iD)("div",td,[ed,(0,a._)("div",sd,[(0,a._)("div",id,[ad,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>l.sale.fullname=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[i.nr,l.sale.fullname]])]),(0,a._)("div",rd,[ld,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>l.sale.phone=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[i.nr,l.sale.phone]])]),(0,a._)("div",od,[nd,(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.sale.city=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[(0,a._)("option",{disabled:"",value:l.sale.city},(0,Q.zw)(l.sale.city),9,dd),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.cities,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t.name,key:t.id},(0,Q.zw)(t.name),9,cd)))),128))],512),[[i.bM,l.sale.city]])]),(0,a._)("div",wd,[ud,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>l.sale.adresse=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[i.nr,l.sale.adresse]])]),(0,a._)("div",pd,[md,(0,a.Wm)(d,{order:l.sale,id:l.sale.id,confirmation:l.sale.confirmation,"onUpdate:confirmation":e[4]||(e[4]=t=>l.sale.confirmation=t),onConfirmed:e[5]||(e[5]=t=>l.sale.note=t),onReported:o.handleReported},null,8,["order","id","confirmation","onReported"])]),(0,a._)("div",hd,[gd,(0,a.Wm)(c,{items:l.items,"onUpdate:items":e[6]||(e[6]=t=>l.items=t),order:l.sale,confirmation:l.sale.confirmation,affectation:l.sale.affectation,"onUpdate:affectation":e[7]||(e[7]=t=>l.sale.affectation=t),id:l.sale.id},null,8,["items","order","confirmation","affectation","id"])]),(0,a._)("div",fd,[vd,(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[8]||(e[8]=t=>l.sale.upsell=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.upsells,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t.value,key:t.id},(0,Q.zw)(t.name),9,yd)))),128))],512),[[i.bM,l.sale.upsell]])]),(0,a.kq)("",!0),(0,a.kq)("",!0),(0,a.kq)("",!0),(0,a.kq)("",!0),(0,a._)("div",_d,[(0,a._)("div",xd,[(0,a._)("label",bd,[(0,a.wy)((0,a._)("input",{type:"checkbox","onUpdate:modelValue":e[13]||(e[13]=t=>l.sale.counts_from_warehouse=t),class:"tw-sr-only tw-peer"},null,512),[[i.e8,l.sale.counts_from_warehouse]]),kd]),(0,a._)("label",Cd,[(0,a._)("span",{class:(0,Q.C_)([[l.sale.counts_from_warehouse?"tw-text-orange-500":"tw-text-neutral-500"],"tw-ml-1 tw-text-sm tw-font-medium tw-duration-300"])},"Warehouse",2),(0,a._)("span",{class:(0,Q.C_)([[l.sale.counts_from_warehouse?"tw-text-neutral-500":"tw-text-orange-500"],"tw-ml-1 tw-text-sm tw-font-medium tw-duration-300"])},"Delivery",2)])])]),Dd,l.items.length?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("p",Sd," No Order items ")),l.items.length?((0,a.wg)(),(0,a.iD)("div",zd,[(0,a._)("div",Ud,[((0,a.wg)(),(0,a.iD)("table",{key:l.items.length,class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},[(0,a._)("thead",Ld,[(0,a._)("tr",null,[((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(["product","variation","quantity","price","actions"],(t=>(0,a._)("th",{class:(0,Q.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,a._)("div",Ad,(0,Q.zw)(t),1)],2))),64))])]),(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.items,(t=>((0,a.wg)(),(0,a.iD)("tr",{key:t,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,a._)("th",Pd,[(0,a._)("div",null,[(0,a._)("div",null,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e=>t.product.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[Ed,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.filtredProducts,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,$d)))),128))],8,Wd),[[i.bM,t.product.id]])])])]),(0,a._)("th",Td,[(0,a._)("div",null,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e=>t.product_variation.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[Vd,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.getVariations(t.product)?.variations,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t.id,key:t.id},[t.size||t.color?((0,a.wg)(),(0,a.iD)("p",Fd,(0,Q.zw)(t.size)+" / "+(0,Q.zw)(t.color),1)):((0,a.wg)(),(0,a.iD)("p",qd,"-"))],8,Rd)))),128))],8,Od),[[i.bM,t.product_variation.id]])])]),(0,a._)("th",Id,[(0,a._)("div",Nd,[(0,a.wy)((0,a._)("input",{type:"number","onUpdate:modelValue":e=>t.quantity=e,placeholder:"Quantity",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-[80px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,jd),[[i.nr,t.quantity]])])]),(0,a._)("th",Md,[(0,a._)("div",null,[null==t.price?((0,a.wg)(),(0,a.iD)("div",Hd," - ")):((0,a.wg)(),(0,a.iD)("div",Yd,[(0,a.wy)((0,a._)("input",{type:"number","onUpdate:modelValue":e=>t.price=e,placeholder:"Price",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[100px] tw-max-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,Kd),[[i.nr,t.price]])]))])]),(0,a._)("th",Zd,[(0,a._)("div",null,[(0,a.Wm)(G.T,{onClick:e=>o.deleteItem(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])])))),128)),l.isAddItem?((0,a.wg)(),(0,a.iD)("tr",Qd,[(0,a._)("th",Gd,[(0,a._)("div",null,[(0,a._)("div",null,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[14]||(e[14]=t=>l.product_id=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[Bd,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.filtredProducts,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,Jd)))),128))],512),[[i.bM,l.product_id]])])])]),(0,a._)("th",Xd,[(0,a._)("div",null,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[15]||(e[15]=t=>l.product_variation_id=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[tc,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.variations,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t.id,key:t.id},[t.size||t.color?((0,a.wg)(),(0,a.iD)("p",ic,(0,Q.zw)(t.size)+" / "+(0,Q.zw)(t.color),1)):((0,a.wg)(),(0,a.iD)("p",sc,"-"))],8,ec)))),128))],512),[[i.bM,l.product_variation_id]])])]),(0,a._)("th",ac,[(0,a._)("div",rc,[(0,a.wy)((0,a._)("input",{type:"number","onUpdate:modelValue":e[16]||(e[16]=t=>l.quantity=t),placeholder:"Quantity",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-[80px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[i.nr,l.quantity]])])]),(0,a._)("th",lc,[(0,a._)("div",oc,[(0,a.wy)((0,a._)("input",{type:"number","onUpdate:modelValue":e[17]||(e[17]=t=>l.price=t),placeholder:"Price",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[100px] tw-max-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[i.nr,l.price]])])]),nc])):(0,a.kq)("",!0)])]))])])):(0,a.kq)("",!0),(0,a._)("div",dc,[(0,a._)("div",null,[(0,a.Wm)(G.T,{onClick:o.addNewRow,class:"mr-2 !tw-px-1 !tw-py-1 !tw-pr-2 tw-flex tw-items-center tw-gap-2","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-plus")])),_:1}),cc])),_:1},8,["onClick"])])]),(0,a._)("div",wc,[uc,(0,a._)("div",pc,[mc,(0,a.wy)((0,a._)("input",{type:"number","onUpdate:modelValue":e[18]||(e[18]=t=>l.sale.price=t),class:"tw-py-1 tw-max-w-[100px] tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[i.nr,l.sale.price]])])]),(0,a._)("div",hc,[gc,(0,a._)("div",fc,[vc,(0,a._)("div",yc,(0,Q.zw)(o.total_price),1)])])]),(0,a._)("div",_c,[(0,a.Wm)(G.T,{onClick:o.handleCancel,color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,a.w5)((()=>[xc])),_:1},8,["onClick"]),(0,a.Wm)(G.T,{loading:l.isLoading,onClick:o.update,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,a.w5)((()=>[bc])),_:1},8,["loading","onClick"])])])):(0,a.kq)("",!0)])),_:1},8,["visible"])])}const Cc={class:"tw-relative"},Dc=["value"],Sc={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},zc=(0,a._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter note",-1),Uc={class:"tw-flex tw-justify-end tw-mt-2"};function Lc(t,e,s,r,l,o){const n=(0,a.up)("popup-full"),d=(0,a.up)("AddOrderReporting");return(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",{key:s.confirmation,class:"tw-relative tw-min-w-[100px] tw-w-full"},[(0,a._)("div",null,[(0,a._)("div",Cc,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.confirmationValue=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.allOptions,(t=>((0,a.wg)(),(0,a.iD)("option",{class:(0,Q.C_)([t.text,!t.value&&"!tw-text-gray-700"]),key:t.id,value:t.value},(0,Q.zw)(t.name),11,Dc)))),128))],512),[[i.bM,o.confirmationValue]]),(0,a.Wm)(J.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-chevron-down")])),_:1})])]),(0,a.Wm)(n,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>l.showPopup=!1),visible:l.showPopup},{default:(0,a.w5)((()=>[(0,a._)("div",Sc,[zc,(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.note=t),cols:"30",rows:"3",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n        ",512),[[i.nr,l.note]]),(0,a._)("div",Uc,[(0,a.Wm)(G.T,{class:"tw-capitalize",loading:l.isLoading,variant:"flat",color:"green",onClick:o.handleClick},{default:(0,a.w5)((()=>[(0,a.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"]),(0,a.Wm)(d,{order:s.order,onConfirm:o.handleReportedDate,visible:l.showPopupReporter,onCancel:e[3]||(e[3]=t=>l.showPopupReporter=!1)},null,8,["order","onConfirm","visible"])])),[[Zt.L,o.close]])}const Ac={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},Pc=(0,a._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Reported Date",-1),Wc=(0,a._)("br",null,null,-1),Ec=(0,a._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Note",-1),$c={class:"tw-flex tw-justify-end tw-mt-2"};function Tc(t,e,s,r,l,o){const n=(0,a.up)("VueDatePicker"),d=(0,a.up)("popup-full");return(0,a.wg)(),(0,a.iD)("div",{key:s.order.id},[(0,a.Wm)(d,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>o.cancel()),visible:s.visible},{default:(0,a.w5)((()=>[(0,a._)("div",Ac,[Pc,(0,a.Wm)(n,{modelValue:l.date,"onUpdate:modelValue":e[0]||(e[0]=t=>l.date=t),format:o.format},null,8,["modelValue","format"]),Wc,Ec,(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.note=t),cols:"30",rows:"12",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n        ",512),[[i.nr,l.note]]),(0,a._)("div",$c,[(0,a.Wm)(G.T,{class:"tw-capitalize",loading:l.isLoading,variant:"flat",color:"green",onClick:o.handleConfirm},{default:(0,a.w5)((()=>[(0,a.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var Oc={props:["visible","order"],data(){return{isLoading:!1,note:"",date:null,realDate:null,newOrder:null}},methods:{handleConfirm(){if(!this.date)return this.$alert({type:"warning",title:"Please select a date"}),!1;const t={...this.order};t.reported_agente_date=this.realDate,t.reported_agente_note=this.note,t.confirmation="reporter",this.$emit("confirm",{reported_agente_date:this.realDate,reported_agente_note:this.note}),this.isLoading=!0},format(t){const e=t.getDate(),s=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getMonth()+1,a=i.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),r=t.getFullYear();return this.realDate=`${r}-${a}-${s}`,`${s}/${a}/${r}`},cancel(){this.$emit("cancel")}},mounted(){console.log(this.order)}};const Vc=(0,d.Z)(Oc,[["render",Tc]]);var Rc=Vc,qc={props:["confirmation","id","order"],components:{AddOrderReporting:Rc},data(){return{isLoading:!1,isOpen:!1,showPopup:!1,nextOption:null,note:"",selectedId:0,allOptions:Ko,reported_agente_date:null,reported_agente_note:"",showPopupReporter:!1}},watch:{},computed:{options(){return this.allOptions.filter((t=>t.id!==this.selectedId))},confirmationValue:{get(){return this.confirmation},set(t){switch(console.log(t),t){case"reporter":this.showPopupReporter=!0;break;case"confirmer":this.showPopup=!0;break;default:this.$emit("update:confirmation",t);break}}},selected(){return this.allOptions.filter((t=>t.id==this.selectedId))[0]},availableOptions(){return this.allOptions.map((t=>t.value))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleResolved(t){t?(this.selectedId=this.nextOption,this.showPopup=!1,this.updateOrderWithNote().catch(this.$handleApiError).finally((()=>this.showPopup=!1))):this.showPopup=!1},handleReportedDate(t){this.reported_agente_date=t.reported_agente_date,this.reported_agente_note=t.reported_agente_note,this.$emit("update:confirmation","reporter"),this.$emit("reported",t),this.showPopupReporter=!1},handleClick(){this.showPopup=!1,this.$emit("update:confirmation","confirmer"),this.$emit("confirmed",this.note)},async handleChange(t){if(t.id===this.selectedId)return!1;"confirmer"!==t.value&&"reporter"!==t.value?(this.selectedId=t.id,this.updateOrder()):"reporter"===t.value?this.showPopupReporter=!0:(this.nextOption=t.id,this.showPopup=!0),this.close()},async updateOrder(){return this.isLoading=!0,vs.agenteUpdateConfirmation(this.id,this.selected.value).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateConfirmation(this.id,this.selected.value),this.isLoading=!1)}),(t=>this.$handleApiError(t)))},async updateOrderWithNote(){return this.isLoading=!0,vs.agenteUpdateConfirmationWithNote(this.id,this.selected.value,this.note).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateConfirmationWithNote(this.id,this.selected.value,this.note),this.isLoading=!1)}),(t=>this.$handleApiError(t))).then((()=>this.$emit("update",this.selected.value)))},updateConfirmation(t,e){this.$store.dispatch("order/updateConfirmation",{id:t,confirmation:e}),this.$emit("update",e)},updateConfirmationWithNote(t,e,s){this.$store.dispatch("order/updateConfirmationWithNote",{id:t,confirmation:e,note:s}),this.$emit("update",e)}},mounted(){this.availableOptions.includes(this.confirmation)?this.selectedId=this.allOptions.find((t=>t.value==this.confirmation)).id:this.selectedId=0}};const Fc=(0,d.Z)(qc,[["render",Lc]]);var Ic=Fc;const Nc={class:"tw-relative"},jc=["disabled"],Mc=["value"],Hc={key:1,class:"tw-relative tw-min-w-[100px] tw-flex tw-items-center"};function Yc(t,e,s,r,l,o){return o.fetched?(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",{key:s.affectation,class:"tw-relative tw-min-w-[100px]"},[(0,a._)("div",null,[(0,a._)("div",Nc,[(0,a.wy)((0,a._)("select",{disabled:"confirmer"!=s.confirmation,"onUpdate:modelValue":e[0]||(e[0]=t=>o.affectationValue=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.options,(t=>((0,a.wg)(),(0,a.iD)("option",{key:t.id,value:t.id},(0,Q.zw)(t.firstname+" "+t.lastname),9,Mc)))),128))],8,jc),[[i.bM,o.affectationValue]]),(0,a.Wm)(J.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-chevron-down")])),_:1})])])])),[[Zt.L,o.close]]):((0,a.wg)(),(0,a.iD)("div",Hc,[(0,a.Wm)(J.t,{class:"tw-animate-spin tw-ml-1 tw-text-orange-500"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-loading")])),_:1})]))}var Kc={props:["affectation","id","order","confirmation","items"],data(){return{isOpen:!1,isLoading:!1,selectedId:null}},watch:{items(t,e){console.log(t),console.log(e)}},computed:{options(){return[{id:null,firstname:"select",lastname:""},...this.deliveries]},order_items(){return this.items},affectationValue:{get(){return this.affectation},set(t){this.$emit("update:affectation",t)}},selected(){const t=[...this.deliveries.map((t=>parseInt(t.id)))];return null!=this.selectedId&&t.includes(parseInt(this.selectedId))?this.options.filter((t=>t.id==this.selectedId))[0]:{id:null,firstname:"select",lastname:""}},users(){return this.$store.getters["user/users"]},allDeliveries(){return this.users.filter((t=>"delivery"==t.role_name))},fetched(){return this.$store.getters["user/fetched"]},deliveries(){return this.allDeliveries.filter((t=>t.delivery_products.some((t=>this.items.some((e=>e.product_id==t.product_id))))))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleChange(t){if(t.id===this.selectedId)return!1;this.selectedId=t.id,this.isLoading=!0,this.updateOrder(),this.close()}},mounted(){this.selectedId=this.affectation}};const Zc=(0,d.Z)(Kc,[["render",Yc]]);var Qc=Zc,Gc={components:{AddOrderConfirmation:Ic,AddOrderAffectation:Qc},props:["visible","order"],data(){return{upsells:Zo,isLoading:!1,isAddItem:!1,product_id:0,product_variation_id:0,warehouse_id:0,quantity:1,item_id:1,items:[],reported_date:null,price:0,sale:{fullname:"",phone:"",city:"",adresse:"",price:0,upsell:null,confirmation:null,counts_from_warehouse:!1}}},watch:{product_id(){this.selectedProduct&&this.selectedProduct.variations.length>0?this.product_variation_id=this.selectedProduct.variations[0].id:this.product_variation_id=0},warehouse_id(){this.product_id=0,this.product_variation_id=0}},computed:{products(){return this.$store.getters["product/products"]},isLoaded(){return this.$store.getters["product/fetched"]},warehouses(){const t=this.products.flatMap((t=>t.variations.map((t=>t.warehouse)))),e=t.map((t=>t.id));return t.filter(((t,s)=>e.indexOf(t.id)===s))},filtredProducts(){return this.products},cities(){return this.$store.getters["city/cities"]},variations(){return 0==this.product_id?[]:this.products.find((t=>t.id==this.product_id)).variations},selectedProduct(){return this.products.find((t=>t.id==this.product_id))},total_price:{get(){const t=this.items.reduce(((t,e)=>t+(e.price?e.price:0)),0);return parseFloat(this.sale.price?this.sale.price:0)+parseFloat(t)}},isItemsValid(){if(0==this.items.length)return!1;const t=this.items.some((t=>0==t.product.id||0==t.product_variation_id||0==t.quantity));return!t},isFormValid(){return!!this.sale.fullname&&!!this.sale.phone&&!!this.sale.adresse&&0!=this.sale.price&&this.items.length>0&&!!this.sale.city}},methods:{deleteItem(t){this.items=this.items.filter((e=>e.id!=t))},addNewRow(){const t={id:this.item_id,product_id:0,product_ref:null,product:{id:0},product_variation:{id:0},product_variation_id:0,order_id:this.order.id,quantity:0,price:0};this.items.push(t)},getVariations(t){return this.products.find((e=>e.id==t.id))},formatItems(){const t=this.items.map((t=>{const e=this.products.find((e=>e.id==t.product.id));if(!e)return t;const s=e.variations.find((e=>e.id==t.product_variation.id));return s?{...t,product:e,product_id:e.id,product_variation:s,product_variation_id:s.id,product_ref:e.ref}:t}));return console.log(t),this.items=t,t},addItem(){if([this.product_id,this.product_variation_id].includes(0))return this.$alert({title:"Choose a product",type:"warning"}),!1;const t=this.filtredProducts.find((t=>t.id==this.product_id)),e=this.variations.find((t=>t.id==this.product_variation_id)),s={id:this.item_id,product_id:t.id,product_ref:t.ref,product:t,product_variation:e,product_variation_id:e.id,quantity:this.quantity,price:this.price};this.items.push(s),this.product_id=0,this.product_variation_id=0,this.price=0,this.item_id+=1},update(){if(this.formatItems(),!this.isFormValid)return this.$alert({type:"warning",title:"Please fill all the form"}),!1;if(!this.isItemsValid)return this.$alert({type:"warning",title:"Order Items are not valid"}),!1;if(0==this.total_price)return this.$alert({type:"warning",title:"Total price cannot be 0"}),!1;this.isLoading=!0;const t={id:this.sale.id,fullname:this.sale.fullname,phone:this.sale.phone,city:this.sale.city,price:this.sale.price,adresse:this.sale.adresse,upsell:this.sale.upsell,counts_from_warehouse:this.sale.counts_from_warehouse,orderItems:this.items,confirmation:this.sale.confirmation,note:this.sale.note,affectation:this.sale.affectation,reported_agente_note:this.sale.reported_agente_note,reported_agente_date:this.sale.reported_agente_date};this.isLoading=!0,vs.update(t.id,t).then((e=>{"SUCCESS"==e.data.code&&(this.showUpdatePopup=!1,this.$alert({type:"success",title:"Order updated"}),this.$store.dispatch("sale/update",{id:t.id,sale:e.data.data.sale}),this.$emit("update:visible",!1),this.$emit("updateOrder",e.data.data.sale))})).catch((t=>{this.$handleApiError(t)})).finally((()=>{this.isLoading=!1}))},handleCancel(){this.sale={...this.order},this.items=[...this.order.items],this.$emit("update:visible",!1)},handleReported(t){this.sale.reported_agente_note=t.reported_agente_note,this.sale.reported_agente_date=t.reported_agente_date},getProducts(){return ti.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))}},mounted(){this.sale={...this.order},this.items=[...this.order.items]}};const Bc=(0,d.Z)(Gc,[["render",kc]]);var Jc=Bc,Xc={props:["sale"],name:"saleActions",components:{SaleHistory:Jn,UpdateSale:Jc},data(){return{showPopup:!1,showUpdatePopup:!1,showHistoryPopup:!1,isLoading:!1}},computed:{cities(){return this.$store.getters["city/cities"]}},methods:{}};const tw=(0,d.Z)(Xc,[["render",$n]]);var ew=tw;const sw=t=>{if(!t)return 0;const e=t.items.reduce(((t,e)=>t+(e.price?e.price:0)),0);return parseFloat(t.price?t.price:0)+parseFloat(e)};var iw={props:{sales:{required:!0},selectedReset:{required:!1,default:[]}},components:{SaleConfirmation:dn,SaleAffectation:fn,SaleDelivery:Wn,SaleActions:ew},data(){return{allowedLimit:[5,10,20,50,100,300,500],currentPage:1,paginationLimit:50,todayDate:null,selected:[],isAllSelected:!1,columns:["id","date","city","products","client","confirmation","affectation","delivery","price","actions"]}},watch:{selectedReset(t){this.selected=t,0==this.selected.length&&(this.isAllSelected=!1)},paginationLimit(){this.currentPage=1},selected(t){this.$emit("selected",t)}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.sales.length/this.paginationLimit)},items(){const t=[...this.reportedForToday,...this.sales.filter((t=>!this.isReportedToday(t)))];return t.slice(this.prevRange,this.nextRange)},reportedForToday(){return this.sales.filter(this.isReportedToday)}},methods:{getPrice(t){return sw(t)},isReportedToday(t){return this.isConfirmationReportedToday(t)||this.isDeliveryReportedToday(t)},isDeliveryReportedToday(t){return"reporter"==t.delivery&&t.reported_delivery_date==this.todayDate},isConfirmationReportedToday(t){return"reporter"==t.confirmation&&t.reported_agente_date==this.todayDate},handleSelect(t,e){t.target.checked?this.selected=[...this.selected,e]:this.selected=this.selected.filter((t=>t!=e))},isSelected(t){return this.selected.includes(t)},handleSelectAll(t){t.target.checked?this.selected=[...this.items.map((t=>t.id))]:this.selected=[]}},mounted(){const t=new Date,e=t.getDate(),s=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getMonth()+1,a=i.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),r=t.getFullYear();this.todayDate=`${r}-${a}-${s}`}};const aw=(0,d.Z)(iw,[["render",Fo]]);var rw=aw,lw={components:{SalesTable:rw},data(){return{columns:[{prop:"id",name:"#"},{prop:"city",name:"City"},{prop:"date",name:"Date"},{prop:"client",name:"Client"},{prop:"product",name:"Product"},{prop:"upsell",name:"Upsell"},{prop:"confirmation",name:"Confirmation"},{prop:"affectation",name:"Affected"},{prop:"delivery",name:"Delivery"},{prop:"quantity",name:"Qty"},{prop:"price",name:"Price"},{prop:"actions",name:"Actions"}]}},computed:{sales(){return this.$store.getters["notification/notifications"]["reportedOrderAgente"]||[]},fetched(){return this.$store.getters["notification/fetched"]}}};const ow=(0,d.Z)(lw,[["render",Zl]]);var nw=ow;const dw={key:0};function cw(t,e,s,i,r,l){const o=(0,a.up)("SalesTable");return l.fetched?((0,a.wg)(),(0,a.iD)("div",dw,[((0,a.wg)(),(0,a.j4)(o,{key:l.sales.length,columns:r.columns,sales:l.sales},null,8,["columns","sales"]))])):(0,a.kq)("",!0)}var ww={components:{SalesTable:rw},data(){return{columns:[{prop:"id",name:"#"},{prop:"city",name:"City"},{prop:"date",name:"Date"},{prop:"client",name:"Client"},{prop:"product",name:"Product"},{prop:"upsell",name:"Upsell"},{prop:"confirmation",name:"Confirmation"},{prop:"affectation",name:"Affected"},{prop:"delivery",name:"Delivery"},{prop:"quantity",name:"Qty"},{prop:"price",name:"Price"},{prop:"actions",name:"Actions"}]}},computed:{sales(){return this.$store.getters["notification/notifications"]["reportedOrderDelivery"]||[]},fetched(){return this.$store.getters["notification/fetched"]}}};const uw=(0,d.Z)(ww,[["render",cw]]);var pw=uw;function mw(t,e,s,i,r,l){const o=(0,a.up)("ProductsTable");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(o,{columns:r.columns,products:l.products},null,8,["columns","products"])])}const hw={class:"tw-relative tw-overflow-x-auto sm:tw-rounded-lg"},gw={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},fw={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},vw=(0,a._)("th",{scope:"col",class:"tw-p-4"},[(0,a._)("div",{class:"tw-flex tw-items-center"},[(0,a._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,a._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),yw={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},_w=(0,a._)("td",{class:"tw-w-4 tw-p-4"},[(0,a._)("div",{class:"tw-flex tw-items-center"},[(0,a._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,a._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),xw={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},bw={class:"tw-px-6 tw-py-4"},kw={class:"tw-px-6 tw-py-4"},Cw={class:"tw-px-6 tw-py-4"},Dw={class:"tw-px-6 tw-py-4"},Sw={class:"tw-px-6 tw-py-4"},zw={class:"tw-px-6 tw-py-4"},Uw={class:"tw-flex tw-items-center tw-px-6 tw-py-4 tw-space-x-3"},Lw={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},Aw={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},Pw=(0,a._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),Ww=["value"],Ew={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},$w={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},Tw={class:"tw-text-white"};function Ow(t,e,s,r,l,o){const n=(0,a.up)("ProductActions");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",hw,[(0,a._)("table",gw,[(0,a._)("thead",fw,[(0,a._)("tr",null,[vw,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.columns,(t=>((0,a.wg)(),(0,a.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,a._)("div",yw,(0,Q.zw)(t.name),1)])))),128))])]),(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.products,(t=>((0,a.wg)(),(0,a.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[_w,(0,a._)("th",xw,(0,Q.zw)(t.id),1),(0,a._)("td",bw,(0,Q.zw)(t.ref),1),(0,a._)("td",kw,(0,Q.zw)(t.name),1),(0,a._)("td",Cw,(0,Q.zw)(t.buying_price)+" "+(0,Q.zw)(l.currency),1),(0,a._)("td",Dw,(0,Q.zw)(t.selling_price)+" "+(0,Q.zw)(l.currency),1),(0,a._)("td",Sw,(0,Q.zw)(o.calculQty(t.variations)),1),(0,a._)("td",zw,(0,Q.zw)(t.created_at.split("T")[0]),1),(0,a._)("td",Uw,[(0,a.Wm)(n,{product:t},null,8,["product"])])])))),128))])])]),(0,a._)("div",Lw,[(0,a._)("div",Aw,[Pw,(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.allowedLimit,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t,key:t},(0,Q.zw)(t),9,Ww)))),128))],512),[[i.bM,l.paginationLimit]])]),(0,a._)("div",Ew,[(0,a._)("div",$w,(0,Q.zw)(o.prevRange+1)+" - "+(0,Q.zw)(l.currentPage==o.pageCount?s.products.length:o.nextRange)+" of "+(0,Q.zw)(s.products.length)+" items ",1),(0,a._)("div",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.pageCount,(t=>((0,a.wg)(),(0,a.j4)(G.T,{onClick:e=>l.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==l.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,a.w5)((()=>[(0,a._)("span",Tw,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const Vw={class:"tw-flex tw-items-center tw-gap-1"};function Rw(t,e,s,i,r,l){const o=(0,a.up)("popup");return(0,a.wg)(),(0,a.iD)("div",Vw,[t.$can("update_product")?((0,a.wg)(),(0,a.j4)(G.T,{key:0,to:"/products/update/"+s.product.id,class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-pencil-outline")])),_:1})])),_:1},8,["to"])):(0,a.kq)("",!0),t.$can("view_product")?((0,a.wg)(),(0,a.j4)(G.T,{key:1,to:"/products/"+s.product.id,class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"blue",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-eye-outline")])),_:1})])),_:1},8,["to"])):(0,a.kq)("",!0),t.$can("delete_product")?((0,a.wg)(),(0,a.j4)(G.T,{key:2,onClick:e[0]||(e[0]=t=>r.showPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,a.kq)("",!0),(0,a.Wm)(o,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this product?</p> You won't be able to revert this!",loading:r.isLoading,visible:r.showPopup,onResolved:l.handleResolved},null,8,["loading","visible","onResolved"])])}var qw={props:["rowIndex","product"],name:"productActions",data(){return{showPopup:!1,isLoading:!1}},methods:{handleResolved(t){t?(this.isLoading=!0,ti["delete"](this.product.id).then((t=>{"PRODUCT_DELETED"==t.data.code&&(this.isLoading=!1,this.$alert({type:"success",title:"Product Deleted Successfully"})),ti.all().then((t=>{"SUCCESS"==t.data.code&&this.$store.dispatch("product/setProducts",t.data.data.products)})).catch(this.$handleApiError)})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1,this.showPopup=!1}))):this.showPopup=!1}}};const Fw=(0,d.Z)(qw,[["render",Rw]]);var Iw=Fw,Nw={props:["columns","products"],components:{ProductActions:Iw},data(){return{currency:I,allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.products.length/this.paginationLimit)},items(){return this.products.slice(this.prevRange,this.nextRange)}},methods:{calculQty(t){let e=0;return t.forEach((t=>{e+=t.quantity})),e}}};const jw=(0,d.Z)(Nw,[["render",Ow]]);var Mw=jw,Hw={components:{ProductsTable:Mw},data(){return{columns:[{prop:"id",name:"#"},{prop:"ref",name:"Ref"},{prop:"name",name:"Name"},{prop:"buying_price",name:"Buying Price"},{prop:"selling_price",name:"Selling Price"},{prop:"quantity",name:"Qty"},{prop:"created_at",name:"Created at"},{prop:"actions",name:"Actions"}]}},computed:{products(){return this.$store.getters["notification/notifications"]["productStockAlert"]||[]},fetched(){return this.$store.getters["notification/fetched"]}}};const Yw=(0,d.Z)(Hw,[["render",mw]]);var Kw=Yw,Zw={components:{StockAlertView:Kw,ReportedDelivery:pw,ReportedConfirmation:nw},data(){return{tab:1,fullTabs:[{id:1,name:"Stock Alert",component:"StockAlertView",permissions:["admin"]},{id:2,name:"Deliveries",component:"ReportedDelivery",permissions:["admin..","delivery"]},{id:3,name:"Confirmations",component:"ReportedConfirmation",permissions:["admin..","agente"]}]}},computed:{tabs(){return this.fullTabs.filter((t=>t.permissions.includes(this.user.role)))},tabName(){return this.$route.params.tab},user(){return this.$store.getters["user/user"]}},watch:{tabName(){this.handleChange()}},methods:{handleChange(){switch(this.tabName){case"stock":this.tab=1;break;case"delivery":this.tab=2;break;case"confirmation":this.tab=3;break;default:this.tab=this.tabs[0].id||1;break}}},mounted(){this.handleChange()}};const Qw=(0,d.Z)(Zw,[["render",Yl]]);var Gw=Qw,Bw={path:"/",name:"home",component:ii,meta:{module:"dashboard"},children:[{path:"",name:"dashboard",component:fl,meta:{module:"dashboard",title:"Dashboard",gate:"all"}},{path:"/notifications/:tab",name:"notifications",component:Gw,meta:{module:"notification",title:"Notifications",gate:"all"}},{path:"/settings",name:"settings",component:Nl,meta:{module:"settings",title:"Settings",gate:"all"}}]};const Jw={class:"mb-5 tw-flex tw-justify-between tw-items-center"},Xw=(0,a._)("div",null,[(0,a._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Product List"),(0,a._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage your products")],-1),tu={key:0},eu=(0,a._)("span",{class:"text-white"}," Add Product ",-1),su={key:0},iu={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},au={class:"mb-5 tw-flex"},ru={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},lu={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},ou={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},nu=(0,a._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Date",-1),du={class:"tw-relative"},cu={class:""};function wu(t,e,s,r,l,o){const n=(0,a.up)("LoadingAnimation"),d=(0,a.up)("ProductsTable");return(0,a.wg)(),(0,a.iD)("div",{key:o.products.length},[(0,a._)("div",Jw,[Xw,t.$can("create_product")?((0,a.wg)(),(0,a.iD)("div",tu,[(0,a.Wm)(G.T,{color:"primary-color",link:"",to:{name:"product/add"},variant:"flat",class:"text-capitalize"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{icon:"mdi-plus",class:"mr-2 text-white"}),eu])),_:1})])):(0,a.kq)("",!0)]),o.fetched?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",su,[(0,a.Wm)(n)])),o.fetched?((0,a.wg)(),(0,a.iD)("div",iu,[(0,a._)("div",au,[(0,a.Wm)(G.T,{onClick:e[0]||(e[0]=t=>l.showFilters=!l.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white",size:"xx-large"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,a._)("div",ru,[(0,a.Wm)(Kt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[i.nr,l.search]])])]),(0,a._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":l.showFilters}])},[(0,a._)("div",lu,[(0,a._)("div",ou,[nu,(0,a._)("div",du,[(0,a.wy)((0,a._)("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=t=>l.date=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},null,512),[[i.nr,l.date]])])])])],2),(0,a._)("div",cu,[(0,a.Wm)(d,{columns:l.columns,products:o.filteredProducts},null,8,["columns","products"])])])):(0,a.kq)("",!0)])}var uu={components:{ProductsTable:Mw},data(){return{localUrl:q,confirmations:Ko,showFilters:!1,date:null,search:"",columns:[{prop:"id",name:"#"},{prop:"ref",name:"Ref"},{prop:"name",name:"Name"},{prop:"buying_price",name:"Buying Price"},{prop:"selling_price",name:"Selling Price"},{prop:"quantity",name:"Qty"},{prop:"created_at",name:"Created at"},{prop:"actions",name:"Actions"}]}},computed:{products(){return this.$store.getters["product/products"]},fetched(){return this.$store.getters["product/fetched"]},filteredProducts(){const t=this.date;return this.products.filter((e=>(!t||e?.created_at.split("T")[0]===t)&&!!(e.ref.toLowerCase().includes(this.search.toLowerCase())||e.name.toLowerCase().includes(this.search.toLowerCase())||e.description.toLowerCase().includes(this.search.toLowerCase()))))}},methods:{getProducts(){ti.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))}},mounted(){this.fetched||this.getProducts()}};const pu=(0,d.Z)(uu,[["render",wu]]);var mu=pu,hu=s(240),gu=s(4842);const fu=(0,a._)("div",{class:"mb-5"},[(0,a._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Add Product "),(0,a._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Create new product")],-1),vu={key:0},yu={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},_u={class:"tw-w-full"},xu=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Product Name ",-1),bu={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},ku={class:"tw-w-full"},Cu=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reference",-1),Du={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Su={class:"tw-w-full"},zu={class:"mb-1 text-body-2 tw-text-zinc-700"},Uu={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Lu={class:"mb-1 text-body-2 tw-text-zinc-700"},Au={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Pu=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Description ",-1),Wu={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Eu={class:"tw-w-full tw-flex tw-gap-10 tw-items-center"},$u=(0,a._)("span",null,"Add Variants: ",-1),Tu={class:"tw-h-fit tw-mb-"},Ou=(0,a._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Warehouse",-1),Vu={class:"tw-relative"},Ru=(0,a._)("option",{value:0},"Select",-1),qu=["value"],Fu={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Iu={key:0},Nu={class:"md:tw-col-span-3 tw-col-span-12"},ju=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),Mu={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Hu={class:"md:tw-col-span-3 tw-col-span-12"},Yu=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Stock Alert",-1),Ku={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Zu={key:1},Qu={class:"tw-grid tw-grid-cols-12 md:tw-gap-3"},Gu={class:"md:tw-col-span-3 tw-col-span-12"},Bu=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Size",-1),Ju={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Xu={class:"md:tw-col-span-3 tw-col-span-12"},tp=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Color",-1),ep={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},sp={class:"md:tw-col-span-3 tw-col-span-12"},ip=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),ap=(0,a._)("div",{class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},null,-1),rp={class:"md:tw-col-span-3 tw-col-span-12"},lp=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Stock Alert",-1),op={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},np={class:"tw-col-span-12 tw-flex tw-justify-end"},dp=["disabled"],cp=(0,a._)("span",{class:"tw-text-white"},"Add",-1),wp={class:""},up={class:"tw-flex tw-justify-between tw-items-center tw-mt-5"},pp=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Variants",-1),mp={class:"mb-1 text-body-2 tw-text-zinc-700"},hp={key:1,class:"tw-max-w-full tw-overflow-x-auto"},gp={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},fp={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},vp={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},yp={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},_p={class:"tw-px-6 tw-py-2"},xp={class:"tw-px-6 tw-py-2"},bp={class:"tw-px-6 tw-py-2"},kp={class:"tw-flex tw-items-center tw-px-6 tw-py-2 tw-space-x-3"},Cp=(0,a._)("h1",null,"Deliveries",-1),Dp={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},Sp=(0,a._)("span",{class:"text-white text-capitalize"},"Cancel",-1),zp=(0,a._)("span",{class:"text-white text-capitalize"},"Create",-1);function Up(t,e,s,r,l,o){const n=(0,a.up)("LoadingAnimation"),d=(0,a.up)("VariantActions");return(0,a.wg)(),(0,a.iD)("div",null,[fu,l.isLoaded?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",vu,[(0,a.Wm)(n)])),l.isLoaded?((0,a.wg)(),(0,a.iD)("div",yu,[(0,a._)("div",null,[(0,a.Wm)(ri.o,null,{default:(0,a.w5)((()=>[(0,a.Wm)(li.D,{cols:"12",md:"6"},{default:(0,a.w5)((()=>[(0,a.Wm)(ri.o,null,{default:(0,a.w5)((()=>[(0,a.Wm)(li.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,a.w5)((()=>[(0,a._)("div",_u,[xu,(0,a.Wm)(X.hw,{error:!l.formStatus.name.valid,onKeyup:e[0]||(e[0]=t=>o.resetError("name")),"hide-details":!0,modelValue:l.product.name,"onUpdate:modelValue":e[1]||(e[1]=t=>l.product.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,a._)("div",bu,(0,Q.zw)(l.formStatus.name.message),1)])])),_:1}),(0,a.Wm)(li.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,a.w5)((()=>[(0,a._)("div",ku,[Cu,(0,a.Wm)(X.hw,{error:!l.formStatus.reference.valid,onKeyup:e[2]||(e[2]=t=>o.resetError("reference")),"hide-details":!0,modelValue:l.product.reference,"onUpdate:modelValue":e[3]||(e[3]=t=>l.product.reference=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,a._)("div",Du,(0,Q.zw)(l.formStatus.reference.message),1)])])),_:1}),(0,a.Wm)(li.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,a.w5)((()=>[(0,a._)("div",Su,[(0,a._)("div",zu," Buying Price ("+(0,Q.zw)(l.currency)+") ",1),(0,a.Wm)(X.hw,{type:"number",onChange:o.handleBuyingPriceChange,error:!l.formStatus.buyingPrice.valid,onKeyup:e[4]||(e[4]=t=>o.resetError("buyingPrice")),"hide-details":!0,modelValue:l.product.buyingPrice,"onUpdate:modelValue":e[5]||(e[5]=t=>l.product.buyingPrice=t),"clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,a._)("div",Uu,(0,Q.zw)(l.formStatus.buyingPrice.message),1)])])),_:1}),(0,a.Wm)(li.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a._)("div",Lu," Selling Price ("+(0,Q.zw)(l.currency)+") ",1),(0,a.Wm)(X.hw,{type:"number",onChange:o.handleSellingPriceChange,error:!l.formStatus.sellingPrice.valid,onKeyup:e[6]||(e[6]=t=>o.resetError("sellingPrice")),"hide-details":!0,modelValue:l.product.sellingPrice,"onUpdate:modelValue":e[7]||(e[7]=t=>l.product.sellingPrice=t),"clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,a._)("div",Au,(0,Q.zw)(l.formStatus.sellingPrice.message),1)])])),_:1}),(0,a.Wm)(li.D,{class:"!tw-py-2"},{default:(0,a.w5)((()=>[(0,a._)("div",null,[Pu,(0,a.Wm)(gu.z,{error:!l.formStatus.description.valid,onKeyup:e[8]||(e[8]=t=>o.resetError("description")),"hide-details":!0,modelValue:l.product.description,"onUpdate:modelValue":e[9]||(e[9]=t=>l.product.description=t),variant:"outlined",density:"compact",color:"primary-color"},null,8,["error","modelValue"]),(0,a._)("div",Wu,(0,Q.zw)(l.formStatus.description.message),1)])])),_:1}),(0,a.Wm)(li.D,{class:"!tw-py-0",cols:"12"},{default:(0,a.w5)((()=>[(0,a._)("div",Eu,[$u,(0,a.Wm)(vl.G,{modelValue:l.addVariants,"onUpdate:modelValue":e[10]||(e[10]=t=>l.addVariants=t),color:"primary-color","hide-details":!0},null,8,["modelValue"])])])),_:1})])),_:1})])),_:1}),(0,a.Wm)(li.D,{cols:"12",md:"6",class:"tw-border-l tw-border-r-neutral-700 tw-py-2"},{default:(0,a.w5)((()=>[(0,a._)("div",Tu,[Ou,(0,a._)("div",Vu,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[11]||(e[11]=t=>l.warehouse=t),onChange:e[12]||(e[12]=t=>o.resetError("warehouse")),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-400 tw-outline-0 tw-text-sm"},[Ru,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.warehouses,(t=>((0,a.wg)(),(0,a.iD)("option",{key:t.id,value:t.id},(0,Q.zw)(t.name),9,qu)))),128))],544),[[i.bM,l.warehouse]]),(0,a.Wm)(J.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-chevron-down")])),_:1})]),(0,a._)("div",Fu,(0,Q.zw)(l.formStatus.warehouse.message),1)]),l.addVariants?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",Iu,[(0,a._)("div",Nu,[ju,(0,a.Wm)(X.hw,{onChange:o.handleQuantityChange,type:"number",error:!l.formStatus.quantity.valid,onKeyup:e[13]||(e[13]=t=>o.resetError("quantity")),"hide-details":!0,modelValue:l.quantity,"onUpdate:modelValue":e[14]||(e[14]=t=>l.quantity=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,a._)("div",Mu,(0,Q.zw)(l.formStatus.quantity.message),1)]),(0,a._)("div",Hu,[Yu,(0,a.Wm)(X.hw,{onChange:o.handleStockAlertChange,type:"number",error:!l.formStatus.stockAlert.valid,onKeyup:e[15]||(e[15]=t=>o.resetError("stockAlert")),"hide-details":!0,modelValue:l.stockAlert,"onUpdate:modelValue":e[16]||(e[16]=t=>l.stockAlert=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,a._)("div",Ku,(0,Q.zw)(l.formStatus.stockAlert.message),1)])])),l.addVariants?((0,a.wg)(),(0,a.iD)("div",Zu,[(0,a._)("div",Qu,[(0,a._)("div",Gu,[Bu,(0,a.Wm)(X.hw,{error:!l.formStatus.size.valid,onKeyup:e[17]||(e[17]=t=>o.resetError("size")),"hide-details":!0,modelValue:l.size,"onUpdate:modelValue":e[18]||(e[18]=t=>l.size=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,a._)("div",Ju,(0,Q.zw)(l.formStatus.size.message),1)]),(0,a._)("div",Xu,[tp,(0,a.Wm)(X.hw,{error:!l.formStatus.color.valid,onKeyup:e[19]||(e[19]=t=>o.resetError("color")),"hide-details":!0,modelValue:l.color,"onUpdate:modelValue":e[20]||(e[20]=t=>l.color=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,a._)("div",ep,(0,Q.zw)(l.formStatus.color.message),1)]),(0,a._)("div",sp,[ip,(0,a.Wm)(X.hw,{onChange:o.handleQuantityChange,type:"number",error:!l.formStatus.quantity.valid&&!1,onKeyup:e[21]||(e[21]=t=>o.resetError("quantity")),"hide-details":!0,modelValue:l.quantity,"onUpdate:modelValue":e[22]||(e[22]=t=>l.quantity=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),ap]),(0,a._)("div",rp,[lp,(0,a.Wm)(X.hw,{onChange:o.handleStockAlertChange,type:"number",error:!l.formStatus.stockAlert.valid,onKeyup:e[23]||(e[23]=t=>o.resetError("stockAlert")),"hide-details":!0,modelValue:l.stockAlert,"onUpdate:modelValue":e[24]||(e[24]=t=>l.stockAlert=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,a._)("div",op,(0,Q.zw)(l.formStatus.stockAlert.message),1)])]),(0,a._)("div",null,[(0,a._)("div",np,[(0,a._)("button",{disabled:!l.quantity,class:(0,Q.C_)([{"bg-primary-color":l.quantity},"tw-bg-neutral-400 tw-py-1 tw-px-4 tw-flex tw-items-center tw-gap-1 tw-text-white tw-rounded-md"]),onClick:e[25]||(e[25]=(...t)=>o.addVariant&&o.addVariant(...t))},[(0,a.Wm)(J.t,{size:"small",color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-plus")])),_:1}),cp],10,dp)])]),(0,a._)("div",wp,[(0,a._)("div",up,[pp,(0,a._)("div",mp," Quantity Total: "+(0,Q.zw)(o.qtyTotal),1)]),0==l.variants.length?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,Q.C_)([{"tw-bg-neutral-100 tw-text-neutral-500":l.formStatus.variants.valid,"tw-bg-red-100 tw-text-red-500":!l.formStatus.variants.valid},"tw-text-center tw-mb-6 tw-w-full tw-py-3 tw-rounded-lg"])},(0,Q.zw)(l.formStatus.variants.valid?"No Variants yet":l.formStatus.variants.message),3)):((0,a.wg)(),(0,a.iD)("div",hp,[(0,a._)("table",gp,[(0,a._)("thead",fp,[(0,a._)("tr",null,[((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(["size","color","qty","stockAlert","actions"],(t=>(0,a._)("th",{class:(0,Q.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,a._)("div",vp,(0,Q.zw)(t),1)],2))),64))])]),(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.variants,(t=>((0,a.wg)(),(0,a.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,a._)("th",yp,(0,Q.zw)(t.size),1),(0,a._)("td",_p,(0,Q.zw)(t.color),1),(0,a._)("td",xp,(0,Q.zw)(t.quantity),1),(0,a._)("td",bp,(0,Q.zw)(t.stockAlert),1),(0,a._)("td",kp,[(0,a._)("div",null,[(0,a.Wm)(d,{onDelete:o.deleteVariant,variant:t},null,8,["onDelete","variant"])])])])))),128))])])]))])])):(0,a.kq)("",!0)])),_:1})])),_:1}),(0,a.Wm)(ri.o,null,{default:(0,a.w5)((()=>[(0,a.Wm)(li.D,null,{default:(0,a.w5)((()=>[(0,a._)("div",null,[Cp,(0,a._)("div",null,[(0,a.Wm)(hu.r,{modelValue:l.selectedDeliveries,"onUpdate:modelValue":e[26]||(e[26]=t=>l.selectedDeliveries=t),items:o.deliveries,"item-title":"fullname","item-value":"id",chips:"",multiple:"",variant:"outlined"},null,8,["modelValue","items"])])])])),_:1})])),_:1})]),(0,a._)("div",Dp,[(0,a.Wm)(G.T,{color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,a.w5)((()=>[Sp])),_:1}),(0,a.Wm)(G.T,{onClick:o.create,loading:l.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,a.w5)((()=>[zp])),_:1},8,["onClick","loading"])])])):(0,a.kq)("",!0)])}function Lp(t,e,s,i,r,l){const o=(0,a.up)("popup"),n=(0,a.up)("UpdateProductVariant"),d=(0,a.up)("popup-full");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(G.T,{onClick:e[0]||(e[0]=t=>r.visible=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-pencil-outline")])),_:1})])),_:1}),(0,a.Wm)(G.T,{onClick:e[1]||(e[1]=t=>r.deletePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-delete-outline")])),_:1})])),_:1}),(0,a.Wm)(o,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this product?</p> You won't be able to revert this!",visible:r.deletePopup,onResolved:l.handleDelete},null,8,["visible","onResolved"]),(0,a.Wm)(d,{visible:r.visible,onCancel:l.cancel},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{onUpdate:l.update,variant:s.variant,onCancel:l.cancel},null,8,["onUpdate","variant","onCancel"])])),_:1},8,["visible","onCancel"])])}const Ap={class:"md:tw-w-[400px] tw-w-[95%] tw-bg-white tw-rounded-lg tw-p-5 tw-mx-auto"},Pp={class:"tw-grid tw-grid-cols-12 md:tw-gap-3"},Wp={class:"tw-col-span-12"},Ep=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Size",-1),$p={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Tp={class:"tw-col-span-12"},Op=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Color",-1),Vp={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Rp={class:"tw-col-span-12"},qp=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),Fp={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Ip={class:"tw-col-span-12"},Np=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Stock Alert",-1),jp={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Mp={class:"tw-col-span-12 tw-flex tw-gap-2 tw-justify-end"},Hp=(0,a._)("span",{class:"tw-text-white"},"Cancel",-1),Yp=[Hp],Kp=["disabled"],Zp=(0,a._)("span",{class:"tw-text-white"},"Save",-1),Qp=[Zp];function Gp(t,e,s,i,r,l){return(0,a.wg)(),(0,a.iD)("div",Ap,[(0,a._)("div",Pp,[(0,a._)("div",Wp,[Ep,(0,a.Wm)(X.hw,{error:!r.formStatus.size.valid,onKeyup:e[0]||(e[0]=t=>l.resetError("size")),"hide-details":!0,modelValue:r.size,"onUpdate:modelValue":e[1]||(e[1]=t=>r.size=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,a._)("div",$p,(0,Q.zw)(r.formStatus.size.message),1)]),(0,a._)("div",Tp,[Op,(0,a.Wm)(X.hw,{error:!r.formStatus.color.valid,onKeyup:e[2]||(e[2]=t=>l.resetError("color")),"hide-details":!0,modelValue:r.color,"onUpdate:modelValue":e[3]||(e[3]=t=>r.color=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,a._)("div",Vp,(0,Q.zw)(r.formStatus.color.message),1)]),(0,a._)("div",Rp,[qp,(0,a.Wm)(X.hw,{onChange:l.handleQuantityChange,type:"number",error:!r.formStatus.quantity.valid,onKeyup:e[4]||(e[4]=t=>l.resetError("quantity")),"hide-details":!0,modelValue:r.quantity,"onUpdate:modelValue":e[5]||(e[5]=t=>r.quantity=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,a._)("div",Fp,(0,Q.zw)(r.formStatus.quantity.message),1)]),(0,a._)("div",Ip,[Np,(0,a.Wm)(X.hw,{onChange:l.handleStockAlertChange,type:"number",error:!r.formStatus.stockAlert.valid,onKeyup:e[6]||(e[6]=t=>l.resetError("stockAlert")),"hide-details":!0,modelValue:r.stockAlert,"onUpdate:modelValue":e[7]||(e[7]=t=>r.stockAlert=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,a._)("div",jp,(0,Q.zw)(r.formStatus.stockAlert.message),1)])]),(0,a._)("div",null,[(0,a._)("div",Mp,[(0,a._)("button",{onClick:e[8]||(e[8]=(...t)=>l.cancel&&l.cancel(...t)),class:"tw-bg-neutral-400 tw-py-1 tw-px-4 tw-flex tw-items-center tw-gap-1 tw-text-white tw-rounded-md"},Yp),(0,a._)("button",{disabled:!r.size||!r.color||!r.quantity,class:(0,Q.C_)([{"tw-bg-orange-500":r.size&&r.color&&r.quantity},"tw-bg-neutral-400 tw-py-1 tw-px-4 tw-flex tw-items-center tw-gap-1 tw-text-white tw-rounded-md"]),onClick:e[9]||(e[9]=(...t)=>l.updateVariant&&l.updateVariant(...t))},Qp,10,Kp)])])])}var Bp={props:["variant"],data(){return{size:"",color:"",quantity:0,stockAlert:0,newVariant:null,formStatus:{quantity:{valid:!0,message:""},size:{valid:!0,message:""},color:{valid:!0,message:""},stockAlert:{valid:!0,message:""}}}},methods:{updateVariant(){console.log("updated");const t=this.quantity-this.newVariant.quantity;this.newVariant.size=this.size.toLocaleUpperCase(),this.newVariant.color=this.color.toLocaleUpperCase(),this.newVariant.quantity=this.quantity,this.newVariant.stockAlert=this.stockAlert,this.newVariant.available_quantity=parseInt(this.newVariant.available_quantity)+parseInt(t),this.cancel()},handleQuantityChange(){this.quantity<=0&&(this.quantity=0)},handleStockAlertChange(){this.stockAlert<=0&&(this.stockAlert=0)},cancel(){this.$emit("cancel")},resetError(t){this.formStatus[t]={valid:!0,message:""}}},mounted(){this.size=this.variant.size,this.color=this.variant.color,this.quantity=this.variant.quantity,this.stockAlert=this.variant.stockAlert,this.newVariant=this.variant}};const Jp=(0,d.Z)(Bp,[["render",Gp]]);var Xp=Jp,tm={components:{UpdateProductVariant:Xp},props:["variant"],data(){return{visible:!1,deletePopup:!1}},methods:{cancel(){this.visible=!1},update(t){console.log("from actions: ",t)},handleDelete(t){t&&this.$emit("delete",this.variant.id),this.deletePopup=!1}}};const em=(0,d.Z)(tm,[["render",Lp]]);var sm=em;class im{async create(t){return await H.getCookie(),j.post("api/warehouses/new",{name:t.name})}async update(t,e){return await H.getCookie(),j.post("api/warehouses/update/"+t,{name:e.name})}async all(){return await H.getCookie(),j.get("api/warehouses")}async getWarehouse(t){return await H.getCookie(),j.get("api/warehouses/"+t)}async delete(t){return await H.getCookie(),j["delete"]("api/warehouses/delete/"+t)}}var am=new im,rm={components:{VariantActions:sm},data(){return{currency:I,isLoading:!1,isLoaded:!1,addVariants:!1,variantId:1,variants:[],color:"",size:"",quantity:0,warehouse:0,stockAlert:0,product:{name:"",reference:"",buyingPrice:0,sellingPrice:0,description:""},selectedDeliveries:[],formStatus:{name:{valid:!0,message:""},reference:{valid:!0,message:""},buyingPrice:{valid:!0,message:""},sellingPrice:{valid:!0,message:""},quantity:{valid:!0,message:""},size:{valid:!0,message:""},color:{valid:!0,message:""},stockAlert:{valid:!0,message:""},description:{valid:!0,message:""},warehouse:{valid:!0,message:""},variants:{valid:!0,message:""}}}},computed:{qtyTotal(){let t=0;return this.variants.forEach((e=>t+=parseInt(e.quantity))),t},warehouses(){return this.$store.getters["warehouse/warehouses"]},users(){return this.$store.getters["user/users"]},deliveries(){return this.users.filter((t=>"delivery"==t.role?.name)).map((t=>({...t,fullname:t.firstname+" "+t.lastname})))}},methods:{create(){if(!this.validate())return!1;this.isLoading=!0;let t=this.product;if(t.addVariants=this.addVariants,t.selectedDeliveries=this.selectedDeliveries.map((t=>({delivery_id:t}))),this.addVariants)t.variants=this.variants;else{const e=[{id:this.variantId,color:null,size:null,quantity:this.quantity,warehouse_id:this.warehouse,stockAlert:this.stockAlert}];t.variants=e}ti.create(t).then((t=>{"PRODUCT_CREATED"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.product={name:"",reference:"",buyingPrice:0,sellingPrice:0,description:""},this.selectedDeliveries=[],this.variants=[],this.$store.dispatch("addProduct",t.data.data.product)),"VALIDATION_ERROR"==t.data.code&&this.$alert({type:"warning",title:t.data.errors.ref})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.name=xt(this.product.name,"Product name"),this.formStatus.reference=xt(this.product.reference,"Reference"),this.formStatus.buyingPrice=xt(this.product.buyingPrice,"Buying price"),this.formStatus.quantity=xt(this.quantity,"Quantity"),this.formStatus.sellingPrice=xt(this.product.sellingPrice,"Selling price"),this.formStatus.description=xt(this.product.description,"Description"),this.formStatus.variants=Ct(this.variants),this.addVariants||(this.formStatus.warehouse={valid:0!=this.warehouse,message:0!=this.warehouse?"":"Please select a warehouse"}),this.formStatus.name.valid&&this.formStatus.buyingPrice.valid&&this.formStatus.reference.valid&&this.formStatus.sellingPrice&&this.formStatus.description.valid&&(!this.addVariants||this.formStatus.variants.valid)&&(!!this.addVariants||this.formStatus.quantity.valid)&&(!!this.addVariants||this.formStatus.warehouse.valid)},addVariant(){if(this.formStatus.warehouse={valid:0!=this.warehouse,message:0!=this.warehouse?"":"Please select a warehouse"},!this.formStatus.warehouse.valid)return!1;const t={id:this.variantId,color:this.color.toUpperCase(),size:this.size.toUpperCase(),quantity:this.quantity,warehouse_id:this.warehouse,stockAlert:this.stockAlert};this.variants.push(t),this.variantId++,this.stockAlert=0,this.color="",this.size="",this.quantity=0},deleteVariant(t){this.variants=this.variants.filter((e=>e.id!==t))},handleQuantityChange(){this.quantity<=0&&(this.quantity=0)},handleStockAlertChange(){this.stockAlert<=0&&(this.stockAlert=0)},handleSellingPriceChange(){this.product.sellingPrice<=0&&(this.product.sellingPrice=0)},handleBuyingPriceChange(){this.product.buyingPrice<=0&&(this.product.buyingPrice=0)},getWarhouses(){return this.isLoaded=!1,am.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("warehouse/setWarehouses",t.data.data.warehouses),this.isLoaded=!0)}),this.$handleApiError)}},mounted(){this.getWarhouses()}};const lm=(0,d.Z)(rm,[["render",Up]]);var om=lm;const nm=(0,a._)("div",{class:"mb-5"},[(0,a._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Update Product "),(0,a._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Update product informations")],-1),dm={key:0},cm={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},wm={class:"tw-flex tw-gap-2 tw-text-neutral-800 tw-items-center tw-mb-5"},um={class:"tw-block tw-py-1 tw-px-2 tw-rounded-md text-primary-color"},pm={class:"tw-w-full"},mm=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Product Name ",-1),hm={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},gm={class:"tw-w-full"},fm=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reference",-1),vm={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},ym={class:"tw-w-full"},_m={class:"mb-1 text-body-2 tw-text-zinc-700"},xm={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},bm={class:"mb-1 text-body-2 tw-text-zinc-700"},km={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Cm=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Description ",-1),Dm={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Sm={class:"tw-h-fit tw-mb-"},zm=(0,a._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Warehouse",-1),Um={class:"tw-relative"},Lm=(0,a._)("option",{value:0},"Select",-1),Am=["value"],Pm={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Wm={class:"tw-grid tw-grid-cols-12 md:tw-gap-3"},Em={class:"md:tw-col-span-3 tw-col-span-12"},$m=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Size",-1),Tm={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Om={class:"md:tw-col-span-3 tw-col-span-12"},Vm=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Color",-1),Rm={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},qm={class:"md:tw-col-span-3 tw-col-span-12"},Fm=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),Im={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Nm={class:"md:tw-col-span-3 tw-col-span-12"},jm=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Stock Alert ",-1),Mm={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Hm={class:"tw-col-span-12 tw-flex tw-justify-end"},Ym=["disabled"],Km=(0,a._)("span",{class:"tw-text-white"},"Add",-1),Zm={class:""},Qm={class:"tw-flex tw-justify-between tw-items-center tw-mt-5"},Gm=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Variants",-1),Bm={class:"mb-1 text-body-2 tw-text-zinc-700"},Jm={key:1,class:"tw-max-w-full tw-overflow-x-auto"},Xm={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},th={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},eh={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},sh={class:"tw-px-6 tw-py-2 tw-capitalize"},ih={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},ah={class:"tw-px-6 tw-py-2"},rh={class:"tw-px-6 tw-py-2"},lh={class:"tw-flex tw-flex-col"},oh={key:0,class:"tw-text-xs tw-text-green-500"},nh={class:"tw-px-6 tw-py-2"},dh={class:"tw-flex tw-items-center tw-px-6 tw-py-2 tw-space-x-3"},ch=(0,a._)("h1",null,"Deliveries",-1),wh={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},uh=(0,a._)("span",{class:"text-white text-capitalize"},"Cancel",-1),ph=(0,a._)("span",{class:"text-white text-capitalize"},"Update",-1);function mh(t,e,s,r,l,o){const n=(0,a.up)("LoadingAnimation"),d=(0,a.up)("UpdateVariantActions");return(0,a.wg)(),(0,a.iD)("div",null,[nm,l.isLoaded?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",dm,[(0,a.Wm)(n)])),l.isLoaded?((0,a.wg)(),(0,a.iD)("div",cm,[(0,a._)("div",wm,[(0,a.Uk)(" Product ID: "),(0,a._)("span",um,(0,Q.zw)(o.id),1)]),(0,a._)("div",null,[(0,a.Wm)(ri.o,null,{default:(0,a.w5)((()=>[(0,a.Wm)(li.D,{cols:"12",md:"12"},{default:(0,a.w5)((()=>[(0,a.Wm)(ri.o,null,{default:(0,a.w5)((()=>[(0,a.Wm)(li.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,a.w5)((()=>[(0,a._)("div",pm,[mm,(0,a.Wm)(X.hw,{error:!l.formStatus.name.valid,onKeyup:e[0]||(e[0]=t=>o.resetError("name")),"hide-details":!0,modelValue:l.product.name,"onUpdate:modelValue":e[1]||(e[1]=t=>l.product.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,a._)("div",hm,(0,Q.zw)(l.formStatus.name.message),1)])])),_:1}),(0,a.Wm)(li.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,a.w5)((()=>[(0,a._)("div",gm,[fm,(0,a.Wm)(X.hw,{error:!l.formStatus.quantity.valid,onKeyup:e[2]||(e[2]=t=>o.resetError("quantity")),"hide-details":!0,modelValue:l.product.reference,"onUpdate:modelValue":e[3]||(e[3]=t=>l.product.reference=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,a._)("div",vm,(0,Q.zw)(l.formStatus.quantity.message),1)])])),_:1}),(0,a.Wm)(li.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,a.w5)((()=>[(0,a._)("div",ym,[(0,a._)("div",_m," Buying Price ("+(0,Q.zw)(l.currency)+") ",1),(0,a.Wm)(X.hw,{type:"number",onChange:o.handleBuyingPriceChange,error:!l.formStatus.buyingPrice.valid,onKeyup:e[4]||(e[4]=t=>o.resetError("buyingPrice")),"hide-details":!0,modelValue:l.product.buyingPrice,"onUpdate:modelValue":e[5]||(e[5]=t=>l.product.buyingPrice=t),"clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,a._)("div",xm,(0,Q.zw)(l.formStatus.buyingPrice.message),1)])])),_:1}),(0,a.Wm)(li.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a._)("div",bm," Selling Price ("+(0,Q.zw)(l.currency)+") ",1),(0,a.Wm)(X.hw,{type:"number",onChange:o.handleSellingPriceChange,error:!l.formStatus.sellingPrice.valid,onKeyup:e[6]||(e[6]=t=>o.resetError("sellingPrice")),"hide-details":!0,modelValue:l.product.sellingPrice,"onUpdate:modelValue":e[7]||(e[7]=t=>l.product.sellingPrice=t),"clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,a._)("div",km,(0,Q.zw)(l.formStatus.sellingPrice.message),1)])])),_:1}),(0,a.Wm)(li.D,{class:"!tw-py-2"},{default:(0,a.w5)((()=>[(0,a._)("div",null,[Cm,(0,a.Wm)(gu.z,{error:!l.formStatus.description.valid,onKeyup:e[8]||(e[8]=t=>o.resetError("description")),"hide-details":!0,modelValue:l.product.description,"onUpdate:modelValue":e[9]||(e[9]=t=>l.product.description=t),variant:"outlined",density:"compact",color:"primary-color"},null,8,["error","modelValue"]),(0,a._)("div",Dm,(0,Q.zw)(l.formStatus.description.message),1)])])),_:1})])),_:1})])),_:1}),(0,a.Wm)(li.D,{cols:"12",md:"12",class:"tw-border-t tw-border-t-neutral-300 tw-py-2"},{default:(0,a.w5)((()=>[(0,a._)("div",Sm,[zm,(0,a._)("div",Um,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[10]||(e[10]=t=>l.warehouse=t),onChange:e[11]||(e[11]=t=>o.resetError("warehouse")),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-400 tw-outline-0 tw-text-sm"},[Lm,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.warehouses,(t=>((0,a.wg)(),(0,a.iD)("option",{key:t.id,value:t.id},(0,Q.zw)(t.name),9,Am)))),128))],544),[[i.bM,l.warehouse]]),(0,a.Wm)(J.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-chevron-down")])),_:1})]),(0,a._)("div",Pm,(0,Q.zw)(l.formStatus.warehouse.message),1)]),(0,a._)("div",null,[(0,a._)("div",Wm,[(0,a._)("div",Em,[$m,(0,a.Wm)(X.hw,{error:!l.formStatus.size.valid,onKeyup:e[12]||(e[12]=t=>o.resetError("size")),"hide-details":!0,modelValue:l.size,"onUpdate:modelValue":e[13]||(e[13]=t=>l.size=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,a._)("div",Tm,(0,Q.zw)(l.formStatus.size.message),1)]),(0,a._)("div",Om,[Vm,(0,a.Wm)(X.hw,{error:!l.formStatus.color.valid,onKeyup:e[14]||(e[14]=t=>o.resetError("color")),"hide-details":!0,modelValue:l.color,"onUpdate:modelValue":e[15]||(e[15]=t=>l.color=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,a._)("div",Rm,(0,Q.zw)(l.formStatus.color.message),1)]),(0,a._)("div",qm,[Fm,(0,a.Wm)(X.hw,{onChange:o.handleQuantityChange,type:"number",error:!l.formStatus.quantity.valid,onKeyup:e[16]||(e[16]=t=>o.resetError("quantity")),"hide-details":!0,modelValue:l.quantity,"onUpdate:modelValue":e[17]||(e[17]=t=>l.quantity=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,a._)("div",Im,(0,Q.zw)(l.formStatus.quantity.message),1)]),(0,a._)("div",Nm,[jm,(0,a.Wm)(X.hw,{onChange:o.handleStockAlertChange,type:"number",error:!l.formStatus.stockAlert.valid,onKeyup:e[18]||(e[18]=t=>o.resetError("stockAlert")),"hide-details":!0,modelValue:l.stockAlert,"onUpdate:modelValue":e[19]||(e[19]=t=>l.stockAlert=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,a._)("div",Mm,(0,Q.zw)(l.formStatus.stockAlert.message),1)])]),(0,a._)("div",null,[(0,a._)("div",Hm,[(0,a._)("button",{disabled:!l.quantity,class:(0,Q.C_)([{"bg-primary-color":l.quantity},"tw-bg-neutral-400 tw-py-1 tw-px-4 tw-flex tw-items-center tw-gap-1 tw-text-white tw-rounded-md"]),onClick:e[20]||(e[20]=(...t)=>o.addVariant&&o.addVariant(...t))},[(0,a.Wm)(J.t,{size:"small",color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-plus")])),_:1}),Km],10,Ym)])]),(0,a._)("div",Zm,[(0,a._)("div",Qm,[Gm,(0,a._)("div",Bm," Quantity Total: "+(0,Q.zw)(o.qtyTotal),1)]),0==l.variants.length?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,Q.C_)([{"tw-bg-neutral-100 tw-text-neutral-500":l.formStatus.variants.valid,"tw-bg-red-100 tw-text-red-500":!l.formStatus.variants.valid},"tw-text-center tw-mb-6 tw-w-full tw-py-3 tw-rounded-lg"])},(0,Q.zw)(l.formStatus.variants.valid?"No Variants yet":l.formStatus.variants.message),3)):((0,a.wg)(),(0,a.iD)("div",Jm,[(0,a._)("table",Xm,[(0,a._)("thead",th,[(0,a._)("tr",null,[((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(["warehouse","size","color","qty","Stock Alert","actions"],(t=>(0,a._)("th",{class:(0,Q.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,a._)("div",eh,(0,Q.zw)(t),1)],2))),64))])]),(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.variants,(t=>((0,a.wg)(),(0,a.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,a._)("td",sh,(0,Q.zw)(t.warehouse.name),1),(0,a._)("td",ih,(0,Q.zw)(t.size),1),(0,a._)("td",ah,(0,Q.zw)(t.color),1),(0,a._)("td",rh,[(0,a._)("div",lh,[(0,a._)("span",null,(0,Q.zw)(t.quantity),1),t.created_at?((0,a.wg)(),(0,a.iD)("span",oh,(0,Q.zw)(t.available_quantity),1)):(0,a.kq)("",!0)])]),(0,a._)("td",nh,(0,Q.zw)(t.stockAlert),1),(0,a._)("td",dh,[(0,a._)("div",null,[(0,a.Wm)(d,{onDelete:o.deleteVariant,variant:t},null,8,["onDelete","variant"])])])])))),128))])])]))])])])),_:1})])),_:1}),(0,a.Wm)(ri.o,null,{default:(0,a.w5)((()=>[(0,a.Wm)(li.D,null,{default:(0,a.w5)((()=>[(0,a._)("div",null,[ch,(0,a._)("div",null,[(0,a.Wm)(hu.r,{modelValue:l.selectedDeliveries,"onUpdate:modelValue":e[21]||(e[21]=t=>l.selectedDeliveries=t),items:o.deliveries,"item-title":"fullname","item-value":"id",chips:"",multiple:"",variant:"outlined"},null,8,["modelValue","items"])])])])),_:1})])),_:1})]),(0,a._)("div",wh,[(0,a.Wm)(G.T,{color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,a.w5)((()=>[uh])),_:1}),(0,a.Wm)(G.T,{onClick:o.update,loading:l.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,a.w5)((()=>[ph])),_:1},8,["onClick","loading"])])])):(0,a.kq)("",!0)])}const hh={class:"md:tw-w-[400px] tw-w-[95%] tw-bg-white tw-rounded-lg tw-p-5 tw-mx-auto"},gh={class:"tw-w-full"},fh=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Add quantity",-1),vh={class:"tw-col-span-12 tw-flex tw-gap-2 tw-justify-end tw-mt-3"},yh=(0,a._)("span",{class:"tw-text-white"},"Cancel",-1),_h=[yh],xh=["disabled"],bh=(0,a._)("span",{class:"tw-text-white"},"Add",-1),kh=[bh];function Ch(t,e,s,i,r,l){const o=(0,a.up)("popup"),n=(0,a.up)("UpdateProductVariant"),d=(0,a.up)("popup-full");return(0,a.wg)(),(0,a.iD)("div",null,[s.variant.created_at?((0,a.wg)(),(0,a.j4)(G.T,{key:0,onClick:e[0]||(e[0]=t=>r.visibleAdd=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-plus")])),_:1})])),_:1})):(0,a.kq)("",!0),void 0===s.variant.on_hold||s.variant.available_quantity==s.variant.quantity?((0,a.wg)(),(0,a.j4)(G.T,{key:1,onClick:e[1]||(e[1]=t=>r.deletePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,a.kq)("",!0),(0,a.Wm)(G.T,{onClick:e[2]||(e[2]=t=>r.visible=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-pencil-outline")])),_:1})])),_:1}),(0,a.Wm)(o,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this product?</p> You won't be able to revert this!",visible:r.deletePopup,onResolved:l.handleDelete},null,8,["visible","onResolved"]),(0,a.Wm)(d,{visible:r.visible,onCancel:l.cancel},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{onUpdate:l.update,variant:s.variant,onCancel:l.cancel},null,8,["onUpdate","variant","onCancel"])])),_:1},8,["visible","onCancel"]),(0,a.Wm)(d,{visible:r.visibleAdd,onCancel:l.cancelAdd},{default:(0,a.w5)((()=>[(0,a._)("div",hh,[(0,a._)("div",gh,[fh,(0,a.Wm)(X.hw,{"hide-details":!0,modelValue:r.quantity,"onUpdate:modelValue":e[3]||(e[3]=t=>r.quantity=t),clearable:"",type:"number","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["modelValue"])]),(0,a._)("div",vh,[(0,a._)("button",{onClick:e[4]||(e[4]=(...t)=>l.cancelAdd&&l.cancelAdd(...t)),class:"tw-bg-neutral-400 tw-py-1 tw-px-4 tw-flex tw-items-center tw-gap-1 tw-text-white tw-rounded-md"},_h),(0,a._)("button",{disabled:!r.quantity||0==r.quantity,class:(0,Q.C_)([{"!tw-bg-green-500":0!=r.quantity},"tw-bg-neutral-400 tw-py-1 tw-px-4 tw-flex tw-items-center tw-gap-1 tw-text-white tw-rounded-md"]),onClick:e[5]||(e[5]=(...t)=>l.addQuantity&&l.addQuantity(...t))},kh,10,xh)])])])),_:1},8,["visible","onCancel"])])}var Dh={components:{UpdateProductVariant:Xp},props:["variant"],data(){return{visible:!1,visibleAdd:!1,deletePopup:!1,quantity:1,newVariant:null}},methods:{cancel(){this.visible=!1},cancelAdd(){this.visibleAdd=!1},update(t){console.log("from actions: ",t)},addQuantity(){this.newVariant.quantity=parseInt(this.newVariant.quantity)+parseInt(this.quantity),this.newVariant.available_quantity=parseInt(this.newVariant.available_quantity)+parseInt(this.quantity),this.quantity=1,this.cancelAdd()},handleDelete(t){t&&this.$emit("delete",this.variant.id),this.deletePopup=!1}},mounted(){this.newVariant=this.variant}};const Sh=(0,d.Z)(Dh,[["render",Ch]]);var zh=Sh,Uh={components:{UpdateVariantActions:zh},data(){return{currency:I,isLoading:!1,isLoaded:!1,variantId:1,variants:[],color:"",size:"",quantity:0,stockAlert:0,warehouse:0,product:{name:"",reference:"",buyingPrice:0,sellingPrice:0,description:""},selectedDeliveries:[],formStatus:{name:{valid:!0,message:""},buyingPrice:{valid:!0,message:""},sellingPrice:{valid:!0,message:""},quantity:{valid:!0,message:""},size:{valid:!0,message:""},color:{valid:!0,message:""},stockAlert:{valid:!0,message:""},description:{valid:!0,message:""},variants:{valid:!0,message:""},warehouse:{valid:!0,message:""}}}},computed:{qtyTotal(){let t=0;return this.variants.forEach((e=>t+=parseInt(e.quantity))),t},id(){return this.$route.params.id},warehouses(){return this.$store.getters["warehouse/warehouses"]},users(){return this.$store.getters["user/users"]},deliveries(){return this.users.filter((t=>"delivery"==t.role?.name)).map((t=>({...t,fullname:t.firstname+" "+t.lastname})))}},methods:{update(){if(!this.validate())return!1;this.isLoading=!0;let t=this.product;t.variants=this.variants,t.selectedDeliveries=this.selectedDeliveries.map((t=>({delivery_id:t,product_id:this.id}))),ti.update(this.$route.params.id,t).then((t=>{"PRODUCT_UPDATED"==t.data.code&&this.$alert({type:"success",title:t.data.message}),"PRODUCT_NOT_UPDATED"==t.data.code&&this.$alert({type:"warning",title:t.data.message}),"QUANTITY_ERROR"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},resetError(t){this.formStatus[t]={valid:!0,message:""}},getLastVariantId(t){return Math.max(...t.map((t=>t.id)))+1},validate(){return this.formStatus.name=xt(this.product.name,"Product name"),this.formStatus.buyingPrice=xt(this.product.buyingPrice,"Buying price"),this.formStatus.sellingPrice=xt(this.product.sellingPrice,"Selling price"),this.formStatus.description=xt(this.product.description,"Description"),this.formStatus.variants=Ct(this.variants),this.formStatus.name.valid&&this.formStatus.buyingPrice.valid&&this.formStatus.sellingPrice&&this.formStatus.description.valid&&this.formStatus.variants.valid},addVariant(){if(0==this.warehouse)return this.$alert({type:"warning",title:"Select warehouse"}),!1;const t={id:this.variantId,color:this.color.toUpperCase(),size:this.size.toUpperCase(),quantity:this.quantity,warehouse_id:this.warehouse,warehouse:this.warehouses.find((t=>t.id==this.warehouse)),stockAlert:this.stockAlert};this.variants.push(t),this.variantId++,this.color="",this.size="",this.quantity=0,this.stockAlert=0},deleteVariant(t){this.variants=this.variants.filter((e=>e.id!==t))},handleQuantityChange(){this.quantity<=0&&(this.quantity=0)},handleStockAlertChange(){this.quantity<=0&&(this.quantity=0)},handleSellingPriceChange(){this.product.sellingPrice<=0&&(this.product.sellingPrice=0)},handleBuyingPriceChange(){this.product.buyingPrice<=0&&(this.product.buyingPrice=0)},getWarhouses(){return am.all().then((t=>("SUCCESS"==t.data.code&&this.$store.dispatch("warehouse/setWarehouses",t.data.data.warehouses),t)),this.$handleApiError)},getProduct(){return ti.getProduct(this.$route.params.id).then((t=>{if("SUCCESS"==t.data.code){const{variations:e,buying_price:s,selling_price:i,ref:a,name:r,description:l,deliveries:o}=t.data.data.products;return this.variants=e,this.product.buyingPrice=s,this.product.sellingPrice=i,this.product.name=r,this.product.reference=a,this.product.description=l,this.variantId=this.getLastVariantId(e),this.selectedDeliveries=o.map((t=>t.delivery_id)),this.isLoaded=!0,t}}),this.$handleApiError)},getData(){this.isLoaded=!1,Promise.allSettled([this.getWarhouses(),this.getProduct()]).then((t=>{t.every((t=>"fulfilled"==t.status))&&(this.isLoaded=!0)}),this.$handleApiError)}},mounted(){this.getData()}};const Lh=(0,d.Z)(Uh,[["render",mh]]);var Ah=Lh;const Ph={class:"tw-pb-14"},Wh=(0,a._)("div",{class:"mb-5"},[(0,a._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Product"),(0,a._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Show product informations")],-1),Eh={key:0},$h={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},Th={class:"tw-grid tw-grid-cols-12 tw-gap-2"},Oh={class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-gap-2 tw-items-center tw-justify-between tw-flex-wrap"},Vh=(0,a._)("p",{class:"tw-font-light tw-text-neutral-500"},"Name:",-1),Rh={class:"tw-text-neutral-800 tw-font-medium tw-px-3"},qh={class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-gap-2 tw-items-center tw-justify-between tw-flex-wrap"},Fh=(0,a._)("p",{class:"tw-font-light tw-text-neutral-500"},"Reference:",-1),Ih={class:"tw-text-neutral-800 tw-font-medium tw-px-3"},Nh={class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-gap-2 tw-items-center tw-justify-between tw-flex-wrap"},jh=(0,a._)("p",{class:"tw-font-light tw-text-neutral-500"},"Buying Price:",-1),Mh={class:"tw-text-neutral-800 tw-font-medium tw-px-3"},Hh={class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-gap-2 tw-items-center tw-justify-between tw-flex-wrap"},Yh=(0,a._)("p",{class:"tw-font-light tw-text-neutral-500"},"Selling Price:",-1),Kh={class:"tw-text-neutral-800 tw-font-medium tw-px-3"},Zh={class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-gap-2 tw-items-center tw-justify-between tw-flex-wrap"},Qh=(0,a._)("p",{class:"tw-font-light tw-text-neutral-500"},"Total Delivered:",-1),Gh={class:"tw-text-neutral-800 tw-font-medium tw-px-3"},Bh={class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-gap-2 tw-items-center tw-justify-between tw-flex-wrap"},Jh=(0,a._)("p",{class:"tw-font-light tw-text-neutral-500"},"Total Sent:",-1),Xh={class:"tw-text-neutral-800 tw-font-medium tw-px-3"},tg={class:"tw-col-span-12 md:tw-col-span-12 tw-flex tw-gap-2 tw-flex-col tw-flex-wrap"},eg=(0,a._)("p",{class:"tw-font-light tw-text-neutral-500"},"Description:",-1),sg={class:"tw-text-neutral-800 tw-font-medium"},ig={key:2,class:"tw-text-neutral-700 tw-font-bold tw-mb-1 tw-mt-5"},ag={key:3,class:"tw-border bg-white tw-w-full tw-rounded-md"},rg={key:4,class:"tw-text-neutral-700 tw-font-bold tw-mt-5 tw-mb-1"},lg={key:5,class:"tw-overflow-hidden tw-border bg-white tw-w-full tw-rounded-md"},og={class:"tw-max-w-full tw-overflow-auto"},ng={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},dg={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},cg={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},wg={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},ug={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},pg={class:"tw-px-6 tw-py-2"},mg={class:"tw-px-6 tw-py-2"},hg={class:"tw-flex tw-flex-col"},gg={class:"tw-px-6 tw-py-2"},fg={class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},vg=(0,a._)("th",{scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},null,-1),yg=(0,a._)("th",{scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},null,-1),_g=(0,a._)("td",{class:"tw-px-6 tw-py-2"},null,-1),xg={class:"tw-px-6 tw-py-2"},bg={class:"tw-flex tw-flex-col tw-font-medium"},kg=(0,a._)("td",{class:"tw-px-6 tw-py-2"},null,-1);function Cg(t,e,s,i,r,l){const o=(0,a.up)("LoadingAnimation"),n=(0,a.up)("ProductTracking");return(0,a.wg)(),(0,a.iD)("div",Ph,[Wh,r.isLoaded?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",Eh,[(0,a.Wm)(o)])),r.isLoaded?((0,a.wg)(),(0,a.iD)("div",$h,[(0,a._)("div",null,[(0,a._)("div",null,[(0,a._)("div",Th,[(0,a._)("div",Oh,[Vh,(0,a._)("p",Rh,(0,Q.zw)(r.product.name),1)]),(0,a._)("div",qh,[Fh,(0,a._)("p",Ih,(0,Q.zw)(r.product.ref),1)]),(0,a._)("div",Nh,[jh,(0,a._)("p",Mh,(0,Q.zw)(r.product.buying_price)+" "+(0,Q.zw)(r.currency),1)]),(0,a._)("div",Hh,[Yh,(0,a._)("p",Kh,(0,Q.zw)(r.product.selling_price)+" "+(0,Q.zw)(r.currency),1)]),(0,a._)("div",Zh,[Qh,(0,a._)("p",Gh,(0,Q.zw)(l.qtyTotalDelivered),1)]),(0,a._)("div",Bh,[Jh,(0,a._)("p",Xh,(0,Q.zw)(l.qtyTotalSent),1)]),(0,a._)("div",tg,[eg,(0,a._)("p",sg,(0,Q.zw)(r.product.description),1)])])])])])):(0,a.kq)("",!0),r.isLoaded?((0,a.wg)(),(0,a.iD)("h1",ig,"Tracking")):(0,a.kq)("",!0),r.isLoaded?((0,a.wg)(),(0,a.iD)("div",ag,[(0,a.Wm)(n,{product:r.product},null,8,["product"])])):(0,a.kq)("",!0),r.isLoaded?((0,a.wg)(),(0,a.iD)("h1",rg,"Variations")):(0,a.kq)("",!0),r.isLoaded?((0,a.wg)(),(0,a.iD)("div",lg,[(0,a._)("div",null,[(0,a._)("div",null,[(0,a._)("div",og,[(0,a._)("table",ng,[(0,a._)("thead",dg,[(0,a._)("tr",null,[((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(["id","size","color","qty","Stock Alert"],(t=>(0,a._)("th",{class:(0,Q.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,a._)("div",cg,(0,Q.zw)(t),1)],2))),64))])]),(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.product.variations,(t=>((0,a.wg)(),(0,a.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,a._)("th",wg,(0,Q.zw)(t.id),1),(0,a._)("th",ug,(0,Q.zw)(t.size),1),(0,a._)("td",pg,(0,Q.zw)(t.color),1),(0,a._)("td",mg,[(0,a._)("div",hg,[(0,a._)("span",null,"Initial: "+(0,Q.zw)(t.quantity),1)])]),(0,a._)("td",gg,(0,Q.zw)(t.stockAlert),1)])))),128)),(0,a._)("tr",fg,[vg,yg,_g,(0,a._)("td",xg,[(0,a._)("div",bg,[(0,a._)("span",null,"Total: "+(0,Q.zw)(l.qtyTotal),1)])]),kg])])])])])])])):(0,a.kq)("",!0)])}const Dg={class:"tw-flex tw-items-ce tw-gap-1 tw-border-b tw-border-solid tw-border-neutral-200"},Sg=["onClick"];function zg(t,e,s,i,r,l){const o=(0,a.up)("ProductTrackingTable");return(0,a.wg)(),(0,a.j4)(Mi._,{flat:"",class:"tw-p-1"},{default:(0,a.w5)((()=>[(0,a._)("div",Dg,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.tabs,(t=>((0,a.wg)(),(0,a.iD)("button",{key:t.id,onClick:e=>r.tab=t.id,class:(0,Q.C_)(["tw-px-4 tw-py-2 tw-rounded-t hover:tw-border-orange-500/50 tw-duration-300 tw-border tw-border-solid tw-border-neutral-200 tw-text-neutral-500 tw-border-b-0",{"tw-bg-orange-500 !tw-text-white tw-border-transparent":t.id==r.tab}])},(0,Q.zw)(t.name),11,Sg)))),128))]),(0,a.kq)("",!0),(0,a.Wm)(Ki.Oo,{class:"tw-mt-0",modelValue:r.tab,"onUpdate:modelValue":e[1]||(e[1]=t=>r.tab=t)},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.tabs,(t=>((0,a.wg)(),(0,a.j4)(Zi.H,{key:t.id,value:t.id},{default:(0,a.w5)((()=>[(0,a.Wm)(o,{product:s.product,source:t.source},null,8,["product","source"])])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])),_:1})}const Ug={class:"tw-mt-5"},Lg={class:"tw-max-w-full tw-overflow-auto"},Ag={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},Pg={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},Wg={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"};function Eg(t,e,s,i,r,l){const o=(0,a.up)("ProductTrackingRow");return(0,a.wg)(),(0,a.iD)("div",Ug,[(0,a._)("div",Lg,[(0,a._)("table",Ag,[(0,a._)("thead",Pg,[(0,a._)("tr",null,[((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(["id","name","quantity","actions"],(t=>(0,a._)("th",{class:(0,Q.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,a._)("div",Wg,(0,Q.zw)(t),1)],2))),64))])]),(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.items,(t=>((0,a.wg)(),(0,a.j4)(o,{item:t,key:t.id,source:s.source},null,8,["item","source"])))),128))])])])])}const $g={class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},Tg={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},Og={class:"tw-flex tw-items-start tw-h-full"},Vg={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},Rg={class:"tw-px-6 tw-py-2"},qg={key:0},Fg={class:"tw-w-fit tw-min-w-[200px] tw-flex tw-items-center"},Ig={key:0,class:"tw-h-fit tw-py-2"},Ng=(0,a._)("td",{class:"tw-px-3 tw-py-1 tw-bg-emerald-100 tw-border tw-text-emerald-500"}," Received: ",-1),jg={class:"tw-px-3 tw-py-1 tw-border tw-text-emerald-500"},Mg=(0,a._)("td",{class:"tw-px-3 tw-py-1 tw-bg-red-100 tw-text-red-500 tw-border"}," Not Received: ",-1),Hg={class:"tw-px-3 tw-py-1 tw-border tw-text-red-500"},Yg=(0,a._)("td",{class:"tw-px-3 tw-py-1 tw-bg-purple-100 tw-border tw-text-purple-500"}," Shipped: ",-1),Kg={class:"tw-px-3 tw-py-1 tw-border tw-text-purple-500"},Zg=(0,a._)("td",{class:"tw-px-3 tw-py-1 tw-bg-blue-100 tw-border tw-text-blue-500"}," Delivered: ",-1),Qg={class:"tw-px-3 tw-py-1 tw-border tw-text-blue-500"},Gg={key:1},Bg={class:"tw-w-fit tw-min-w-[200px] tw-flex tw-items-center"},Jg={key:0,class:"tw-h-fit tw-py-2"},Xg=(0,a._)("td",{class:"tw-px-3 tw-py-1 tw-bg-emerald-100 tw-border tw-text-emerald-500"}," Received: ",-1),tf={class:"tw-px-3 tw-py-1 tw-border tw-text-emerald-500"},ef=(0,a._)("td",{class:"tw-px-3 tw-py-1 tw-bg-red-100 tw-text-red-500 tw-border"}," Not Received: ",-1),sf={class:"tw-px-3 tw-py-1 tw-border tw-text-red-500"},af=(0,a._)("td",{class:"tw-px-3 tw-py-1 tw-bg-purple-100 tw-border tw-text-purple-500"}," Shipped: ",-1),rf={class:"tw-px-3 tw-py-1 tw-border tw-text-purple-500"},lf=(0,a._)("td",{class:"tw-px-3 tw-py-1 tw-bg-blue-100 tw-border tw-text-blue-500"}," Delivered: ",-1),of={class:"tw-px-3 tw-py-1 tw-border tw-text-blue-500"},nf={class:"tw-px-6 tw-py-2 tw-space-x-3"};function df(t,e,s,i,r,l){const o=(0,a.up)("ShowProductVariantActions");return(0,a.wg)(),(0,a.iD)("tr",$g,[(0,a._)("th",Tg,[(0,a._)("div",Og,(0,Q.zw)(s.item.id),1)]),(0,a._)("th",Vg,(0,Q.zw)(s.item.name),1),(0,a._)("td",Rg,["warehouses"==s.source?((0,a.wg)(),(0,a.iD)("div",qg,[(0,a._)("div",Fg,[(0,a._)("button",{onClick:e[0]||(e[0]=t=>r.showDetails=!r.showDetails),class:"tw-bg-blue-400/10 tw-py-1 tw-px-4 tw-rounded tw-text-blue-400 tw-flex tw-gap-2 tw-items-center tw-justify-between"},[(0,a._)("p",null,"Total: "+(0,Q.zw)(l.get_total_quantity(s.item.product_variations)),1),(0,a.Wm)(J.t,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,Q.zw)(r.showDetails?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})])]),(0,a.Wm)(zt.Fx,null,{default:(0,a.w5)((()=>[r.showDetails?((0,a.wg)(),(0,a.iD)("div",Ig,[(0,a._)("table",null,[(0,a._)("tbody",null,[(0,a._)("tr",null,[Ng,(0,a._)("td",jg,(0,Q.zw)(l.get_total_quantity(s.item.product_variations,"movements_total_confirmed_quantity")),1)]),(0,a._)("tr",null,[Mg,(0,a._)("td",Hg,(0,Q.zw)(l.get_total_quantity(s.item.product_variations,"movements_total_not_confirmed_quantity")),1)]),(0,a._)("tr",null,[Yg,(0,a._)("td",Kg,(0,Q.zw)(l.get_total_quantity(s.item.product_variations,"total_shipped_quantity")),1)]),(0,a._)("tr",null,[Zg,(0,a._)("td",Qg,(0,Q.zw)(l.get_total_quantity(s.item.product_variations,"total_delivered_quantity")),1)])])])])):(0,a.kq)("",!0)])),_:1})])):(0,a.kq)("",!0),"deliveries"==s.source?((0,a.wg)(),(0,a.iD)("div",Gg,[(0,a._)("div",Bg,[(0,a._)("button",{onClick:e[1]||(e[1]=t=>r.showDetails=!r.showDetails),class:"tw-bg-blue-400/10 tw-py-1 tw-px-4 tw-rounded tw-text-blue-400 tw-flex tw-gap-2 tw-items-center tw-justify-between"},[(0,a._)("p",null,"Total: "+(0,Q.zw)(l.get_total_quantity(s.item.product_variations)),1),(0,a.Wm)(J.t,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,Q.zw)(r.showDetails?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})])]),(0,a.Wm)(zt.Fx,null,{default:(0,a.w5)((()=>[r.showDetails?((0,a.wg)(),(0,a.iD)("div",Jg,[(0,a._)("table",null,[(0,a._)("tbody",null,[(0,a._)("tr",null,[Xg,(0,a._)("td",tf,(0,Q.zw)(l.get_total_quantity(s.item.product_variations,"movements_total_confirmed_quantity")),1)]),(0,a._)("tr",null,[ef,(0,a._)("td",sf,(0,Q.zw)(l.get_total_quantity(s.item.product_variations,"movements_total_not_confirmed_quantity")),1)]),(0,a._)("tr",null,[af,(0,a._)("td",rf,(0,Q.zw)(l.get_total_quantity(s.item.product_variations,"total_shipped_quantity")),1)]),(0,a._)("tr",null,[lf,(0,a._)("td",of,(0,Q.zw)(l.get_total_quantity(s.item.product_variations,"total_delivered_quantity")),1)])])])])):(0,a.kq)("",!0)])),_:1})])):(0,a.kq)("",!0)]),(0,a._)("td",nf,[(0,a._)("div",null,[(0,a.Wm)(o,{type:s.source,source:s.item},null,8,["type","source"])])])])}function cf(t,e,s,i,r,l){const o=(0,a.up)("ProductVariantDetails");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(G.T,{onClick:e[0]||(e[0]=t=>r.visible=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"blue-lighten-2",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-eye")])),_:1})])),_:1}),(0,a.Wm)(o,{visible:r.visible,onCancel:l.cancel,type:s.type,source:s.source},null,8,["visible","onCancel","type","source"])])}const wf={class:"md:tw-w-[50%] tw-relative tw-max-h-full tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},uf={class:"tw-p-5"},pf={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500 tw-rounded-md tw-overflow-hidden"},mf=(0,a._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},[(0,a._)("tr",null,[(0,a._)("th",{scope:"col",class:"tw-px-4 tw-max-w-[50px] tw-py-3 text-truncate"}," ID "),(0,a._)("th",{scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},"SIZE"),(0,a._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"},"COLOR"),(0,a._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," QUANTITY ")])],-1);function hf(t,e,s,i,r,l){const o=(0,a.up)("ProductVariantDetailsRow"),n=(0,a.up)("popup-full");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(n,{visible:s.visible,onCancel:l.cancel},{default:(0,a.w5)((()=>[(0,a._)("div",wf,[(0,a.Wm)(G.T,{onClick:l.cancel,icon:"mdi-close",variant:"flat",size:"w-small",color:"red",class:"tw-absolute tw-top-3 tw-z-10 tw-right-3"},null,8,["onClick"]),(0,a._)("div",uf,[(0,a._)("table",pf,[mf,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.source.product_variations,(t=>((0,a.wg)(),(0,a.j4)(o,{key:t.id,item:t,type:s.type},null,8,["item","type"])))),128))])]),(0,a.kq)("",!0)])])])),_:1},8,["visible","onCancel"])])}const gf={class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},ff={class:"tw-w-4 tw-px-2 tw-py-1"},vf={class:"tw-w-4 tw-px-2 tw-py-1"},yf={class:"tw-w-4 tw-px-2 tw-py-1"},_f={class:"tw-w-4 tw-px-2 tw-py-1"},xf={class:"tw-w-fit tw-min-w-[200px] tw-flex tw-items-center"},bf={key:0,class:"tw-h-fit tw-py-2"},kf=(0,a._)("td",{class:"tw-px-3 tw-py-1 tw-bg-emerald-100 tw-border tw-text-emerald-500"}," Received: ",-1),Cf={class:"tw-px-3 tw-py-1 tw-border tw-text-emerald-500"},Df=(0,a._)("td",{class:"tw-px-3 tw-py-1 tw-bg-red-100 tw-text-red-500 tw-border"}," Not Received: ",-1),Sf={class:"tw-px-3 tw-py-1 tw-border tw-text-red-500"},zf=(0,a._)("td",{class:"tw-px-3 tw-py-1 tw-bg-purple-100 tw-border tw-text-purple-500"}," Shipped: ",-1),Uf={class:"tw-px-3 tw-py-1 tw-border tw-text-purple-500"},Lf=(0,a._)("td",{class:"tw-px-3 tw-py-1 tw-bg-blue-100 tw-border tw-text-blue-500"}," Delivered: ",-1),Af={class:"tw-px-3 tw-py-1 tw-border tw-text-blue-500"};function Pf(t,e,s,i,r,l){return(0,a.wg)(),(0,a.iD)("tr",gf,[(0,a._)("td",ff,(0,Q.zw)(s.item.id),1),(0,a._)("td",vf,(0,Q.zw)(s.item.size),1),(0,a._)("td",yf,(0,Q.zw)(s.item.color),1),(0,a._)("td",_f,[(0,a._)("div",null,[(0,a._)("div",xf,[(0,a._)("button",{onClick:e[0]||(e[0]=t=>r.showDetails=!r.showDetails),class:"tw-bg-blue-400/10 tw-py-1 tw-px-4 tw-rounded tw-text-blue-400 tw-flex tw-gap-2 tw-items-center tw-justify-between"},[(0,a._)("p",null," Total: "+(0,Q.zw)(s.item.on_hand_quantity),1),(0,a.Wm)(J.t,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,Q.zw)(r.showDetails?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})])]),(0,a.Wm)(zt.Fx,null,{default:(0,a.w5)((()=>[r.showDetails?((0,a.wg)(),(0,a.iD)("div",bf,[(0,a._)("table",null,[(0,a._)("tbody",null,[(0,a._)("tr",null,[kf,(0,a._)("td",Cf,(0,Q.zw)(s.item.movements_total_confirmed_quantity),1)]),(0,a._)("tr",null,[Df,(0,a._)("td",Sf,(0,Q.zw)(s.item.movements_total_not_confirmed_quantity),1)]),(0,a._)("tr",null,[zf,(0,a._)("td",Uf,(0,Q.zw)(s.item.total_shipped_quantity),1)]),(0,a._)("tr",null,[Lf,(0,a._)("td",Af,(0,Q.zw)(s.item.total_delivered_quantity),1)])])])])):(0,a.kq)("",!0)])),_:1})])])])}var Wf={props:["type","item"],data(){return{showDetails:!1}}};const Ef=(0,d.Z)(Wf,[["render",Pf]]);var $f=Ef,Tf={props:["visible","source","type"],components:{ProductVariantDetailsRow:$f},methods:{cancel(){this.$emit("cancel")}},mounted(){}};const Of=(0,d.Z)(Tf,[["render",hf]]);var Vf=Of,Rf={props:["product","source","type"],components:{ProductVariantDetails:Vf},data(){return{visible:!1,quantity:1,newVariant:null}},methods:{cancel(){this.visible=!1}},mounted(){console.log(this.source)}};const qf=(0,d.Z)(Rf,[["render",cf]]);var Ff=qf,If={components:{ShowProductVariantActions:Ff},props:["source","item"],data(){return{showDetails:!1}},methods:{get_total_quantity(t,e="on_hand_quantity"){let s=0;return t.forEach((t=>{s+=t[e]})),s}}};const Nf=(0,d.Z)(If,[["render",df]]);var jf=Nf,Mf={props:["product","source"],components:{ProductTrackingRow:jf},computed:{items(){return this.product.tracking[this.source]}},methods:{},mounted(){}};const Hf=(0,d.Z)(Mf,[["render",Eg]]);var Yf=Hf,Kf={components:{ProductTrackingTable:Yf},props:["product"],data(){return{tab:1,tabs:[{id:1,name:"Deliveries",source:"deliveries"},{id:2,name:"Warehouses",source:"warehouses"}]}}};const Zf=(0,d.Z)(Kf,[["render",zg]]);var Qf=Zf,Gf={components:{ProductTracking:Qf},data(){return{currency:I,isLoading:!1,isLoaded:!1,variantId:1,variants:[],product:{name:"",reference:"",buyingPrice:0,sellingPrice:0,description:""}}},computed:{qtyTotalDelivered(){let t=0;return this.product.tracking.deliveries.forEach((e=>{e.product_variations.forEach((e=>{t+=e.total_delivered_quantity}))})),this.product.tracking.warehouses.forEach((e=>{e.product_variations.forEach((e=>{t+=e.total_delivered_quantity}))})),t},qtyTotalSent(){let t=0;return this.product.tracking.warehouses.forEach((e=>{e.product_variations.forEach((e=>{t+=e.movements_total_confirmed_quantity,t+=e.movements_total_not_confirmed_quantity}))})),t},qtyTotal(){if(this.isLoaded){let t=0;return this.product.variations.forEach((e=>{t+=e.quantity})),t}return 0}},methods:{getProduct(){const t=this.$route.params.id;ti.getProduct(t).then((t=>{"SUCCESS"==t.data.code&&(this.product=t.data.data.products,this.isLoaded=!0)}),this.$handleApiError)}},mounted(){this.getProduct()}};const Bf=(0,d.Z)(Gf,[["render",Cg]]);var Jf=Bf,Xf={name:"products",path:"/products",component:ii,meta:{module:"product"},children:[{name:"product/list",path:"",component:mu,meta:{module:"product",subModule:"product/list",title:"Products List",gate:"show_all_products"}},{name:"product/add",path:"add",component:om,meta:{module:"product",subModule:"product/add",title:"Add Product",gate:"create_product"}},{name:"product/update",path:"update/:id",component:Ah,meta:{module:"product",subModule:"product/update",title:"Update Product",gate:"update_product"}},{name:"product/show",path:":id",component:Jf,meta:{module:"product",subModule:"product/show",title:"Product Informations",gate:"view_product"}}]};const tv={class:"mb-5 tw-flex tw-justify-between tw-items-center"},ev=(0,a._)("div",null,[(0,a._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Users List"),(0,a._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage all users")],-1),sv={key:0},iv=(0,a._)("span",{class:"text-white"}," Add User ",-1),av={key:0},rv={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},lv={class:"mb-5 tw-flex"},ov={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},nv={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},dv={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},cv=(0,a._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Role",-1),wv={class:"tw-relative"},uv=["value"],pv={class:""};function mv(t,e,s,r,l,o){const n=(0,a.up)("LoadingAnimation"),d=(0,a.up)("UsersTable");return(0,a.wg)(),(0,a.iD)("div",{key:o.users.length},[(0,a._)("div",tv,[ev,t.$can("create_user")?((0,a.wg)(),(0,a.iD)("div",sv,[(0,a.Wm)(G.T,{color:"primary-color",link:"",to:{name:"user/add"},variant:"flat",class:"text-capitalize"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{icon:"mdi-plus",class:"mr-2 text-white"}),iv])),_:1})])):(0,a.kq)("",!0)]),o.fetched?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",av,[(0,a.Wm)(n)])),o.fetched?((0,a.wg)(),(0,a.iD)("div",rv,[(0,a._)("div",lv,[(0,a.Wm)(G.T,{onClick:e[0]||(e[0]=t=>l.showFilters=!l.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white",size:"xx-large"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,a._)("div",ov,[(0,a.Wm)(Kt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[i.nr,l.search]])])]),(0,a._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":l.showFilters}])},[(0,a._)("div",nv,[(0,a._)("div",dv,[cv,(0,a._)("div",wv,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.role=t),class:"tw-w-full focus:tw-border-orange-400 tw-capitalize tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.roles,(t=>((0,a.wg)(),(0,a.iD)("option",{key:t,value:t},(0,Q.zw)(t),9,uv)))),128))],512),[[i.bM,l.role]]),(0,a.Wm)(J.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-chevron-down")])),_:1})])])])],2),(0,a._)("div",pv,[(0,a.Wm)(d,{users:o.filteredUsers,columns:l.columns},null,8,["users","columns"])])])):(0,a.kq)("",!0)])}const hv={class:"tw-relative tw-overflow-x-auto sm:tw-rounded-lg"},gv={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},fv={class:"tw-text-xs tw-text-gray-700 tw- tw-bg-gray-50"},vv=(0,a._)("th",{scope:"col",class:"tw-p-4"},[(0,a._)("div",{class:"tw-flex tw-items-center"},[(0,a._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,a._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),yv={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},_v=(0,a._)("td",{class:"tw-w-4 tw-p-4"},[(0,a._)("div",{class:"tw-flex tw-items-center"},[(0,a._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,a._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),xv={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},bv={class:"tw-px-6 tw-py-4"},kv={class:"tw-px-6 tw-py-4"},Cv={class:"tw-px-6 tw-py-4"},Dv={class:"tw-px-6 tw-py-4"},Sv={class:"tw-px-6 tw-py-4"},zv={key:0,class:"tw-text-red-500"},Uv={key:1},Lv={key:0,class:"tw-text-green-500 tw-flex tw-items-center tw-gap-2"},Av=(0,a._)("div",{class:"tw-p-1 tw-rounded-full tw-bg-green-500"},null,-1),Pv={key:1,class:"tw-text-neutral-700"},Wv={class:"tw-px-6 tw-py-4"},Ev={class:"tw-flex tw-items-center tw-px-6 tw-py-4 tw-space-x-3"},$v={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},Tv={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},Ov=(0,a._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),Vv=["value"],Rv={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},qv={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},Fv={class:"tw-text-white"};function Iv(t,e,s,r,l,o){const n=(0,a.up)("RoleName"),d=(0,a.up)("UserStatus"),c=(0,a.up)("UserActions");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",hv,[(0,a._)("table",gv,[(0,a._)("thead",fv,[(0,a._)("tr",null,[vv,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.columns,(t=>((0,a.wg)(),(0,a.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,a._)("div",yv,(0,Q.zw)(t.name),1)])))),128))])]),(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.items,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[_v,(0,a._)("th",xv,(0,Q.zw)(e.id),1),(0,a._)("td",bv,(0,Q.zw)(e.firstname)+" "+(0,Q.zw)(e.lastname),1),(0,a._)("td",kv,[(0,a.Wm)(n,{role:e.role_name},null,8,["role"])]),(0,a._)("td",Cv,(0,Q.zw)(e.email),1),(0,a._)("td",Dv,(0,Q.zw)(e.phone),1),(0,a._)("td",Sv,[e.last_action?((0,a.wg)(),(0,a.iD)("div",Uv,[1==o.isOnline(o.lastSeen(e.last_action))?((0,a.wg)(),(0,a.iD)("div",Lv,[Av,(0,a.Uk)(" Online ")])):((0,a.wg)(),(0,a.iD)("div",Pv,(0,Q.zw)(o.lastSeen(e.last_action)),1))])):((0,a.wg)(),(0,a.iD)("div",zv," Never Connected "))]),(0,a._)("td",Wv,[t.$can("update_user_status")?((0,a.wg)(),(0,a.j4)(d,{key:0,user:e},null,8,["user"])):(0,a.kq)("",!0)]),(0,a._)("td",Ev,[(0,a.Wm)(c,{user:e},null,8,["user"])])])))),128))])])]),(0,a._)("div",$v,[(0,a._)("div",Tv,[Ov,(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.allowedLimit,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t,key:t},(0,Q.zw)(t),9,Vv)))),128))],512),[[i.bM,l.paginationLimit]])]),(0,a._)("div",Rv,[(0,a._)("div",qv,(0,Q.zw)(o.prevRange+1)+" - "+(0,Q.zw)(l.currentPage==o.pageCount?s.users.length:o.nextRange)+" of "+(0,Q.zw)(s.users.length)+" items ",1),(0,a._)("div",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.pageCount,(t=>((0,a.wg)(),(0,a.j4)(G.T,{onClick:e=>l.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==l.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,a.w5)((()=>[(0,a._)("span",Fv,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}function Nv(t,e,s,i,r,l){const o=(0,a.up)("popup");return(0,a.wg)(),(0,a.iD)("div",null,[t.$can("update_user")?((0,a.wg)(),(0,a.j4)(G.T,{key:0,to:"/users/update/"+s.user.id,class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-pencil-outline")])),_:1})])),_:1},8,["to"])):(0,a.kq)("",!0),t.$can("view_user")?((0,a.wg)(),(0,a.j4)(G.T,{key:1,class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"blue",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-eye-outline")])),_:1})])),_:1})):(0,a.kq)("",!0),t.$can("delete_user")&&"admin"!==s.user.role_name?((0,a.wg)(),(0,a.j4)(G.T,{key:2,onClick:e[0]||(e[0]=t=>r.showPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,a.kq)("",!0),(0,a.Wm)(o,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this user?</p> You won't be able to revert this!",loading:r.isLoading,visible:r.showPopup,onResolved:l.handleResolved},null,8,["loading","visible","onResolved"])])}var jv={props:["rowIndex","user"],name:"userActions",data(){return{showPopup:!1,isLoading:!1}},methods:{handleResolved(t){t?(this.isLoading=!0,K["delete"](this.user.id).then((t=>{"USER_DELETED"==t.data.code&&(this.isLoading=!1,this.$alert({type:"success",title:"User Deleted Successfully"})),K.all().then((t=>{"SHOW_ALL_USERS"==t.data.code&&this.$store.dispatch("user/setUsers",t.data.data.users)})).catch(this.$handleApiError)})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1,this.showPopup=!1}))):this.showPopup=!1}}};const Mv=(0,d.Z)(jv,[["render",Nv]]);var Hv=Mv;const Yv={key:0,class:"tw-flex tw-items-center"};function Kv(t,e,s,i,r,l){return"admin"!==s.user.role_name?((0,a.wg)(),(0,a.iD)("div",Yv,[(0,a.Wm)(vl.G,{disabled:r.isLoading,loading:r.isLoading,onChange:l.handleChange,color:"primary-color",flat:!0,modelValue:r.checked,"onUpdate:modelValue":e[0]||(e[0]=t=>r.checked=t),density:"compact","hide-details":!0},null,8,["disabled","loading","onChange","modelValue"])])):(0,a.kq)("",!0)}var Zv={props:["rowIndex","prop","user"],data(){return{isLoading:!1,checked:!1}},watch:{},methods:{handleChange(){const t={id:this.user.id,status:this.checked?"true":"false"};this.isLoading=!0,K.updateStatus(t).then((t=>{"STATUS_USER_UPDATED"==t.data.code&&(this.$alert({type:"success",title:"Status updated"}),this.setUpdatedUser(this.user.id,this.checked))})).catch((t=>{this.$handleApiError(t)})).finally((()=>{this.isLoading=!1}))},setUpdatedUser(t,e){let s=localStorage.getItem("updatedUsers"),i={};s?(i=JSON.parse(s),i[t]=e):i[t]=e,localStorage.setItem("updatedUsers",JSON.stringify(i))},getUpdatedUsers(){let t=localStorage.getItem("updatedUsers");if(!t)return{};let e=JSON.parse(t);return e}},mounted(){const t=this.getUpdatedUsers();Object.keys(t).includes(`${this.user.id}`)?this.checked=1==t[this.model.id]:this.checked=1==this.user.status}};const Qv=(0,d.Z)(Zv,[["render",Kv]]);var Gv=Qv;const Bv={class:"tw-flex tw-items-center tw-h-full"};function Jv(t,e,s,i,r,l){return(0,a.wg)(),(0,a.iD)("div",Bv,[(0,a._)("div",{class:(0,Q.C_)([l.current.bg,"tw-px-2 tw-py-1 tw-rounded-lg"])},[(0,a._)("div",{class:(0,Q.C_)([l.current.text,"tw-text-sm tw-uppercase"])},(0,Q.zw)(s.role),3)],2)])}var Xv={props:["role"],data(){return{variants:{default:{bg:"tw-bg-neutral-500/10",text:"tw-text-neutral-500"},admin:{bg:"tw-bg-pink-500/10",text:"tw-text-pink-500"},agente:{bg:"tw-bg-green-500/10",text:"tw-text-green-500"},delivery:{bg:"tw-bg-blue-500/10",text:"tw-text-blue-500"}}}},computed:{current(){return["admin","delivery","agente"].includes(this.role)?this.variants[this.role]:this.variants["default"]}}};const ty=(0,d.Z)(Xv,[["render",Jv]]);var ey=ty,sy={props:["columns","users"],components:{UserActions:Hv,UserStatus:Gv,RoleName:ey},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.users.length/this.paginationLimit)},items(){return this.users.slice(this.prevRange,this.nextRange)}},methods:{lastSeen(t){let e=Date.parse(t.replace("-","/"))/1e3;return(0,Fi.x)(e)},isOnline(t){let e=["Just Now","one minute ago","2 minutes ago","3 minutes ago"];return e.includes(t)}}};const iy=(0,d.Z)(sy,[["render",Iv]]);var ay=iy,ry={components:{UsersTable:ay},data(){return{localUrl:q,isLoaded:!1,showFilters:!1,role:"All",search:"",columns:[{prop:"id",name:"#"},{prop:"fullname",name:"Name"},{prop:"role_name",name:"Role"},{prop:"email",name:"Email"},{prop:"phone",name:"Phone Number"},{prop:"last_seen",name:"Last Seen"},{prop:"status",name:"Active"},{name:"Acions",prop:"users"}]}},computed:{fetched(){return this.$store.getters["user/fetched"]},users(){return this.$store.getters["user/users"]},roles(){let t=new Set(["All",...this.users.map((t=>t.role_name))]);return t},filteredUsers(){const t=this.role,e=this.search;return this.users.filter((s=>("all"===t.toLocaleLowerCase()||t.toLocaleLowerCase()===s.role_name)&&!!(s.firstname.toLowerCase().includes(e.toLowerCase())||s.lastname.toLowerCase().includes(e.toLowerCase())||s.role_name.toLowerCase().includes(e.toLowerCase())||s.email.toLowerCase().includes(e.toLowerCase())||s.phone.toLowerCase().includes(e.toLowerCase()))))}},methods:{getRoles(){K.roles().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.roles;this.$store.dispatch("user/setRoles",e),this.isFormReady=!0}})).catch(this.$handleApiError)},getUsers(){K.all().then((t=>{if("SHOW_ALL_USERS"==t?.data.code){const e=t.data.data.users;this.$store.dispatch("user/setUsers",e),this.$store.dispatch("user/setFetched",!0)}})).catch(this.$handleApiError)}},mounted(){localStorage.removeItem("updatedUsers"),this.fetched||this.getUsers()}};const ly=(0,d.Z)(ry,[["render",mv]]);var oy=ly,ny=s(988);const dy=(0,a._)("div",{class:"mb-5"},[(0,a._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Add User "),(0,a._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Create new user")],-1),cy={key:0},wy={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},uy={class:"tw-w-full"},py=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," First Name ",-1),my={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},hy={class:"tw-w-full"},gy=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Last Name",-1),fy={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},vy={class:"tw-w-full"},yy=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Email",-1),_y={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},xy={class:"tw-w-full"},by=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Phone Number ",-1),ky={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Cy=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Product",-1),Dy=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"City",-1),Sy=["value"],zy=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Delivery cities",-1),Uy=["value"],Ly=(0,a._)("div",{class:"mb-1 my-2 text-body-2 tw-text-zinc-700"},"Fee",-1),Ay=(0,a._)("span",{class:"text-white"},"Add",-1),Py=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Role",-1),Wy={class:"tw-flex tw-gap-10 tw-h-full tw-items-center"},Ey=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Status:",-1),$y={class:"tw-w-full"},Ty=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Password",-1),Oy={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Vy={class:"tw-w-full"},Ry=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Confirm Password ",-1),qy={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Fy=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Delivery cities",-1),Iy={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},Ny=(0,a._)("span",{class:"text-white text-capitalize"},"Cancel",-1),jy=(0,a._)("span",{class:"text-white text-capitalize"},"Create",-1);function My(t,e,s,r,l,o){const n=(0,a.up)("LoadingAnimation");return(0,a.wg)(),(0,a.iD)("div",null,[dy,l.isFormReady?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",cy,[(0,a.Wm)(n)])),l.isFormReady?((0,a.wg)(),(0,a.iD)("div",wy,[(0,a._)("div",null,[(0,a.Wm)(ri.o,null,{default:(0,a.w5)((()=>[(0,a.Wm)(li.D,{cols:"12",md:"6"},{default:(0,a.w5)((()=>[(0,a.Wm)(ri.o,null,{default:(0,a.w5)((()=>[(0,a.Wm)(li.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,a.w5)((()=>[(0,a._)("div",uy,[py,(0,a.Wm)(X.hw,{error:!l.formStatus.firstname.valid,"hide-details":!0,onKeyup:e[0]||(e[0]=t=>o.resetError("firstname")),modelValue:l.user.firstname,"onUpdate:modelValue":e[1]||(e[1]=t=>l.user.firstname=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,a._)("div",my,(0,Q.zw)(l.formStatus.firstname.message),1)])])),_:1}),(0,a.Wm)(li.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,a.w5)((()=>[(0,a._)("div",hy,[gy,(0,a.Wm)(X.hw,{error:!l.formStatus.lastname.valid,"hide-details":!0,onKeyup:e[2]||(e[2]=t=>o.resetError("lastname")),modelValue:l.user.lastname,"onUpdate:modelValue":e[3]||(e[3]=t=>l.user.lastname=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,a._)("div",fy,(0,Q.zw)(l.formStatus.lastname.message),1)])])),_:1}),(0,a.Wm)(li.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,a.w5)((()=>[(0,a._)("div",vy,[yy,(0,a.Wm)(X.hw,{error:!l.formStatus.email.valid,"hide-details":!0,onKeyup:e[4]||(e[4]=t=>o.resetError("email")),modelValue:l.user.email,"onUpdate:modelValue":e[5]||(e[5]=t=>l.user.email=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,a._)("div",_y,(0,Q.zw)(l.formStatus.email.message),1)])])),_:1}),(0,a.Wm)(li.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,a.w5)((()=>[(0,a._)("div",xy,[by,(0,a.Wm)(X.hw,{error:!l.formStatus.phone.valid,"hide-details":!0,onKeyup:e[6]||(e[6]=t=>o.resetError("phone")),modelValue:l.user.phone,"onUpdate:modelValue":e[7]||(e[7]=t=>l.user.phone=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,a._)("div",ky,(0,Q.zw)(l.formStatus.phone.message),1)])])),_:1}),o.isAgente?((0,a.wg)(),(0,a.j4)(li.D,{key:0,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a._)("div",null,[(0,a.Wm)(vl.G,{modelValue:l.isHavingAllProducts,"onUpdate:modelValue":e[8]||(e[8]=t=>l.isHavingAllProducts=t),color:"primary-color",label:"All Products"},null,8,["modelValue"])]),Cy,(0,a._)("div",null,[(0,a.Wm)(ny.f,{disabled:l.isHavingAllProducts,modelValue:l.selectedProducts,"onUpdate:modelValue":e[9]||(e[9]=t=>l.selectedProducts=t),"filter-keys":"name",density:"compact","item-value":"id","item-title":"name",variant:"outlined",color:"primary-color",chips:"",items:o.selectProducts,multiple:""},null,8,["disabled","modelValue","items"])])])])),_:1})):(0,a.kq)("",!0),o.isDelivery?((0,a.wg)(),(0,a.j4)(li.D,{key:1,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,a.w5)((()=>[(0,a._)("div",null,[Dy,(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[10]||(e[10]=t=>l.city=t),class:"tw-w-full tw-py-[7px] focus:tw-border-orange-500 tw-px-4 tw-border tw-outline-orange-500 tw-border-neutral-400 tw-border-solid tw-rounded-md"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.cities,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,Sy)))),128))],512),[[i.bM,l.city]])])])),_:1})):(0,a.kq)("",!0),o.isDelivery?((0,a.wg)(),(0,a.j4)(li.D,{key:2,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,a.w5)((()=>[(0,a._)("div",null,[zy,(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[11]||(e[11]=t=>l.deliveryCity=t),class:"tw-w-full tw-py-[7px] focus:tw-border-orange-500 tw-px-4 tw-border tw-outline-orange-500 tw-border-neutral-400 tw-border-solid tw-rounded-md"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.cities,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,Uy)))),128))],512),[[i.bM,l.deliveryCity]]),Ly,(0,a.Wm)(X.hw,{"hide-details":!0,modelValue:l.deliveryCityFee,"onUpdate:modelValue":e[12]||(e[12]=t=>l.deliveryCityFee=t),clearable:"",type:"number","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["modelValue"]),(0,a.Wm)(G.T,{onClick:o.handleAddCity,class:"tw-text-white tw-my-3",variant:"flat",color:"primary-color",block:""},{default:(0,a.w5)((()=>[Ay])),_:1},8,["onClick"])])])),_:1})):(0,a.kq)("",!0)])),_:1})])),_:1}),(0,a.Wm)(li.D,{cols:"12",md:"6"},{default:(0,a.w5)((()=>[(0,a.Wm)(ri.o,null,{default:(0,a.w5)((()=>[(0,a.Wm)(li.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,a.w5)((()=>[(0,a._)("div",null,[Py,(0,a.Wm)(hu.r,{class:"text-capitalize",items:o.roles,"item-title":"name","item-value":"id",modelValue:l.role,"onUpdate:modelValue":e[13]||(e[13]=t=>l.role=t),variant:"outlined",color:"primary-color",density:"compact"},null,8,["items","modelValue"])])])),_:1}),(0,a.Wm)(li.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,a.w5)((()=>[(0,a._)("div",Wy,[Ey,(0,a.Wm)(vl.G,{modelValue:l.user.status,"onUpdate:modelValue":e[14]||(e[14]=t=>l.user.status=t),color:"primary-color","hide-details":!0,flat:""},null,8,["modelValue"])])])),_:1}),(0,a.Wm)(li.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,a.w5)((()=>[(0,a._)("div",$y,[Ty,(0,a.Wm)(X.hw,{error:!l.formStatus.password.valid,"hide-details":!0,onKeyup:e[15]||(e[15]=t=>o.resetError("password")),modelValue:l.user.password,"onUpdate:modelValue":e[16]||(e[16]=t=>l.user.password=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,a._)("div",Oy,(0,Q.zw)(l.formStatus.password.message),1)])])),_:1}),(0,a.Wm)(li.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,a.w5)((()=>[(0,a._)("div",Vy,[Ry,(0,a.Wm)(X.hw,{error:!l.formStatus.confirmPassword.valid,"hide-details":!0,onKeyup:e[17]||(e[17]=t=>o.resetError("confirmPassword")),modelValue:l.user.confirmPassword,"onUpdate:modelValue":e[18]||(e[18]=t=>l.user.confirmPassword=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,a._)("div",qy,(0,Q.zw)(l.formStatus.confirmPassword.message),1)])])),_:1}),o.isDelivery?((0,a.wg)(),(0,a.j4)(li.D,{key:0,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,a.w5)((()=>[(0,a._)("div",null,[Fy,(0,a._)("div",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.deliveryCities,(t=>((0,a.wg)(),(0,a.iD)("div",{class:"tw-flex tw-items-center tw-gap-2",key:t},[(0,a._)("div",null,(0,Q.zw)(o.cities.filter((e=>e.id==t.city_id))[0]?.name),1),(0,a._)("div",null,(0,Q.zw)(t.fee)+" "+(0,Q.zw)(l.currency),1),(0,a._)("div",null,[(0,a.Wm)(J.t,{color:"red",onClick:e=>o.removeCity(t.id),size:"x-small"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-delete")])),_:2},1032,["onClick"])])])))),128))])])])),_:1})):(0,a.kq)("",!0)])),_:1})])),_:1})])),_:1})]),(0,a._)("div",Iy,[(0,a.Wm)(G.T,{link:"",to:"/",color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,a.w5)((()=>[Ny])),_:1}),(0,a.Wm)(G.T,{onClick:o.create,loading:l.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,a.w5)((()=>[jy])),_:1},8,["onClick","loading"])])])):(0,a.kq)("",!0)])}var Hy={data(){return{localUrl:q,currency:I,isFormReady:!1,isLoading:!1,city:1,isMultipleProducts:!1,isHavingAllProducts:!1,id:1,deliveryCity:1,deliveryCityFee:0,deliveryCities:[],product:0,selectedProducts:[],formStatus:{firstname:{valid:!0,message:""},lastname:{valid:!0,message:""},phone:{valid:!0,message:""},email:{valid:!0,message:""},password:{valid:!0,message:""},confirmPassword:{valid:!0,message:""}},user:{firstname:"",lastname:"",phone:"",email:"",password:"",confirmPassword:"",status:!0},role:3}},computed:{roles(){return this.$store.getters["user/roles"]},rolesFetched(){return this.$store.getters["user/fetchedRoles"]},cities(){return this.$store.getters["city/cities"]},citiesFetched(){return this.$store.getters["city/fetched"]},products(){return this.$store.getters["product/products"]},productsFethched(){return this.$store.getters["product/fetched"]},isAgente(){return 2===this.role},isDelivery(){return 3===this.role},selectProducts(){return this.isMultipleProducts,[...this.products]},userProducts(){return this.selectedProducts}},watch:{},methods:{removeCity(t){this.deliveryCities=this.deliveryCities.filter((e=>e.id!==t))},handleAddCity(){if(this.deliveryCityFee<=0)return!1;this.deliveryCities.push({id:this.id,city_id:this.deliveryCity,fee:this.deliveryCityFee}),this.id+=1,this.deliveryCity=1,this.deliveryCityFee=0},create(){if(!this.validate())return!1;this.isLoading=!0;const t={...this.user,role:this.role,product_id:this.userProducts,city:this.city,deliveryCities:this.deliveryCities,having_all:this.isHavingAllProducts};K.register(t).then((t=>{"USER_CREATED"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.user={firstname:"",lastname:"",phone:"",email:"",password:"",confirmPassword:"",status:!0},this.role=3,this.product_id=null,this.deliveryCities=[],this.id=1)})).catch((t=>{this.$handleApiError(t);const e=t?.response?.data;if("VALIDATION_ERROR"==e?.code)for(let s in e.error)this.formStatus[s]={valid:!1,message:e.error[s][0]}})).finally((()=>{this.isLoading=!1}))},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){this.formStatus.email=yt(this.user.email),this.formStatus.firstname=xt(this.user.firstname),this.formStatus.lastname=xt(this.user.lastname),this.formStatus.phone=xt(this.user.phone),this.formStatus.password=_t(this.user.password),this.formStatus.confirmPassword=kt(this.user.password,this.user.confirmPassword);const t=this.formStatus.email.valid,e=this.formStatus.firstname.valid,s=this.formStatus.lastname.valid,i=this.formStatus.phone.valid,a=this.formStatus.password.valid,r=this.formStatus.confirmPassword.valid;return t&&e&&s&&a&&r&&i},getRoles(){return this.rolesFetched?new Promise((t=>t())):K.roles().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.roles;this.$store.dispatch("user/setRoles",e),this.$store.dispatch("user/setFetchedRoles",!0)}})).catch(this.$handleApiError)},async getCities(){return this.citiesFetched?new Promise((t=>t())):K.cities().then((t=>{this.$store.dispatch("city/cities",t.data.data),this.$store.dispatch("city/setFetched",!0)}))},async getProducts(){return this.productsFethched?new Promise((t=>t())):ti.all().then((t=>{this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0)}),(t=>this.$handleApiError(t)))}},mounted(){Promise.allSettled([this.getRoles(),this.getCities(),this.getProducts()]).then((t=>{console.log(t),this.isFormReady=!0}),(t=>this.$handleApiError(t)))}};const Yy=(0,d.Z)(Hy,[["render",My]]);var Ky=Yy;const Zy=(0,a._)("div",{class:"mb-5"},[(0,a._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Update User "),(0,a._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Update user informations")],-1),Qy={key:0},Gy={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},By={class:"tw-flex tw-gap-2 tw-text-neutral-800 tw-items-center tw-mb-5"},Jy={class:"tw-block tw-py-1 tw-px-2 tw-rounded-md text-primary-color"},Xy={class:"tw-w-full"},t_=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," First Name ",-1),e_={class:"tw-w-full"},s_=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Last Name",-1),i_={class:"tw-w-full"},a_=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Email",-1),r_={class:"tw-w-full"},l_=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Phone Number ",-1),o_={class:"tw-w-full tw-flex tw-gap-10 tw-items-center"},n_=(0,a._)("span",null,"Update Password: ",-1),d_={class:"tw-w-full"},c_=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Password",-1),w_={class:"tw-w-full"},u_=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Confirm Password ",-1),p_=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Role",-1),m_={class:"tw-flex tw-gap-10 tw-h-full tw-items-center"},h_=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Status:",-1),g_=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Product",-1),f_=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"City",-1),v_=["value"],y_=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Delivery cities",-1),__=["value"],x_=(0,a._)("div",{class:"mb-1 my-2 text-body-2 tw-text-zinc-700"},"Fee",-1),b_=(0,a._)("span",{class:"text-white"},"Add",-1),k_=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Delivery cities",-1),C_={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},D_=(0,a._)("span",{class:"text-white text-capitalize"},"Cancel",-1),S_=(0,a._)("span",{class:"text-white text-capitalize"},"Update",-1);function z_(t,e,s,r,l,o){const n=(0,a.up)("LoadingAnimation");return(0,a.wg)(),(0,a.iD)("div",null,[Zy,o.isFormReady?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",Qy,[(0,a.Wm)(n)])),o.isFormReady?((0,a.wg)(),(0,a.iD)("div",Gy,[(0,a._)("div",By,[(0,a.Uk)(" User ID: "),(0,a._)("span",Jy,(0,Q.zw)(l.id),1)]),(0,a._)("div",null,[(0,a.Wm)(ri.o,null,{default:(0,a.w5)((()=>[(0,a.Wm)(li.D,{cols:"12",md:"6"},{default:(0,a.w5)((()=>[(0,a.Wm)(ri.o,null,{default:(0,a.w5)((()=>[(0,a.Wm)(li.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,a.w5)((()=>[(0,a._)("div",Xy,[t_,(0,a.Wm)(X.hw,{"error-messages":l.formStatus.firstname.message,modelValue:l.firstname,"onUpdate:modelValue":e[0]||(e[0]=t=>l.firstname=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,a.Wm)(li.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,a.w5)((()=>[(0,a._)("div",e_,[s_,(0,a.Wm)(X.hw,{"error-messages":l.formStatus.lastname.message,modelValue:l.lastname,"onUpdate:modelValue":e[1]||(e[1]=t=>l.lastname=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,a.Wm)(li.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,a.w5)((()=>[(0,a._)("div",i_,[a_,(0,a.Wm)(X.hw,{"error-messages":l.formStatus.email.message,modelValue:l.email,"onUpdate:modelValue":e[2]||(e[2]=t=>l.email=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,a.Wm)(li.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,a.w5)((()=>[(0,a._)("div",r_,[l_,(0,a.Wm)(X.hw,{"error-messages":l.formStatus.phone.message,modelValue:l.phone,"onUpdate:modelValue":e[3]||(e[3]=t=>l.phone=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,a.Wm)(li.D,{class:"!tw-py-0",cols:"12"},{default:(0,a.w5)((()=>[(0,a._)("div",o_,[n_,(0,a.Wm)(vl.G,{modelValue:l.updatePassword,"onUpdate:modelValue":e[4]||(e[4]=t=>l.updatePassword=t),color:"primary-color","hide-details":!0},null,8,["modelValue"])])])),_:1}),l.updatePassword?((0,a.wg)(),(0,a.j4)(li.D,{key:0,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,a.w5)((()=>[(0,a._)("div",d_,[c_,(0,a.Wm)(X.hw,{"error-messages":l.formStatus.password.message,modelValue:l.password,"onUpdate:modelValue":e[5]||(e[5]=t=>l.password=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1})):(0,a.kq)("",!0),l.updatePassword?((0,a.wg)(),(0,a.j4)(li.D,{key:1,class:"!tw-py-2 tw-pt-0",cols:"12",md:"6"},{default:(0,a.w5)((()=>[(0,a._)("div",w_,[u_,(0,a.Wm)(X.hw,{"error-messages":l.formStatus.confirmPassword.message,modelValue:l.confirmPassword,"onUpdate:modelValue":e[6]||(e[6]=t=>l.confirmPassword=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1})):(0,a.kq)("",!0)])),_:1})])),_:1}),(0,a.Wm)(li.D,{cols:"12",md:"6"},{default:(0,a.w5)((()=>[(0,a.Wm)(ri.o,null,{default:(0,a.w5)((()=>[(0,a.Wm)(li.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,a.w5)((()=>[(0,a._)("div",null,[p_,(0,a.Wm)(hu.r,{class:"text-capitalize","error-messages":l.formStatus.role,items:o.roles,"item-title":"name","item-value":"id",modelValue:l.role,"onUpdate:modelValue":e[7]||(e[7]=t=>l.role=t),variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","items","modelValue"])])])),_:1}),(0,a.Wm)(li.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,a.w5)((()=>[(0,a._)("div",m_,[h_,(0,a.Wm)(vl.G,{modelValue:l.status,"onUpdate:modelValue":e[8]||(e[8]=t=>l.status=t),color:"primary-color","hide-details":!0,flat:""},null,8,["modelValue"])])])),_:1}),o.isAgente?((0,a.wg)(),(0,a.j4)(li.D,{key:0,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a._)("div",null,[(0,a.Wm)(vl.G,{modelValue:l.isHavingAllProducts,"onUpdate:modelValue":e[9]||(e[9]=t=>l.isHavingAllProducts=t),color:"primary-color",label:"All Products"},null,8,["modelValue"])]),g_,(0,a._)("div",null,[(0,a.Wm)(ny.f,{disabled:l.isHavingAllProducts,modelValue:l.selectedProducts,"onUpdate:modelValue":e[10]||(e[10]=t=>l.selectedProducts=t),"filter-keys":"name",density:"compact","item-value":"id","item-title":"name",variant:"outlined",color:"primary-color",chips:"",items:o.selectProducts,multiple:""},null,8,["disabled","modelValue","items"])])])])),_:1})):(0,a.kq)("",!0),o.isDelivery?((0,a.wg)(),(0,a.j4)(li.D,{key:1,class:"!tw-py-2",cols:"12",md:"12"},{default:(0,a.w5)((()=>[(0,a._)("div",null,[f_,(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[11]||(e[11]=t=>l.city=t),class:"tw-w-full tw-py-[7px] focus:tw-border-orange-500 tw-px-4 tw-border tw-outline-orange-500 tw-border-neutral-400 tw-border-solid tw-rounded-md"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.cities,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,v_)))),128))],512),[[i.bM,l.city]])])])),_:1})):(0,a.kq)("",!0)])),_:1})])),_:1}),o.isDelivery?((0,a.wg)(),(0,a.j4)(li.D,{key:0,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,a.w5)((()=>[(0,a._)("div",null,[y_,(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[12]||(e[12]=t=>l.deliveryCity=t),class:"tw-w-full tw-py-[7px] focus:tw-border-orange-500 tw-px-4 tw-border tw-outline-orange-500 tw-border-neutral-400 tw-border-solid tw-rounded-md"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.cities,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,__)))),128))],512),[[i.bM,l.deliveryCity]]),x_,(0,a.Wm)(X.hw,{"hide-details":!0,modelValue:l.deliveryCityFee,"onUpdate:modelValue":e[13]||(e[13]=t=>l.deliveryCityFee=t),clearable:"",type:"number","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["modelValue"]),(0,a.Wm)(G.T,{onClick:o.handleAddCity,class:"tw-text-white tw-my-3",variant:"flat",color:"primary-color",block:""},{default:(0,a.w5)((()=>[b_])),_:1},8,["onClick"])])])),_:1})):(0,a.kq)("",!0),o.isDelivery?((0,a.wg)(),(0,a.j4)(li.D,{key:1,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,a.w5)((()=>[(0,a._)("div",null,[k_,(0,a._)("div",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.deliveryCities,(t=>((0,a.wg)(),(0,a.iD)("div",{class:"tw-flex tw-items-center tw-gap-2",key:t},[(0,a._)("div",null,(0,Q.zw)(l.cities.filter((e=>e.id==t.city_id))[0]?.name),1),(0,a._)("div",null,(0,Q.zw)(t.fee)+" DH ",1),(0,a._)("div",null,[(0,a.Wm)(J.t,{color:"red",onClick:e=>o.removeCity(t.id),size:"x-small"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-delete")])),_:2},1032,["onClick"])])])))),128))])])])),_:1})):(0,a.kq)("",!0)])),_:1})]),(0,a._)("div",C_,[(0,a.Wm)(G.T,{link:"",to:{name:"user/list"},color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,a.w5)((()=>[D_])),_:1}),(0,a.Wm)(G.T,{onClick:o.update,loading:l.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,a.w5)((()=>[S_])),_:1},8,["onClick","loading"])])])):(0,a.kq)("",!0)])}var U_={data(){return{serverUrl:F,isFetched:!1,isRolesFetched:!1,isUserFetched:!1,isProductsFetched:!1,isLoading:!1,updatePassword:!1,autoId:1,cities:[],deliveryCity:1,deliveryCityFee:0,city:1,deliveryCities:[],formStatus:{firstname:{valid:!0,message:""},lastname:{valid:!0,message:""},phone:{valid:!0,message:""},email:{valid:!0,message:""},password:{valid:!0,message:""},confirmPassword:{valid:!0,message:""}},id:null,firstname:"",lastname:"",phone:"",email:"",password:"",confirmPassword:"",role:"",user_image:null,status:!1,product:null,products:[],selectedProducts:[],isMultipleProducts:!1,isHavingAllProducts:!1}},computed:{roles(){return this.$store.getters["user/roles"]},isFormReady(){return this.isFetched},isAgente(){return 2===this.role},isDelivery(){return 3===this.role},user(){return{id:this.id,firstname:this.firstname,lastname:this.lastname,phone:this.phone,email:this.email,password:this.password,product_id:this.product,deliveryCities:this.deliveryCities,city:this.city,role:this.role,status:this.status?1:0}},selectProducts(){return this.isMultipleProducts,[...this.products]},userProducts(){return this.selectedProducts}},watch:{role(t){console.log("changed"),2===t&&0===this.products.length&&(this.isProductsFetched=!1)}},methods:{update(){if(!this.validate())return!1;const t={...this.user,role:this.role,product_id:this.userProducts,city:this.city,deliveryCities:this.deliveryCities,having_all:this.isHavingAllProducts};this.isLoading=!0,K.update(t,this.updatePassword).then((t=>{"USER_UPDATED"==t.data.code&&this.$alert({type:"success",title:t.data.message})})).catch((t=>{this.$handleApiError(t);const e=t?.response?.data;switch(console.log(t),e?.code){case"VALIDATION_ERROR":for(let t in e.error)this.formStatus[t]={valid:!1,message:e.error[t][0]};break}return t})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1}))},validate(){this.formStatus["email"]=yt(this.email),this.formStatus["firstname"]=xt(this.firstname),this.formStatus["lastname"]=xt(this.lastname),this.formStatus["phone"]=xt(this.phone),this.formStatus["password"]=_t(this.password),this.formStatus["confirmPassword"]=kt(this.password,this.confirmPassword);const t=this.formStatus["email"].valid,e=this.formStatus["firstname"].valid,s=this.formStatus["lastname"].valid,i=this.formStatus["phone"].valid;if(this.updatePassword){const a=this.formStatus["password"].valid,r=this.formStatus["confirmPassword"].valid;return t&&e&&s&&a&&r&&i}return t&&e&&s&&i},removeCity(t){this.deliveryCities=this.deliveryCities.filter((e=>e.id!==t))},handleAddCity(){if(this.deliveryCityFee<=0)return!1;this.deliveryCities.push({id:this.autoId,city_id:this.deliveryCity,fee:this.deliveryCityFee}),this.autoId+=1,this.deliveryCity=1,this.deliveryCityFee=0},async getRoles(){await K.roles().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.roles;this.$store.dispatch("user/setRoles",e),this.isRolesFetched=!0}})).catch(this.$handleApiError)},async getUser(){return K.getUser(this.$route.params.id).then((t=>{if("USER_SUCCESS"==t?.data.code){const e=t.data.data.user;if(this.id=e.id,this.firstname=e.firstname,this.lastname=e.lastname,this.email=e.email,this.phone=e.phone,this.role=e.role,2==e.role&&(this.isHavingAllProducts=1==e.having_all,this.selectedProducts=e?.product),this.user_image=e.photo,this.status=1==e.status,this.isUserFetched=!0,3==e.role){console.log("this is delivery"),this.city=e?.city?.id;let t=0;this.deliveryCities=e.deliveryPlaces.map((e=>(parseInt(e.id)>=t&&(t=parseInt(e.id)+1),{id:e.id,city_id:e.city_id,fee:parseInt(e.fee)}))),this.autoId=t}}})).catch(this.$handleApiError)},async getProducts(){return ti.all().then((t=>{this.products=t.data.data.products,this.products.length>0?this.product=this.user.product_id:this.product=null,this.isProductsFetched=!0}),(t=>this.$handleApiError(t)))},async getCities(){return K.cities().then((t=>{console.log(t.data),this.cities=t.data.data}))}},async mounted(){0==this.roles.length?await this.getRoles():this.isRolesFetched=!0,Promise.allSettled([this.getRoles(),this.getProducts(),this.getCities(),this.getUser()]).then((()=>{this.selectedProducts.length==this.products.length&&(this.product=0,this.isMultipleProducts=!1),this.isFetched=!0}),(t=>this.$handleApiError(t)))}};const L_=(0,d.Z)(U_,[["render",z_]]);var A_=L_;const P_=(0,a._)("div",{class:"mb-5"},[(0,a._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Add New Role "),(0,a._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Create new Role")],-1),W_={key:0},E_={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},$_={class:"md:tw-w-1/2 tw-w-full"},T_=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Role Name",-1),O_={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},V_={class:"mb-3 text-body-2 tw-text-zinc-700"},R_={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-text-xs"},q_={class:"tw-flex tw-flex-wrap tw-gap-2 tw-mt-5"},F_=["onClick"],I_={key:0},N_={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},j_=(0,a._)("span",{class:"text-white text-capitalize"},"Cancel",-1),M_=(0,a._)("span",{class:"text-white text-capitalize"},"Create",-1);function H_(t,e,s,i,r,l){const o=(0,a.up)("LoadingAnimation");return(0,a.wg)(),(0,a.iD)("div",null,[P_,r.isFormReady?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",W_,[(0,a.Wm)(o)])),r.isFormReady?((0,a.wg)(),(0,a.iD)("div",E_,[(0,a._)("div",null,[(0,a.Wm)(ri.o,null,{default:(0,a.w5)((()=>[(0,a.Wm)(li.D,{cols:"12",md:"12"},{default:(0,a.w5)((()=>[(0,a.Wm)(ri.o,null,{default:(0,a.w5)((()=>[(0,a.Wm)(li.D,{class:"!tw-py-2",cols:"12",md:"12"},{default:(0,a.w5)((()=>[(0,a._)("div",$_,[T_,(0,a.Wm)(X.hw,{error:!r.formStatus.name.valid,"hide-details":!0,onKeyup:e[0]||(e[0]=t=>l.resetError("firstname")),modelValue:r.name,"onUpdate:modelValue":e[1]||(e[1]=t=>r.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,a._)("div",O_,(0,Q.zw)(r.formStatus.name.message),1)])])),_:1}),(0,a.Wm)(li.D,{cols:"12"},{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a._)("div",V_,[(0,a.Uk)(" Select Permissions: "),(0,a._)("div",R_,(0,Q.zw)(r.formStatus.permissions.message),1)]),(0,a._)("div",q_,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.permissions,(t=>((0,a.wg)(),(0,a.iD)("div",{onClick:e=>l.handleClick(t),class:(0,Q.C_)([{"!tw-bg-orange-500 !tw-text-white":r.selectedPermissions.includes(t)},"tw-py-1 tw-px-2 tw-bg-gray-900/10 tw-text-gray-900 tw-rounded-lg tw-cursor-pointer"]),key:t},[(0,a._)("span",null,(0,Q.zw)(t),1)],10,F_)))),128))])])])),_:1})])),_:1})])),_:1}),(0,a.Wm)(li.D,{cols:"12",md:"6"},{default:(0,a.w5)((()=>[r.show?((0,a.wg)(),(0,a.iD)("div",I_,(0,Q.zw)(r.selectedPermissions),1)):(0,a.kq)("",!0)])),_:1})])),_:1})]),(0,a._)("div",N_,[(0,a.Wm)(G.T,{link:"",to:"/",color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,a.w5)((()=>[j_])),_:1}),(0,a.Wm)(G.T,{onClick:l.create,loading:r.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,a.w5)((()=>[M_])),_:1},8,["onClick","loading"])])])):(0,a.kq)("",!0)])}var Y_={data(){return{localUrl:q,isFormReady:!1,isLoading:!1,show:!1,formStatus:{name:{valid:!0,message:""},permissions:{valid:!0,message:""}},name:"",permissions:[],selectedPermissions:[]}},computed:{roles(){return this.$store.getters["user/roles"]}},methods:{create(){if(!this.validate())return!1;this.isLoading=!0,K.createRole({name:this.name,permissions:this.selectedPermissions}).then((t=>{"ROLE_ADDED"===t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.getRoles(),this.name="",this.selectedPermissions=[])})).catch((t=>{this.$handleApiError(t);const e=t?.response?.data;if("VALIDATION_ERROR"==e?.code)for(let s in e.error)this.formStatus[s]={valid:!1,message:e.error[s][0]}})).finally((()=>{this.isLoading=!1}))},handleClick(t){this.selectedPermissions.includes(t)?this.selectedPermissions=this.selectedPermissions.filter((e=>e!==t)):this.selectedPermissions.push(t)},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.name=xt(this.name,"Name"),this.formStatus.permissions=Dt(this.selectedPermissions),this.formStatus.name.valid&&this.formStatus.permissions.valid},getRoles(){K.roles().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.roles;this.$store.dispatch("user/setRoles",e),this.isFormReady=!0}})).catch(this.$handleApiError)}},async mounted(){0==this.roles.length?await this.getRoles():this.isFormReady=!0,this.permissions=this.$store.getters["user/permissions"]}};const K_=(0,d.Z)(Y_,[["render",H_]]);var Z_=K_;const Q_={class:"mb-5 tw-flex tw-justify-between tw-items-center"},G_=(0,a._)("div",null,[(0,a._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Roles List"),(0,a._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage all Roles")],-1),B_={key:0},J_=(0,a._)("span",{class:"text-white"}," Add Role ",-1),X_={key:0},tx={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},ex={class:"mb-5 tw-flex"},sx={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},ix={class:""};function ax(t,e,s,r,l,o){const n=(0,a.up)("LoadingAnimation"),d=(0,a.up)("RolesTable");return(0,a.wg)(),(0,a.iD)("div",{key:o.roles.length},[(0,a._)("div",Q_,[G_,t.$can("create_role")?((0,a.wg)(),(0,a.iD)("div",B_,[(0,a.Wm)(G.T,{color:"primary-color",link:"",to:{name:"user/addRole"},variant:"flat",class:"text-capitalize"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{icon:"mdi-plus",class:"mr-2 text-white"}),J_])),_:1})])):(0,a.kq)("",!0)]),o.fetched?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",X_,[(0,a.Wm)(n)])),o.fetched?((0,a.wg)(),(0,a.iD)("div",tx,[(0,a._)("div",ex,[(0,a.Wm)(G.T,{icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white !tw-w-0 !tw-overflow-hidden"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white",size:"xx-large"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,a._)("div",sx,[(0,a.Wm)(Kt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-w-full tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[i.nr,l.search]])])]),(0,a._)("div",ix,[(0,a.Wm)(d,{roles:o.filteredRoles,columns:l.columns},null,8,["roles","columns"])])])):(0,a.kq)("",!0)])}const rx={class:"tw-relative tw-overflow-x-auto sm:tw-rounded-lg"},lx={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},ox={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},nx=(0,a._)("th",{scope:"col",class:"tw-p-4"},[(0,a._)("div",{class:"tw-flex tw-items-center"},[(0,a._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,a._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),dx={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},cx=(0,a._)("td",{class:"tw-w-4 tw-p-4"},[(0,a._)("div",{class:"tw-flex tw-items-center"},[(0,a._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,a._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),wx={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},ux={class:"tw-px-6 tw-py-4 tw-uppercase"},px={class:"tw-px-6 tw-py-4"},mx={class:"tw-flex tw-items-center tw-px-6 tw-py-4 tw-space-x-3"},hx={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},gx={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},fx=(0,a._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),vx=["value"],yx={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},_x={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},xx={class:"tw-text-white"};function bx(t,e,s,r,l,o){const n=(0,a.up)("RolePermissions"),d=(0,a.up)("RoleActions");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",rx,[(0,a._)("table",lx,[(0,a._)("thead",ox,[(0,a._)("tr",null,[nx,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.columns,(t=>((0,a.wg)(),(0,a.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,a._)("div",dx,(0,Q.zw)(t.name),1)])))),128))])]),(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.items,(t=>((0,a.wg)(),(0,a.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[cx,(0,a._)("th",wx,(0,Q.zw)(t.id),1),(0,a._)("td",ux,(0,Q.zw)(t.name),1),(0,a._)("td",px,[(0,a.Wm)(n,{role:t},null,8,["role"])]),(0,a._)("td",mx,[(0,a.Wm)(d,{role:t},null,8,["role"])])])))),128))])])]),(0,a._)("div",hx,[(0,a._)("div",gx,[fx,(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.allowedLimit,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t,key:t},(0,Q.zw)(t),9,vx)))),128))],512),[[i.bM,l.paginationLimit]])]),(0,a._)("div",yx,[(0,a._)("div",_x,(0,Q.zw)(o.prevRange+1)+" - "+(0,Q.zw)(l.currentPage==o.pageCount?s.roles.length:o.nextRange)+" of "+(0,Q.zw)(s.roles.length)+" items ",1),(0,a._)("div",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.pageCount,(t=>((0,a.wg)(),(0,a.j4)(G.T,{onClick:e=>l.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==l.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,a.w5)((()=>[(0,a._)("span",xx,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const kx={key:0},Cx={class:"tw-flex tw-flex-wrap tw-gap-2"};function Dx(t,e,s,i,r,l){const o=(0,a.up)("popup");return["admin","agente","delivery"].includes(s.role.name)?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",kx,[t.$can("update_role")?((0,a.wg)(),(0,a.j4)(G.T,{key:0,to:"/users/roles/update/"+s.role.id,class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-pencil-outline")])),_:1})])),_:1},8,["to"])):(0,a.kq)("",!0),t.$can("delete_role")&&"admin"!==s.role.name?((0,a.wg)(),(0,a.j4)(G.T,{key:1,onClick:e[0]||(e[0]=t=>r.showPopupDelete=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,a.kq)("",!0),(0,a.Wm)(o,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this Role?</p> You won't be able to revert this!",loading:r.isLoadingDelete,visible:r.showPopupDelete,onResolved:l.handleResolvedDelete},null,8,["loading","visible","onResolved"]),(0,a.Wm)(o,{noConfirm:!0,type:"info",title:"Permissions",loading:r.isLoadingShow,visible:r.showPopupShow,onResolved:l.handleResolvedShow},{default:(0,a.w5)((()=>[(0,a._)("div",Cx,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.permissions,(t=>((0,a.wg)(),(0,a.iD)("div",{class:"tw-py-1 tw-px-2 tw-bg-gray-900/10 tw-text-gray-900 tw-rounded-lg tw-cursor-pointer",key:t},(0,Q.zw)(t),1)))),128))])])),_:1},8,["loading","visible","onResolved"])]))}var Sx={props:["rowIndex","prop","role"],name:"roleActions",data(){return{showPopupDelete:!1,showPopupShow:!1,isLoadingDelete:!1,isLoadingShow:!1,permissions:["create_user","delete_user","update_user","show_user"]}},methods:{handleResolvedDelete(t){t?(this.isLoadingDelete=!0,K.deleteRole(this.role.id).then((t=>{"ROLE_DELETED"==t.data.code&&(this.isLoadingDelete=!1,this.$alert({type:"success",title:"Role Deleted Successfully"})),K.roles().then((t=>{"SUCCESS"==t.data.code&&this.$store.dispatch("user/setRoles",t.data.data.roles)})).catch(this.$handleApiError)})).catch(this.$handleApiError).finally((()=>{this.isLoadingDelete=!1,this.showPopupDelete=!1}))):this.showPopupDelete=!1},handleResolvedShow(t){t?console.log(t):this.showPopupShow=!1}}};const zx=(0,d.Z)(Sx,[["render",Dx]]);var Ux=zx;const Lx={class:"tw-h-100 tw-flex tw-items-center tw-max-w-[750px] tw-flex-wrap tw-gap-2"},Ax=["title"];function Px(t,e,s,i,r,l){return(0,a.wg)(),(0,a.iD)("div",Lx,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.permissions,(t=>((0,a.wg)(),(0,a.iD)("div",{class:"tw-py-0 tw-px-2 tw-text-xs tw-h-5 tw-bg-gray-900/10 tw-text-gray-900 tw-rounded-lg",title:t.description,key:t.name},(0,Q.zw)(t.name),9,Ax)))),128))])}var Wx={props:["role"],name:"rolePermissions",data(){return{}},computed:{permissions(){return this.role.permissions.map((t=>t))}}};const Ex=(0,d.Z)(Wx,[["render",Px]]);var $x=Ex,Tx={props:["columns","roles"],components:{RoleActions:Ux,RolePermissions:$x},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.roles.length/this.paginationLimit)},items(){return this.roles.slice(this.prevRange,this.nextRange)}},methods:{}};const Ox=(0,d.Z)(Tx,[["render",bx]]);var Vx=Ox,Rx={components:{RolesTable:Vx},data(){return{localUrl:q,search:"",columns:[{prop:"id",name:"#"},{prop:"name",name:"Role Name"},{prop:"permissions",name:"Permissions"},{name:"Acions",prop:"roles"}]}},computed:{roles(){return this.$store.getters["user/roles"]},fetched(){return this.$store.getters["user/fetchedRoles"]},filteredRoles(){return this.roles.filter((t=>{const e=t.permissions.map((t=>t.name));return!!(""===this.search||t.name.toLocaleLowerCase().includes(this.search.toLocaleLowerCase())||e.includes(this.search.toLocaleLowerCase())||e.some((t=>t.toLowerCase().includes(this.search.toLocaleLowerCase()))))}))}},methods:{getRoles(){return K.roles().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.roles;this.$store.dispatch("user/setRoles",e),this.$store.dispatch("user/setFetchedRoles",!0)}})).catch(this.$handleApiError)}},mounted(){this.rolesFetched||this.getRoles()}};const qx=(0,d.Z)(Rx,[["render",ax]]);var Fx=qx;const Ix=(0,a._)("div",{class:"mb-5"},[(0,a._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Update Role "),(0,a._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Update existing role")],-1),Nx={key:0},jx={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},Mx={class:"md:tw-w-1/2 tw-w-full"},Hx=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Role Name ",-1),Yx={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Kx={class:"mb-3 text-body-2 tw-text-zinc-700"},Zx={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-text-xs"},Qx={class:"tw-flex tw-flex-wrap tw-gap-2 tw-mt-5"},Gx=["onClick"],Bx={key:0},Jx={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},Xx=(0,a._)("span",{class:"text-white text-capitalize"},"Cancel",-1),tb=(0,a._)("span",{class:"text-white text-capitalize"},"Update",-1);function eb(t,e,s,i,r,l){const o=(0,a.up)("LoadingAnimation");return(0,a.wg)(),(0,a.iD)("div",null,[Ix,r.isFormReady?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",Nx,[(0,a.Wm)(o)])),r.isFormReady?((0,a.wg)(),(0,a.iD)("div",jx,[(0,a._)("div",null,[(0,a.Wm)(ri.o,null,{default:(0,a.w5)((()=>[(0,a.Wm)(li.D,{cols:"12",md:"12"},{default:(0,a.w5)((()=>[(0,a.Wm)(ri.o,null,{default:(0,a.w5)((()=>[(0,a.Wm)(li.D,{class:"!tw-py-2",cols:"12",md:"12"},{default:(0,a.w5)((()=>[(0,a._)("div",Mx,[Hx,(0,a.Wm)(X.hw,{error:!r.formStatus.name.valid,"hide-details":!0,onKeyup:e[0]||(e[0]=t=>l.resetError("firstname")),modelValue:r.name,"onUpdate:modelValue":e[1]||(e[1]=t=>r.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,a._)("div",Yx,(0,Q.zw)(r.formStatus.name.message),1)])])),_:1}),(0,a.Wm)(li.D,{cols:"12"},{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a._)("div",Kx,[(0,a.Uk)(" Select Permissions: "),(0,a._)("div",Zx,(0,Q.zw)(r.formStatus.permissions.message),1)]),(0,a._)("div",Qx,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.permissions,(t=>((0,a.wg)(),(0,a.iD)("div",{onClick:e=>l.handleClick(t),class:(0,Q.C_)([{"!tw-bg-orange-500 !tw-text-white":r.selectedPermissions.includes(t)},"tw-py-1 tw-px-2 tw-bg-gray-900/10 tw-text-gray-900 tw-rounded-lg tw-cursor-pointer"]),key:t},(0,Q.zw)(t),11,Gx)))),128))])])])),_:1})])),_:1})])),_:1}),(0,a.Wm)(li.D,{cols:"12",md:"6"},{default:(0,a.w5)((()=>[r.show?((0,a.wg)(),(0,a.iD)("div",Bx,(0,Q.zw)(r.selectedPermissions),1)):(0,a.kq)("",!0)])),_:1})])),_:1})]),(0,a._)("div",Jx,[(0,a.Wm)(G.T,{link:"",to:"/users/roles",color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,a.w5)((()=>[Xx])),_:1}),(0,a.Wm)(G.T,{onClick:l.update,loading:r.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,a.w5)((()=>[tb])),_:1},8,["onClick","loading"])])])):(0,a.kq)("",!0)])}var sb={data(){return{localUrl:q,isFormReady:!1,isLoading:!1,show:!1,formStatus:{name:{valid:!0,message:""},permissions:{valid:!0,message:""}},name:"",permissions:[],selectedPermissions:[]}},computed:{roles(){return this.$store.getters["user/roles"]}},methods:{update(){if(!this.validate())return!1;this.isLoading=!0,K.updateRole(this.$route.params.id,{name:this.name,permissions:this.selectedPermissions}).then((t=>{"ROLE_UPDATED"===t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.getRoles())})).catch((t=>{this.$handleApiError(t);const e=t?.response?.data;if("VALIDATION_ERROR"==e?.code)for(let s in e.error)this.formStatus[s]={valid:!1,message:e.error[s][0]}})).finally((()=>{this.isLoading=!1}))},handleClick(t){this.selectedPermissions.includes(t)?this.selectedPermissions=this.selectedPermissions.filter((e=>e!==t)):this.selectedPermissions.push(t)},addPermissions(t){return t},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.name=xt(this.name,"Name"),this.formStatus.permissions=Dt(this.selectedPermissions),this.formStatus.name.valid&&this.formStatus.permissions.valid},getRole(){K.getRole(this.$route.params.id).then((t=>{this.name=t.data.data.role,this.selectedPermissions=[...t.data.data.permission],this.isFormReady=!0}))},getRoles(){K.roles().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.roles;this.$store.dispatch("user/setRoles",e),this.isFormReady=!0}})).catch(this.$handleApiError)}},async mounted(){await this.getRole(),this.permissions=this.$store.getters["user/permissions"]}};const ib=(0,d.Z)(sb,[["render",eb]]);var ab=ib,rb={name:"users",path:"/users",component:ii,meta:{module:"user"},children:[{name:"user/list",path:"",component:oy,meta:{module:"user",subModule:"user/list",title:"Users List",gate:"show_all_users"}},{name:"user/add",path:"add",component:Ky,meta:{module:"user",subModule:"user/add",title:"Add User",gate:"create_user"}},{name:"user/update",path:"update/:id",component:A_,meta:{module:"user",subModule:"user/update",title:"Update User",gate:"update_user"}},{name:"user/addRole",path:"addRole",component:Z_,meta:{module:"user",subModule:"user/addRole",title:"Add Role",gate:"create_role"}},{name:"user/roles",path:"roles",component:Fx,meta:{module:"user",subModule:"user/roles",title:"Roles List",gate:"show_all_roles"}},{name:"user/updateRole",path:"roles/update/:id",component:ab,meta:{module:"user",subModule:"user/updateRole",title:"Update Role",gate:"view_role"}}]};const lb={class:"mb-5 tw-flex tw-justify-between tw-items-center"},ob=(0,a._)("div",null,[(0,a._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Sales List "),(0,a._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage your sales")],-1),nb={key:0},db=(0,a._)("span",{class:"text-white"}," Add Sale ",-1),cb={key:0},wb={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},ub={class:"mb-5 tw-flex"},pb={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},mb={class:""};function hb(t,e,s,r,l,o){const n=(0,a.up)("LoadingAnimation"),d=(0,a.up)("SalesAnalytics"),c=(0,a.up)("IndexFilter"),w=(0,a.up)("SalesTable"),u=(0,a.up)("AddSale");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",lb,[ob,t.$can("create_sale")&&o.fetched?((0,a.wg)(),(0,a.iD)("div",nb,[(0,a.Wm)(G.T,{color:"primary-color",onClick:e[0]||(e[0]=t=>l.showPopup=!0),variant:"flat",class:"text-capitalize"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{icon:"mdi-plus",class:"mr-2 text-white"}),db])),_:1})])):(0,a.kq)("",!0)]),o.fetched?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",cb,[(0,a.Wm)(n)])),o.fetched?((0,a.wg)(),(0,a.iD)("div",wb,[(0,a.Wm)(d,{sales:o.sales},null,8,["sales"]),(0,a._)("div",ub,[(0,a.Wm)(G.T,{onClick:e[1]||(e[1]=t=>l.showFilters=!l.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white",size:"xx-large"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,a._)("div",pb,[(0,a.Wm)(Kt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-w-full tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[i.nr,l.search]])]),(0,a.Wm)(ts.C),(0,a.Wm)(G.T,{onClick:o.handleReset,icon:"",rounded:"lg",variant:"flat",size:"small",disabled:l.isButtonDisabled,loading:l.isLoadingReset,color:"red",class:"text-white tw-mr-2"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white",icon:"mdi-restart-alert",size:"xx-large"})])),_:1},8,["onClick","disabled","loading"]),(0,a.Wm)(G.T,{onClick:o.getSales,icon:"",rounded:"lg",variant:"flat",size:"small",color:"blue",class:"text-white tw-mr-2"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white",icon:"mdi-autorenew",size:"xx-large"})])),_:1},8,["onClick"])]),(0,a._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[1000px] !tw-overflow-visible":l.showFilters}])},[(0,a.Wm)(c,{sales:o.sales,search:l.search,filtered:l.filteredSales,"onUpdate:filtered":e[3]||(e[3]=t=>l.filteredSales=t),selected:o.selectedSales},null,8,["sales","search","filtered","selected"])],2),(0,a._)("div",mb,[((0,a.wg)(),(0,a.j4)(w,{onSelected:o.handleSelected,"selected-reset":l.selected,key:l.filteredSales.length,sales:l.filteredSales},null,8,["onSelected","selected-reset","sales"]))]),(0,a.Wm)(u,{onCancel:e[4]||(e[4]=t=>l.showPopup=!1),visible:l.showPopup},null,8,["visible"])])):(0,a.kq)("",!0)])}const gb={key:0,class:"md:tw-w-[80%] tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},fb={key:1,class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},vb=(0,a._)("h1",{class:"tw-text-lg"},"Create Order",-1),yb={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},_b={class:"md:tw-col-span-6 tw-col-span-12"},xb=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Client",-1),bb={class:"md:tw-col-span-6 tw-col-span-12"},kb=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Phone",-1),Cb={class:"md:tw-col-span-6 tw-col-span-12"},Db=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"City",-1),Sb=["value"],zb={class:"md:tw-col-span-6 tw-col-span-12"},Ub=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Address",-1),Lb={class:"md:tw-col-span-12 tw-col-span-12"},Ab=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Price",-1),Pb={class:"md:tw-col-span-6 tw-col-span-12 tw-mt-3 tw-border-t tw-border-neutral-300 tw-pt-3"},Wb=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Warehouse",-1),Eb=(0,a._)("option",{value:0}," Select ",-1),$b=["value"],Tb={class:"md:tw-col-span-6 tw-col-span-12 tw-mt-3 tw-border-t tw-border-neutral-300 tw-pt-3"},Ob=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Product",-1),Vb=(0,a._)("option",{value:0}," Select ",-1),Rb=["value"],qb={class:"md:tw-col-span-6 tw-col-span-12"},Fb=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Variations",-1),Ib=(0,a._)("option",{value:0}," Select ",-1),Nb=["value"],jb={class:"md:tw-col-span-6 tw-col-span-12"},Mb=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),Hb={class:"md:tw-col-span-6 tw-col-span-12"},Yb={class:"tw-flex tw-items-center tw-w-full tw-text-neutral-600 dark:tw-text-neutral-200 tw-text-md tw-py-1"},Kb={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit -tw-rotate-90 tw-scale-75"},Zb=(0,a._)("div",{class:"tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),Qb={class:"tw-flex tw-flex-col tw-justify-center"},Gb={class:"md:tw-col-span-6 tw-col-span-12"},Bb={key:0,class:"md:tw-col-span-12 tw-col-span-12"},Jb={class:"tw-max-w-full tw-overflow-auto"},Xb={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},tk={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},ek={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},sk={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},ik={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},ak={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},rk={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},lk={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},ok={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},nk=(0,a._)("span",{class:"text-white"}," Cancel ",-1),dk=(0,a._)("span",{class:"text-white"}," Save ",-1);function ck(t,e,s,r,l,o){const n=(0,a.up)("LoadingAnimation"),d=(0,a.up)("popup-full");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(d,{onCancel:e[12]||(e[12]=e=>t.$emit("cancel")),visible:s.visible},{default:(0,a.w5)((()=>[l.isLoaded?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",gb,[(0,a.Wm)(n)])),l.isLoaded?((0,a.wg)(),(0,a.iD)("div",fb,[vb,(0,a._)("div",yb,[(0,a._)("div",_b,[xb,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>l.sale.fullname=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[i.nr,l.sale.fullname]])]),(0,a._)("div",bb,[kb,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>l.sale.phone=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[i.nr,l.sale.phone]])]),(0,a._)("div",Cb,[Db,(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.sale.city=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.cities,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t.name,key:t.id},(0,Q.zw)(t.name),9,Sb)))),128))],512),[[i.bM,l.sale.city]])]),(0,a._)("div",zb,[Ub,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>l.sale.adresse=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[i.nr,l.sale.adresse]])]),(0,a._)("div",Lb,[Ab,(0,a.wy)((0,a._)("input",{type:"number","onUpdate:modelValue":e[4]||(e[4]=t=>l.sale.price=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[i.nr,l.sale.price]])]),(0,a._)("div",Pb,[Wb,(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>l.warehouse_id=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[Eb,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.warehouses,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,$b)))),128))],512),[[i.bM,l.warehouse_id]])]),(0,a._)("div",Tb,[Ob,(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>l.product_id=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[Vb,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.filtredProducts,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,Rb)))),128))],512),[[i.bM,l.product_id]])]),(0,a._)("div",qb,[Fb,(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[7]||(e[7]=t=>l.product_variation_id=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[Ib,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.variations,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.size)+" / "+(0,Q.zw)(t.color),9,Nb)))),128))],512),[[i.bM,l.product_variation_id]])]),(0,a._)("div",jb,[Mb,(0,a.wy)((0,a._)("input",{type:"number","onUpdate:modelValue":e[8]||(e[8]=t=>l.quantity=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[i.nr,l.quantity]])]),(0,a._)("div",Hb,[(0,a._)("div",Yb,[(0,a._)("label",Kb,[(0,a.wy)((0,a._)("input",{type:"checkbox","onUpdate:modelValue":e[9]||(e[9]=t=>l.sale.counts_from_warehouse=t),class:"tw-sr-only tw-peer"},null,512),[[i.e8,l.sale.counts_from_warehouse]]),Zb]),(0,a._)("label",Qb,[(0,a._)("span",{class:(0,Q.C_)([[l.sale.counts_from_warehouse?"tw-text-orange-500":"tw-text-neutral-500"],"tw-ml-1 tw-text-sm tw-font-medium tw-duration-300"])},"Warehouse",2),(0,a._)("span",{class:(0,Q.C_)([[l.sale.counts_from_warehouse?"tw-text-neutral-500":"tw-text-orange-500"],"tw-ml-1 tw-text-sm tw-font-medium tw-duration-300"])},"Delivery",2)])])]),(0,a._)("div",Gb,[(0,a._)("button",{onClick:e[10]||(e[10]=(...t)=>o.addItem&&o.addItem(...t)),class:"tw-block tw-ml-auto tw-py-1 tw-px-4 tw-rounded tw-bg-emerald-500 tw-text-white"}," Add ")]),l.items.length?((0,a.wg)(),(0,a.iD)("div",Bb,[(0,a._)("div",Jb,[(0,a._)("table",Xb,[(0,a._)("thead",tk,[(0,a._)("tr",null,[((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(["product","variation","quantity","warehouse","actions"],(t=>(0,a._)("th",{class:(0,Q.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,a._)("div",ek,(0,Q.zw)(t),1)],2))),64))])]),(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.items,(t=>((0,a.wg)(),(0,a.iD)("tr",{key:t,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,a._)("th",sk,(0,Q.zw)(t.product.name),1),(0,a._)("th",ik,(0,Q.zw)(t.product_variation.size)+" / "+(0,Q.zw)(t.product_variation.color),1),(0,a._)("th",ak,(0,Q.zw)(t.quantity),1),(0,a._)("th",rk,(0,Q.zw)(t.product_variation.warehouse.name),1),(0,a._)("th",lk,[(0,a._)("div",null,[(0,a.Wm)(G.T,{onClick:e=>o.deleteItem(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])])))),128))])])])])):(0,a.kq)("",!0)]),(0,a._)("div",ok,[(0,a.Wm)(G.T,{onClick:e[11]||(e[11]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,a.w5)((()=>[nk])),_:1}),(0,a.Wm)(G.T,{loading:l.isLoading,onClick:o.create,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,a.w5)((()=>[dk])),_:1},8,["loading","onClick"])])])):(0,a.kq)("",!0)])),_:1},8,["visible"])])}var wk={props:["visible"],data(){return{isLoading:!1,isLoaded:!1,product_id:0,product_variation_id:0,warehouse_id:0,quantity:1,item_id:1,items:[],sale:{fullname:"",phone:"",city:"",adresse:"",price:0,counts_from_warehouse:!0}}},watch:{product_id(){this.product_variation_id=0},warehouse_id(){this.product_id=0,this.product_variation_id=0}},computed:{products(){return this.$store.getters["product/products"]},warehouses(){const t=this.products.flatMap((t=>t.variations.map((t=>t.warehouse)))),e=t.map((t=>t.id));return t.filter(((t,s)=>e.indexOf(t.id)===s))},filtredProducts(){return 0==this.warehouse_id?[]:this.products.filter((t=>t.variations.some((t=>t.warehouse_id==this.warehouse_id))))},cities(){return this.$store.getters["city/cities"]},variations(){return 0==this.product_id?[]:this.products.find((t=>t.id==this.product_id)).variations},isFormValid(){return!!this.sale.fullname&&!!this.sale.phone&&!!this.sale.adresse&&0!=this.sale.price&&this.items.length>0&&!!this.sale.city}},methods:{create(){if(!this.isFormValid)return this.$alert({type:"warning",title:"Please fill all the form"}),!1;this.isLoading=!0;const t={fullname:this.sale.fullname,phone:this.sale.phone,city:this.sale.city,price:this.sale.price,adresse:this.sale.adresse,orderItems:this.items,counts_from_warehouse:!0};vs.create(t).then((t=>{"SALE_ADDED"==t.data.code&&(this.$emit("cancel"),this.$alert({type:"success",title:"Sale created successfully"}),this.$store.dispatch("sale/add",t.data.data.sale))}),this.$handleApiError).finally((()=>this.isLoading=!1))},deleteItem(t){this.items=this.items.filter((e=>e.id!=t))},addItem(){if([this.warehouse_id,this.product_id,this.product_variation_id].includes(0))return this.$alert({title:"Choose a product",type:"warning"}),!1;const t=this.filtredProducts.find((t=>t.id==this.product_id)),e=this.variations.find((t=>t.id==this.product_variation_id)),s={id:this.item_id,product_id:t.id,product_ref:t.ref,product:t,product_variation:e,product_variation_id:e.id,quantity:this.quantity,price:0};this.items.push(s),this.product_id=0,this.product_variation_id=0,this.item_id+=1},getProducts(){ti.all().then((t=>{"SUCCESS"==t.data.code&&this.$store.dispatch("product/setProducts",t.data.data.products)}),(t=>{this.$handleApiError(t)})).finally((()=>this.isLoaded=!0))}},mounted(){this.getProducts(),this.sale.city=this.cities[0].name||1}};const uk=(0,d.Z)(wk,[["render",ck]]);var pk=uk;const mk={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},hk={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},gk={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},fk={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},vk={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},yk={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},_k={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},xk={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},bk={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"};function kk(t,e,s,i,r,l){const o=(0,a.up)("DateFilter"),n=(0,a.up)("UpsellFilter"),d=(0,a.up)("ConfirmationFilter"),c=(0,a.up)("AffectationFilter"),w=(0,a.up)("AgenteFilter"),u=(0,a.up)("DeliveryFilter"),p=(0,a.up)("ProductFilter"),m=(0,a.up)("ExcelExport");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",mk,[(0,a._)("div",hk,[(0,a.Wm)(o,{filter:r.config.dateFilter,"onUpdate:filter":e[0]||(e[0]=t=>r.config.dateFilter=t)},null,8,["filter"])]),(0,a._)("div",gk,[(0,a.Wm)(n,{filter:r.config.upsellFilter,"onUpdate:filter":e[1]||(e[1]=t=>r.config.upsellFilter=t)},null,8,["filter"])]),(0,a._)("div",fk,[(0,a.Wm)(d,{filter:r.config.confirmationFilter,"onUpdate:filter":e[2]||(e[2]=t=>r.config.confirmationFilter=t)},null,8,["filter"])]),(0,a._)("div",vk,[(0,a.Wm)(c,{filter:r.config.affectationFilter,"onUpdate:filter":e[3]||(e[3]=t=>r.config.affectationFilter=t)},null,8,["filter"])]),(0,a._)("div",yk,[(0,a.Wm)(w,{filter:r.config.agenteFilter,"onUpdate:filter":e[4]||(e[4]=t=>r.config.agenteFilter=t)},null,8,["filter"])]),(0,a._)("div",_k,[(0,a.Wm)(u,{filter:r.config.deliveryFilter,"onUpdate:filter":e[5]||(e[5]=t=>r.config.deliveryFilter=t)},null,8,["filter"])]),(0,a._)("div",xk,[(0,a.Wm)(p,{filter:r.config.productFilter,"onUpdate:filter":e[6]||(e[6]=t=>r.config.productFilter=t)},null,8,["filter"])]),(0,a._)("div",bk,[(0,a.Wm)(m,{selected:s.selected,filtered:s.filtered,sales:s.sales},null,8,["selected","filtered","sales"])])])])}const Ck=(0,a._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Date",-1),Dk=["onClick"];function Sk(t,e,s,i,r,l){const o=(0,a.up)("VueDatePicker");return(0,a.wg)(),(0,a.iD)("div",null,[Ck,(0,a.Wm)(o,{modelValue:r.date,"onUpdate:modelValue":[e[0]||(e[0]=t=>r.date=t),l.onDateRangePicked],onCleared:l.cleared,format:r.dateFilterFormat,range:"","preset-ranges":r.presetRanges},{yearly:(0,a.w5)((({label:t,range:e,presetDateRange:s})=>[(0,a._)("span",{onClick:t=>s(e)},(0,Q.zw)(t),9,Dk)])),_:1},8,["modelValue","onCleared","onUpdate:modelValue","format","preset-ranges"])])}var zk={data(){return{date:["",""],dateFilterFormat:"yyyy-MM-dd",formattedStartDate:"",formattedEndDate:"",presetRanges:[{label:"Today",range:[new Date,new Date]},{label:"Yesterday",range:[(0,yr.Z)(new Date,1),(0,yr.Z)(new Date,1)]},{label:"This month",range:[(0,_r.Z)(new Date),(0,xr.Z)(new Date)]},{label:"Last month",range:[(0,_r.Z)((0,br.Z)(new Date,1)),(0,xr.Z)((0,br.Z)(new Date,1))]},{label:"This year",range:[(0,kr.Z)(new Date),(0,Cr.Z)(new Date)]}]}},watch:{date(){this.$emit("update:filter",[this.formattedStartDate,this.formattedEndDate])}},methods:{onDateRangePicked(t){t?(this.formattedStartDate=t[0],this.formattedEndDate=t[1]):(this.formattedStartDate=null,this.formattedEndDate=null)},cleared(){this.date=["",""]}}};const Uk=(0,d.Z)(zk,[["render",Sk]]);var Lk=Uk;const Ak=(0,a._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Upsell",-1),Pk={class:"tw-relative"},Wk=(0,a._)("option",{value:"all"},"Select",-1),Ek=(0,a._)("option",{value:"oui"},"Oui",-1),$k=(0,a._)("option",{value:"non"},"Non",-1),Tk=[Wk,Ek,$k];function Ok(t,e,s,r,l,o){return(0,a.wg)(),(0,a.iD)("div",null,[Ak,(0,a._)("div",Pk,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.value=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},Tk,512),[[i.bM,l.value]]),(0,a.Wm)(J.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-chevron-down")])),_:1})])])}var Vk={data(){return{value:"all"}},watch:{value(t){this.$emit("update:filter",t)}}};const Rk=(0,d.Z)(Vk,[["render",Ok]]);var qk=Rk;const Fk=(0,a._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Delivery",-1),Ik={class:"tw-relative"},Nk=["value"];function jk(t,e,s,r,l,o){return(0,a.wg)(),(0,a.iD)("div",null,[Fk,(0,a._)("div",Ik,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.deliveryFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.deliveryStatus,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t.value?t.value:"all",key:t.id},(0,Q.zw)(t.value?t.value:"Select"),9,Nk)))),128))],512),[[i.bM,l.deliveryFilter]]),(0,a.Wm)(J.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-chevron-down")])),_:1})])])}var Mk={props:["filter"],data(){return{deliveryFilter:"all",deliveryStatus:Qo}},watch:{deliveryFilter(t){this.$emit("update:filter",t)}}};const Hk=(0,d.Z)(Mk,[["render",jk]]);var Yk=Hk;const Kk=(0,a._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Confirmation",-1),Zk={class:"tw-relative"},Qk=["value"];function Gk(t,e,s,r,l,o){return(0,a.wg)(),(0,a.iD)("div",null,[Kk,(0,a._)("div",Zk,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.confirmationFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.confirmations,(t=>((0,a.wg)(),(0,a.iD)("option",{key:t.id,value:t.value?t.value:"all"},(0,Q.zw)(t.name),9,Qk)))),128))],512),[[i.bM,l.confirmationFilter]]),(0,a.Wm)(J.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-chevron-down")])),_:1})])])}var Bk={props:["filter"],data(){return{confirmationFilter:"all",confirmations:Ko}},watch:{confirmationFilter(t){this.$emit("update:filter",t)}}};const Jk=(0,d.Z)(Bk,[["render",Gk]]);var Xk=Jk;const tC=(0,a._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Affecté",-1),eC={class:"tw-relative"},sC=(0,a._)("option",{value:"all"},"Select",-1),iC=(0,a._)("option",{value:null},"Without delivery",-1),aC=["value"];function rC(t,e,s,r,l,o){return(0,a.wg)(),(0,a.iD)("div",null,[tC,(0,a._)("div",eC,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.affectationFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[sC,iC,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.deliveries,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),9,aC)))),128))],512),[[i.bM,l.affectationFilter]]),(0,a.Wm)(J.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-chevron-down")])),_:1})])])}var lC={props:["filter"],data(){return{affectationFilter:"all"}},computed:{users(){return this.$store.getters["user/users"]},deliveries(){return this.users.filter((t=>3==t.role.id))}},watch:{affectationFilter(t){this.$emit("update:filter",t)}}};const oC=(0,d.Z)(lC,[["render",rC]]);var nC=oC;const dC=(0,a._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Agente",-1),cC={class:"tw-relative"},wC=(0,a._)("option",{value:"all"},"Select",-1),uC=(0,a._)("option",{value:null},"Without agente",-1),pC=["value"];function mC(t,e,s,r,l,o){return(0,a.wg)(),(0,a.iD)("div",null,[dC,(0,a._)("div",cC,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.agenteFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[wC,uC,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.agentes,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),9,pC)))),128))],512),[[i.bM,l.agenteFilter]]),(0,a.Wm)(J.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-chevron-down")])),_:1})])])}var hC={props:["filter"],data(){return{agenteFilter:"all"}},computed:{users(){return this.$store.getters["user/users"]},agentes(){return this.users.filter((t=>2==t.role.id))}},watch:{agenteFilter(t){this.$emit("update:filter",t)}}};const gC=(0,d.Z)(hC,[["render",mC]]);var fC=gC;const vC=(0,a._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Product",-1),yC={key:0},_C={key:1,class:"tw-relative"},xC=(0,a._)("option",{value:"all"},"Select",-1),bC=["value"];function kC(t,e,s,r,l,o){return(0,a.wg)(),(0,a.iD)("div",null,[vC,o.fetched?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",yC,[(0,a._)("div",null,[(0,a.Wm)(J.t,{class:"tw-text-orange-500 tw-animate-spin tw-text-lg tw-"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-loading")])),_:1})])])),o.fetched?((0,a.wg)(),(0,a.iD)("div",_C,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.productFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[xC,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.products,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,bC)))),128))],512),[[i.bM,l.productFilter]]),(0,a.Wm)(J.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-chevron-down")])),_:1})])):(0,a.kq)("",!0)])}var CC={props:["filter"],data(){return{productFilter:"all"}},computed:{products(){return this.$store.getters["product/products"]},fetched(){return this.$store.getters["product/fetched"]}},watch:{productFilter(t){this.$emit("update:filter",t)}},methods:{getProducts(){ti.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))}},mounted(){this.fetched||this.getProducts(),console.log(this.products)}};const DC=(0,d.Z)(CC,[["render",kC]]);var SC=DC;function zC(t,e,{confirmationFilter:s,affectationFilter:i,upsellFilter:a,deliveryFilter:r,agenteFilter:l,dateFilter:o,productFilter:n}){const d=o[0],c=o[1];return t.filter((t=>{const o=new Date(t.created_at);if("all"!==s&&t.confirmation!==s)return!1;if("all"!==i&&t.affectation!=i)return!1;if("all"!==a&&t.upsell!=a)return!1;if("all"!==r&&t.delivery!=r)return!1;if("all"!==l&&t.agente_id!=l)return!1;const w=((t,e)=>{for(const s in t)if(!["created_at","updated_at","sheets_id","reported_agente_note","reported_agente_note","reported_agente_date","reported_delivery_note","reported_delivery_date"].includes(s)&&String(t[s]).toLowerCase().includes(e.toLowerCase()))return!0;return!1})(t,e);if(!w)return!1;if("all"!==n&&!t.items.some((t=>t.product_id==n)))return!1;const u=o.getDate(),p=o.getMonth(),m=o.getFullYear();if(d){const t=d.getDate(),e=d.getMonth(),s=d.getFullYear();if(m<s||m===s&&p<e||m===s&&p===e&&u<t)return!1}if(c){const t=c.getDate(),e=c.getMonth(),s=c.getFullYear();if(m>s||m===s&&p>e||m===s&&p===e&&u>t)return!1}return!0}))}function UC(t){return{id:1,title:"New",value:t.filter((t=>!t.confirmation||"new"==t.confirmation)).length,pourcentage:(100*t.filter((t=>!t.confirmation||"new"==t.confirmation)).length/t.length).toFixed(2),color:"primary-green",icon:"mdi mdi-new-box"}}function LC(t){return{id:3,title:"Confirmed",value:t.filter((t=>"confirmer"==t.confirmation)).length,pourcentage:(100*t.filter((t=>"confirmer"==t.confirmation)).length/t.length).toFixed(2),color:"deep-purple-accent-2",icon:"mdi-phone-check"}}function AC(t){return{id:4,title:"Delivered",value:t.filter((t=>"livrer"==t.delivery)).length,pourcentage:(100*t.filter((t=>"livrer"==t.delivery)).length/t.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"primary-blue",icon:"mdi-account-check-outline"}}function PC(t){return{id:5,title:"Shipped",value:t.filter((t=>"expidier"==t.delivery)).length,pourcentage:(100*t.filter((t=>"expidier"==t.delivery)).length/t.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"red",icon:"mdi-truck"}}const WC=(0,a._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Export",-1),EC={class:"tw-relative tw-flex tw-items-center tw-gap-2 tw-justify-between"},$C={class:"tw-relative tw-w-full"},TC=(0,a._)("option",{value:"all"},"All Sales",-1),OC=(0,a._)("option",{value:"selected"},"Selected Sales",-1),VC=(0,a._)("option",{value:"filtered"},"Filtered Sales",-1),RC=[TC,OC,VC];function qC(t,e,s,r,l,o){const n=(0,a.up)("download-csv");return(0,a.wg)(),(0,a.iD)("div",null,[WC,(0,a._)("div",EC,[(0,a._)("div",$C,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.selection=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},RC,512),[[i.bM,l.selection]]),(0,a.Wm)(J.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-chevron-down")])),_:1})]),(0,a.Wm)(n,{delimiter:";",data:o.toImport},{default:(0,a.w5)((()=>[(0,a.Wm)(G.T,{onClick:o.handleImport,icon:"",rounded:"lg",variant:"flat",size:"x-small",color:"green",class:"text-white tw-mr-2"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white",icon:"mdi-download",size:"x-large"})])),_:1},8,["onClick"])])),_:1},8,["data"])])])}var FC={props:["selected","filtered","sales"],data(){return{selection:"all"}},computed:{toImport(){const t=this.data.map((t=>({...t}))),e=t.map((t=>{const e=Object.keys(t);return e.forEach((e=>{t[e]=t[e]?t[e]:"NONE"})),t})),s=",",i=e.map((t=>(delete t["factorisation_id"],delete t["note_d"],delete t["cmd"],delete t["product_name"],delete t["is_done"],delete t["factorisation"],delete t["doubles"],{...t,products:t.items.map((t=>`id=${t.id}${s}ref=${t.product?.ref}${s}variation_id=${t.product_variation_id}${s}size=${t.product_variation.size?t.product_variation.size:"DEFAULT"}${s}color=${t.product_variation.color?t.product_variation.color:"DEFAULT"}${s}`))})));return i.map((t=>(delete t["items"],t)))},data(){switch(this.selection){case"selected":return this.selected;case"filtered":return this.filtered;default:return this.sales}}},methods:{handleImport(){0==this.data.length&&this.$alert({title:"No Data To Export",type:"warning"})}}};const IC=(0,d.Z)(FC,[["render",qC]]);var NC=IC,jC={components:{DateFilter:Lk,UpsellFilter:qk,DeliveryFilter:Yk,ConfirmationFilter:Xk,AffectationFilter:nC,AgenteFilter:fC,ProductFilter:SC,ExcelExport:NC},props:["sales","filtered","search","selected"],data(){return{config:{confirmationFilter:"all",affectationFilter:"all",upsellFilter:"all",deliveryFilter:"all",agenteFilter:"all",productFilter:"all",dateFilter:[null,null]}}},computed:{results(){return zC(this.sales,this.search,this.config)}},watch:{results(t){this.$emit("update:filtered",t)}},mounted(){this.$emit("update:filtered",this.sales)}};const MC=(0,d.Z)(jC,[["render",kk]]);var HC=MC;const YC={class:"mb-5 tw-border-b tw-border-solid tw-pb-5 tw-border-neutral-200"},KC={class:"tw-grid tw-grid-cols-4 lg:tw-grid-cols-4 tw-gap-2"},ZC={class:"lg:tw-col-span-1 md:tw-col-span-4 tw-col-span-2"},QC={class:"lg:tw-col-span-1 md:tw-col-span-4 tw-col-span-2"},GC={class:"lg:tw-col-span-1 md:tw-col-span-4 tw-col-span-2"},BC={class:"lg:tw-col-span-1 md:tw-col-span-4 tw-col-span-4"};function JC(t,e,s,i,r,l){const o=(0,a.up)("DashItem");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",YC,[(0,a._)("div",KC,[(0,a._)("div",ZC,[(0,a.Wm)(o,{dash:l.newSales},null,8,["dash"])]),(0,a._)("div",QC,[(0,a.Wm)(o,{dash:l.confirmedSales},null,8,["dash"])]),(0,a._)("div",GC,[(0,a.Wm)(o,{dash:l.deliveredSales},null,8,["dash"])]),(0,a._)("div",BC,[(0,a.Wm)(o,{dash:l.shippedSales},null,8,["dash"])])])])])}const XC={class:"tw-flex tw-justify-between tw-items-center tw-w-full tw-h-full pa-3 px-4"},tD={class:"tw-flex tw-flex-col tw-justify-center tw-w-full tw-h-full tw-text-white"},eD={class:"tw-text-xl tw-font-bold"},sD={class:"tw-flex tw-items-center tw-gap-1 tw-w-full tw-h-full tw-text-white"},iD={class:"tw-text-sm"},aD={class:"rounded-circle tw-w-fit tw-mr-3"};function rD(t,e,s,i,r,l){const o=(0,a.up)("number");return(0,a.wg)(),(0,a.j4)(mi.C,{class:"tw-rounded-lg",color:s.dash.color,height:"70"},{default:(0,a.w5)((()=>[(0,a._)("div",XC,[(0,a._)("div",tD,[(0,a._)("p",eD,(0,Q.zw)(isNaN(s.dash.pourcentage)?"0.00":s.dash.pourcentage)+" "+(0,Q.zw)(s.symbol),1),(0,a._)("span",sD,[s.numbers?((0,a.wg)(),(0,a.j4)(o,{key:0,class:"tw-font-bold",ref:"number1",from:0,to:s.dash.value,duration:1,delay:0,easing:"Power.easeOut"},null,8,["to"])):(0,a.kq)("",!0),(0,a._)("p",iD,(0,Q.zw)(s.dash.title),1)])]),(0,a._)("div",aD,[(0,a.Wm)(J.t,{color:"white",size:"large",class:"md:tw-scale-[1.8] tw-scale-[1.3]",icon:s.dash.icon},null,8,["icon"])])])])),_:1},8,["color"])}var lD={props:{dash:{required:!0},symbol:{required:!1,default:"%"},numbers:{required:!1,default:!0}}};const oD=(0,d.Z)(lD,[["render",rD]]);var nD=oD,dD={components:{DashItem:nD},props:["sales"],computed:{newSales(){return UC(this.sales)},confirmedSales(){return LC(this.sales)},deliveredSales(){return AC(this.sales)},shippedSales(){return PC(this.sales)}}};const cD=(0,d.Z)(dD,[["render",JC]]);var wD=cD,uD={components:{SalesTable:rw,AddSale:pk,SalesAnalytics:wD,IndexFilter:HC},data(){return{localUrl:q,isLoaded:!1,isLoadingReset:!1,showFilters:!1,isButtonDisabled:!0,filteredSales:[],search:"",selected:[],showPopup:!1}},computed:{fetched(){return this.$store.getters["sale/fetched"]},users(){return this.$store.getters["user/users"]},deliveries(){return this.users.filter((t=>3==t.role.id))},agentes(){return this.users.filter((t=>2==t.role.id))},sales(){return this.$store.getters["sale/sales"]},cities(){return this.$store.getters["city/cities"]},selectedSales(){return this.sales.filter((t=>this.selected.includes(t.id)))}},methods:{handleSelected(t){this.selected=t,this.selected.length>0?this.isButtonDisabled=!1:this.isButtonDisabled=!0,console.log(this.selectedSales)},async getDeliveries(){await K.deliveries().then((t=>{this.$store.dispatch("user/setDeliveries",t.data.data)}),this.$handleApiError)},async getUsers(){await K.all().then((t=>{console.log(t.data.data),this.$store.dispatch("user/setUsers",t.data.data.users)}),this.$handleApiError)},getSales(){return vs.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;this.$store.dispatch("sale/setSales",e),this.$store.dispatch("sale/setFetched",!0)}})).catch(this.$handleApiError)},getProducts(){return ti.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))},getCities(){if(0==this.cities.length)return K.cities().then((t=>{const e=t.data.data;this.$store.dispatch("city/setCities",e)}))},handleReset(){this.isLoadingReset=!0,0!=this.selected.length&&vs.resetSale(this.selected).then((t=>{"SUCCESS"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.$store.dispatch("sale/resetSales",this.selected),this.selected=[])})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoadingReset=!1))}},async mounted(){0==this.deliveries.length&&(await this.getDeliveries(),this.getUsers()),this.$store.getters["sale/fetched"]?this.isLoaded=!0:this.getSales(),this.fetched&&(this.getProducts(),this.getCities())}};const pD=(0,d.Z)(uD,[["render",hb]]);var mD=pD;const hD=(0,a._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,a._)("div",null,[(0,a._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Expidation ")])],-1),gD={key:0},fD={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},vD={class:"mb-5 tw-flex"},yD={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},_D={class:""};function xD(t,e,s,r,l,o){const n=(0,a.up)("LoadingAnimation"),d=(0,a.up)("IndexFilter"),c=(0,a.up)("SalesTable"),w=(0,a.up)("AddSale"),u=(0,a.up)("AddTicket");return(0,a.wg)(),(0,a.iD)("div",null,[hD,l.isLoaded?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",gD,[(0,a.Wm)(n)])),l.isLoaded?((0,a.wg)(),(0,a.iD)("div",fD,[(0,a._)("div",vD,[(0,a.Wm)(G.T,{onClick:e[0]||(e[0]=t=>l.showFilters=!l.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white",size:"xx-large"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,a._)("div",yD,[(0,a.Wm)(Kt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-w-full tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[i.nr,l.search]])]),(0,a.Wm)(ts.C),t.$can("handle_expidation")?((0,a.wg)(),(0,a.j4)(G.T,{key:0,onClick:e[2]||(e[2]=t=>l.showPopupTicket=!0),disabled:l.isButtonDisabled,icon:"",rounded:"lg",variant:"flat",size:"small",color:"green",class:"text-white tw-mr-2"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white",icon:"mdi-ticket-confirmation-outline",size:"xx-large"})])),_:1},8,["disabled"])):(0,a.kq)("",!0),(0,a.Wm)(G.T,{onClick:o.getSales,icon:"",rounded:"lg",variant:"flat",size:"small",color:"blue",class:"text-white tw-mr-2"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white",icon:"mdi-autorenew",size:"xx-large"})])),_:1},8,["onClick"])]),(0,a._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[1000px] !tw-overflow-visible":l.showFilters}])},[(0,a.Wm)(d,{sales:o.sales,search:l.search,filtered:l.filteredSales,"onUpdate:filtered":e[3]||(e[3]=t=>l.filteredSales=t)},null,8,["sales","search","filtered"])],2),(0,a._)("div",_D,[((0,a.wg)(),(0,a.j4)(c,{onSelected:o.handleSelected,key:l.filteredSales.length,sales:l.filteredSales},null,8,["onSelected","sales"]))]),(0,a.Wm)(w,{onCancel:e[4]||(e[4]=t=>l.showPopup=!1),visible:l.showPopup},null,8,["visible"]),(0,a.Wm)(u,{orders:o.selectedOrders,onCancel:e[5]||(e[5]=t=>l.showPopupTicket=!1),visible:l.showPopupTicket},null,8,["orders","visible"])])):(0,a.kq)("",!0)])}const bD={key:0,class:"md:tw-w-[80%] tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},kD={key:1,class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},CD=(0,a._)("h1",{class:"tw-font-bold"},"Choose Ticket Size",-1),DD={class:"tw-grid mt-5"},SD=(0,a._)("img",{src:"",id:"image"},null,-1),zD=(0,a._)("canvas",{id:"qr-canvas"},null,-1);function UD(t,e,s,i,r,l){const o=(0,a.up)("LoadingAnimation"),n=(0,a.up)("popup-full");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(n,{onCancel:e[0]||(e[0]=e=>t.$emit("cancel")),visible:s.visible},{default:(0,a.w5)((()=>[r.isLoaded?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",bD,[(0,a.Wm)(o)])),r.isLoaded?((0,a.wg)(),(0,a.iD)("div",kD,[CD,(0,a._)("div",DD,[(0,a.Wm)(G.T,{onClick:l.downloadPDF},{default:(0,a.w5)((()=>[(0,a.Uk)("Imprimer")])),_:1},8,["onClick"])])])):(0,a.kq)("",!0)])),_:1},8,["visible"]),SD,zD])}var LD=s(8914),AD=s(3579),PD=s.n(AD),WD=s(8385),ED={props:["visible","orders"],data(){return{localUrl:q,isLoading:!1,isLoaded:!0}},computed:{},methods:{async addOrderPage(t,e){const s=new Date;let i=s.getDate(),a=s.getMonth()+1,r=s.getFullYear();t.rect(1,1,98,148,"S"),t.setFontSize(12),t.setTextColor("orange"),t.text("Vldo",3,7),t.line(1,10,99,10);const l=e.items.map((t=>`${t.product.name}|${t.product_variation.color}|${t.product_variation.size} x ${t.quantity}`));PD()(t,{theme:"grid",startY:12,margin:{horizontal:3,vertical:0},body:[["Nom Complete: ",e.fullname],["Télephone: ",e.phone],["Adresse: ",e.adresse],["Ville: ",e.city],["Date d'envoi: ",`${i}-${a}-${r}`],["Marchandise: ",l.join("\n")]],styles:{halign:"left",lineColor:"black",textColor:"black"},columnStyles:{0:{fontStyle:"bold",font:"Cairo",valign:"middle",fontSize:8,cellWidth:24},1:{font:"Cairo",valign:"middle",cellPadding:{vertical:1,horizontal:2}}}}),t.line(1,73,99,73),t.setFont("helvetica","bold"),t.setTextColor("black"),t.setFontSize(16),t.text(`CRBT: ${sw(e)} ${I}`,29,80),t.line(1,83,99,83),t.setFontSize(8),t.setFont("helvetica","normal"),t.text("Vous remercier pour votre confiance, pour plus d'informaion",12,90),t.text("veuillez nous appeler sur :",32,95),t.setFont("helvetica","bold"),t.setFontSize(16),t.text("0612345678",32,105),t.line(1,115,99,115)},async downloadPDF(){var t=new LD["default"]({orientation:"p",unit:"mm",format:[100,150],putOnlyUsedFonts:!0});t.addFont(this.localUrl+"assets/fonts/Cairo-Regular.ttf","Cairo","normal"),t.addFont(this.localUrl+"assets/fonts/Cairo-Bold.ttf","Cairo","bold");for(let e=0;e<this.orders.length;e++){const s=this.orders[e];e>0&&t.addPage(),this.addOrderPage(t,s);const i=await new Promise(((t,e)=>{WD.toDataURL(F+"api/sales/scan/"+s.id,{margin:0},(function(s,i){s&&e(s),t(i)}))})),a=new Image;a.src=i,await new Promise((s=>{a.onload=()=>{t.addImage(a,68,118,28,28,"a"+e,"SLOW"),s()}}))}t.save("order_tickets.pdf")}},mounted(){}};const $D=(0,d.Z)(ED,[["render",UD]]);var TD=$D,OD={components:{SalesTable:rw,AddSale:pk,AddTicket:TD,IndexFilter:HC},data(){return{localUrl:q,confirmations:Ko,deliveryStatus:Qo,isLoaded:!1,showFilters:!1,search:"",isButtonDisabled:!0,filteredSales:[],selected:[],showPopup:!1,showPopupTicket:!1}},computed:{selectedOrders(){return this.sales.filter((t=>this.selected.includes(t.id)))},users(){return this.$store.getters["user/users"]},deliveries(){return this.users.filter((t=>3==t.role.id))},agentes(){return this.users.filter((t=>2==t.role.id))},sales(){return this.$store.getters["sale/sales"].filter((t=>"dispatch"==t.delivery))},cities(){return this.$store.getters["city/cities"]}},methods:{handleSelected(t){this.selected=t,this.selected.length>0?this.isButtonDisabled=!1:this.isButtonDisabled=!0},async getDeliveries(){await K.deliveries().then((t=>{console.log(t.data.data),this.$store.dispatch("user/setDeliveries",t.data.data)}),this.$handleApiError)},async getUsers(){await K.all().then((t=>{console.log(t.data.data),this.$store.dispatch("user/setUsers",t.data.data.users)}),this.$handleApiError)},getSales(){return this.isLoaded=!1,vs.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;console.log(t.data),this.$store.dispatch("sale/setSales",e),this.$store.dispatch("sale/setFetched",!0),this.isLoaded=!0}})).catch(this.$handleApiError)},getCities(){if(0==this.cities.length)return K.cities().then((t=>{const e=t.data.data;this.$store.dispatch("city/setCities",e)}))}},async mounted(){0==this.deliveries.length&&(await this.getDeliveries(),this.getUsers()),this.$store.getters["sale/fetched"]?this.isLoaded=!0:this.getSales(),this.getCities()}};const VD=(0,d.Z)(OD,[["render",xD]]);var RD=VD;const qD=(0,a._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,a._)("div",null,[(0,a._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Expidation ")])],-1),FD={key:0},ID={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},ND={class:"mb-5 tw-flex"},jD={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},MD={class:""};function HD(t,e,s,r,l,o){const n=(0,a.up)("LoadingAnimation"),d=(0,a.up)("IndexFilter"),c=(0,a.up)("SalesTable"),w=(0,a.up)("AddSale"),u=(0,a.up)("AddTicket");return(0,a.wg)(),(0,a.iD)("div",null,[qD,l.isLoaded?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",FD,[(0,a.Wm)(n)])),l.isLoaded?((0,a.wg)(),(0,a.iD)("div",ID,[(0,a._)("div",ND,[(0,a.Wm)(G.T,{onClick:e[0]||(e[0]=t=>l.showFilters=!l.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white",size:"xx-large"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,a._)("div",jD,[(0,a.Wm)(Kt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-w-full tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[i.nr,l.search]])]),(0,a.Wm)(ts.C),(0,a.Wm)(G.T,{onClick:o.getSales,icon:"",rounded:"lg",variant:"flat",size:"small",color:"blue",class:"text-white tw-mr-2"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white",icon:"mdi-autorenew",size:"xx-large"})])),_:1},8,["onClick"])]),(0,a._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[1000px] !tw-overflow-visible":l.showFilters}])},[(0,a.Wm)(d,{sales:o.sales,search:l.search,filtered:l.filteredSales,"onUpdate:filtered":e[2]||(e[2]=t=>l.filteredSales=t)},null,8,["sales","search","filtered"])],2),(0,a._)("div",MD,[((0,a.wg)(),(0,a.j4)(c,{onSelected:o.handleSelected,key:l.filteredSales.length,sales:l.filteredSales},null,8,["onSelected","sales"]))]),(0,a.Wm)(w,{onCancel:e[3]||(e[3]=t=>l.showPopup=!1),visible:l.showPopup},null,8,["visible"]),(0,a.Wm)(u,{orders:o.selectedOrders,onCancel:e[4]||(e[4]=t=>l.showPopupTicket=!1),visible:l.showPopupTicket},null,8,["orders","visible"])])):(0,a.kq)("",!0)])}var YD={components:{SalesTable:rw,AddSale:pk,AddTicket:TD,IndexFilter:HC},data(){return{localUrl:q,confirmations:Ko,deliveryStatus:Qo,isLoaded:!1,showFilters:!1,filteredSales:[],search:"",isButtonDisabled:!0,selected:[],showPopup:!1,showPopupTicket:!1}},computed:{selectedOrders(){return this.sales.filter((t=>this.selected.includes(t.id)))},users(){return this.$store.getters["user/users"]},deliveries(){return this.users.filter((t=>3==t.role.id))},agentes(){return this.users.filter((t=>2==t.role.id))},sales(){return this.$store.getters["sale/sales"].filter((t=>"expidier"==t.delivery))},cities(){return this.$store.getters["city/cities"]}},methods:{handleSelected(t){this.selected=t,this.selected.length>0?this.isButtonDisabled=!1:this.isButtonDisabled=!0},async getDeliveries(){await K.deliveries().then((t=>{console.log(t.data.data),this.$store.dispatch("user/setDeliveries",t.data.data)}),this.$handleApiError)},async getUsers(){await K.all().then((t=>{console.log(t.data.data),this.$store.dispatch("user/setUsers",t.data.data.users)}),this.$handleApiError)},getSales(){return this.isLoaded=!1,vs.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;console.log(t.data),this.$store.dispatch("sale/setSales",e),this.$store.dispatch("sale/setFetched",!0),this.isLoaded=!0}})).catch(this.$handleApiError)},getCities(){if(0==this.cities.length)return K.cities().then((t=>{const e=t.data.data;this.$store.dispatch("city/setCities",e)}))}},async mounted(){0==this.deliveries.length&&(await this.getDeliveries(),this.getUsers()),this.$store.getters["sale/fetched"]?this.isLoaded=!0:this.getSales(),this.getCities()}};const KD=(0,d.Z)(YD,[["render",HD]]);var ZD=KD,QD={name:"sales",path:"/sales",component:ii,meta:{module:"sale"},children:[{name:"sale/list",path:"",component:mD,meta:{module:"sale",subModule:"sale/list",title:"Sales List",gate:"show_all_sales"}},{name:"sale/expidation",path:"expidation",component:RD,meta:{module:"sale",subModule:"sale/expidation",title:"Expidation",gate:"show_all_expidations"}},{name:"sale/shipping",path:"shipping",component:ZD,meta:{module:"sale",subModule:"sale/shipping",title:"Shipping",gate:"show_all_expidations"}}]};const GD=(0,a._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,a._)("div",null,[(0,a._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"My Orders"),(0,a._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"See orders affected to you")])],-1),BD={key:0},JD={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},XD={class:"mb-5 tw-flex"},tS={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},eS={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},sS={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},iS=(0,a._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Upsell",-1),aS={class:"tw-relative"},rS=(0,a._)("option",{value:"all"},"Select",-1),lS=(0,a._)("option",{value:"oui"},"Oui",-1),oS=(0,a._)("option",{value:"non"},"Non",-1),nS=[rS,lS,oS],dS={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},cS=(0,a._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Confirmation",-1),wS={class:"tw-relative"},uS=["value"],pS={key:0},mS={key:1,class:""},hS=(0,a._)("p",{class:"tw-text-neutral-400 tw-py-5"},"Your order liste is empty !",-1),gS=[hS];function fS(t,e,s,r,l,o){const n=(0,a.up)("LoadingAnimation"),d=(0,a.up)("OrdersTable");return(0,a.wg)(),(0,a.iD)("div",null,[GD,l.isLoaded?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",BD,[(0,a.Wm)(n)])),l.isLoaded?((0,a.wg)(),(0,a.iD)("div",JD,[(0,a._)("div",XD,[(0,a.Wm)(G.T,{onClick:e[0]||(e[0]=t=>l.showFilters=!l.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white",size:"xx-large"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,a._)("div",tS,[(0,a.Wm)(Kt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[i.nr,l.search]])])]),(0,a._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":l.showFilters}])},[(0,a._)("div",eS,[(0,a._)("div",sS,[iS,(0,a._)("div",aS,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.upsellFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},nS,512),[[i.bM,l.upsellFilter]]),(0,a.Wm)(J.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-chevron-down")])),_:1})])]),(0,a._)("div",dS,[cS,(0,a._)("div",wS,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[3]||(e[3]=t=>l.confirmationFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.confirmations,(t=>((0,a.wg)(),(0,a.iD)("option",{key:t.id,value:t.value?t.value:"all"},(0,Q.zw)(t.name),9,uS)))),128))],512),[[i.bM,l.confirmationFilter]]),(0,a.Wm)(J.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-chevron-down")])),_:1})])])])],2),o.orders.length>0?((0,a.wg)(),(0,a.iD)("div",pS,[(0,a.Wm)(d,{orders:o.filteredOrders},null,8,["orders"])])):((0,a.wg)(),(0,a.iD)("div",mS,gS))])):(0,a.kq)("",!0)])}const vS={class:"tw-relative tw-min-h-[400px] tw-overflow-x-auto tw-overflow-y-visible sm:tw-rounded-lg"},yS={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},_S={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},xS=(0,a._)("th",{scope:"col",class:"tw-p-4"},[(0,a._)("div",{class:"tw-flex tw-items-center"},[(0,a._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,a._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),bS={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},kS={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},CS={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},DS=(0,a._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),SS=["value"],zS={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},US={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},LS={class:"tw-flex tw-flex-wrap tw-gap-2"},AS={class:"tw-text-white"};function PS(t,e,s,r,l,o){const n=(0,a.up)("OrderRow");return s.orders.length>0?((0,a.wg)(),(0,a.iD)("div",{key:s.orders.length},[(0,a._)("div",vS,[(0,a._)("table",yS,[(0,a._)("thead",_S,[(0,a._)("tr",null,[xS,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.columns,(t=>((0,a.wg)(),(0,a.iD)("th",{key:t,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,a._)("div",bS,(0,Q.zw)(t),1)])))),128))])]),(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.items,(t=>((0,a.wg)(),(0,a.j4)(n,{showNote:!!s.note,key:t.id,order:t},null,8,["showNote","order"])))),128))])])]),(0,a._)("div",kS,[(0,a._)("div",CS,[DS,(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.allowedLimit,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t,key:t},(0,Q.zw)(t),9,SS)))),128))],512),[[i.bM,l.paginationLimit]])]),(0,a._)("div",zS,[(0,a._)("div",US,(0,Q.zw)(o.prevRange+1)+" - "+(0,Q.zw)(l.currentPage==o.pageCount?s.orders.length:o.nextRange)+" of "+(0,Q.zw)(s.orders.length)+" items ",1),(0,a._)("div",LS,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.pageCount,(t=>((0,a.wg)(),(0,a.j4)(G.T,{onClick:e=>l.currentPage=t,ripple:!1,variant:"flat",icon:"",rounded:"lg",color:t==l.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,a.w5)((()=>[(0,a._)("span",AS,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])):(0,a.kq)("",!0)}const WS=(0,a._)("td",{class:"tw-w-4 tw-p-4"},[(0,a._)("div",{class:"tw-flex tw-items-center"},[(0,a._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,a._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),ES={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},$S={class:"tw-px-6 tw-py-4 tw-relative"},TS={key:0},OS={class:"tw-px-6 tw-py-4"},VS={class:"tw-px-6 tw-py-4 tw-relative"},RS={class:"tw-pb-2"},qS={class:"tw-text-orange-500 tw-font-bold tw-pr-1 tw-text-xs"},FS={key:0},IS={key:1},NS={class:"tw-absolute tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-text-xs"},jS={key:0,class:"tw-bg-emerald-500/10 tw-text-emerald-500 tw-px-2 tw-rounded-t"},MS={key:1,class:"tw-bg-blue-500/10 tw-text-blue-500 tw-px-2 tw-rounded-t"},HS={class:"tw-px-6 tw-py-4 tw-relative"},YS={class:"tw-flex tw-items-center tw-justify-center"},KS={class:"tw-flex tw-gap-1"},ZS={key:0},QS={class:"tw-px-6 tw-py-4"},GS={class:"tw-px-6 tw-py-4"},BS={class:"tw-px-6 tw-py-4"},JS={class:"!tw-max-w-[300px] !tw-min-w-[300px] tw-whitespace-normal"},XS={key:1,class:"tw-px-6 tw-py-4"},tz={class:"tw-max-w-[300px] tw-min-w-[150px] tw-whitespace-normal"},ez={class:"tw-px-6 tw-py-4"},sz={class:"tw-min-w-[300px]"},iz=(0,a._)("p",null,"Edit note",-1);function az(t,e,s,i,r,l){(0,a.up)("OrderUpsell");const o=(0,a.up)("OrderConfirmation"),n=(0,a.up)("OrderAffectation"),d=(0,a.up)("OrderActions"),c=(0,a.up)("popup");return(0,a.wg)(),(0,a.iD)(a.HY,null,[((0,a.wg)(),(0,a.iD)("tr",{key:s.order.id,class:(0,Q.C_)([["reporter"==s.order.confirmation&&"tw-relative",l.isReportedToday(s.order)&&"!tw-border tw-border-red-400"],"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"])},[WS,(0,a._)("th",ES,(0,Q.zw)(l.id),1),(0,a._)("td",$S,[(0,a.Uk)((0,Q.zw)(s.order?.created_at?.split("T")[0])+" ",1),"reporter"==s.order.confirmation?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,Q.C_)([l.isReportedToday(s.order)&&"!tw-bg-red-400","tw-text-xs tw-text-white tw-px-1 tw-rounded-t tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-absolute tw-bg-gray-500"])},[l.isReportedToday(s.order)?((0,a.wg)(),(0,a.iD)("span",TS," Reported for today ")):(0,a.kq)("",!0)],2)):(0,a.kq)("",!0)]),(0,a._)("td",OS,(0,Q.zw)(l.fullname),1),(0,a._)("td",VS,[(0,a._)("div",RS,[(0,a._)("ul",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.order.items,(t=>((0,a.wg)(),(0,a.iD)("li",{key:t.id,class:"tw-font-bold"},[(0,a.Uk)(" - "),(0,a._)("span",qS,(0,Q.zw)(t.quantity)+" X ",1),(0,a.Uk)((0,Q.zw)(t.product.name)+" ",1),t.product_variation.size?((0,a.wg)(),(0,a.iD)("span",FS,"| "+(0,Q.zw)(t.product_variation.size),1)):(0,a.kq)("",!0),t.product_variation.color?((0,a.wg)(),(0,a.iD)("span",IS,"| "+(0,Q.zw)(t.product_variation.color),1)):(0,a.kq)("",!0)])))),128))]),(0,a._)("div",NS,[s.order.counts_from_warehouse?((0,a.wg)(),(0,a.iD)("p",jS," warehouse ")):(0,a.kq)("",!0),s.order.counts_from_warehouse?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("p",MS," delivery "))])])]),(0,a.kq)("",!0),(0,a._)("td",HS,[(0,a._)("div",YS,[((0,a.wg)(),(0,a.j4)(o,{class:(0,Q.C_)("reporter"==s.order.confirmation&&"tw-mb-1"),order:s.order,confirmation:l.confirmation,key:l.confirmation,id:l.id},null,8,["class","order","confirmation","id"])),"reporter"==s.order.confirmation?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,Q.C_)([l.isReportedToday(s.order)&&"!tw-bg-red-400","tw-text-xs tw-text-white tw-px-1 tw-rounded-t tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-absolute tw-bg-gray-500"])},[(0,a._)("span",KS,["reporter"==s.order.confirmation?((0,a.wg)(),(0,a.iD)("span",ZS,[(0,a.Wm)(J.t,{size:"x-small"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-autorenew")])),_:1}),(0,a._)("span",null,(0,Q.zw)(s.order?.reported_agente_date?.split("T")[0]),1)])):(0,a.kq)("",!0)])],2)):(0,a.kq)("",!0)])]),(0,a._)("td",QS,["confirmer"===l.confirmation?((0,a.wg)(),(0,a.j4)(n,{order:s.order,id:l.id,affectation:l.affectation,key:l.affectation},null,8,["order","id","affectation"])):(0,a.kq)("",!0)]),(0,a._)("td",GS,(0,Q.zw)(l.getPrice(s.order)),1),(0,a._)("td",BS,[(0,a._)("div",JS,(0,Q.zw)(s.order.city),1)]),s.showNote?((0,a.wg)(),(0,a.iD)("td",XS,[(0,a._)("div",tz,[(0,a.Uk)((0,Q.zw)(s.order.note)+" ",1),(0,a.Wm)(J.t,{onClick:l.handleClick,size:"x-small",class:(0,Q.C_)(["tw-ml-2 tw-text-blue-500 tw-cursor-pointer hover:tw-bg-neutral-900/10 tw-rounded-full tw-p-3",{"tw-animate-spin":r.isLoading}])},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Q.zw)(r.isLoading?"mdi-loading":"mdi-pencil"),1)])),_:1},8,["onClick","class"])])])):(0,a.kq)("",!0),(0,a._)("td",ez,[(0,a.Wm)(d,{order:s.order},null,8,["order"])])],2)),(0,a.Wm)(c,{type:"info",title:"Add Note",onResolved:l.handleResolved,loading:r.isLoading,visible:r.showPopup},{default:(0,a.w5)((()=>[(0,a._)("div",sz,[iz,(0,a.Wm)(gu.z,{modelValue:r.newNote,"onUpdate:modelValue":e[0]||(e[0]=t=>r.newNote=t),variant:"outlined",class:"rounded-md",color:"primary-color"},null,8,["modelValue"])])])),_:1},8,["onResolved","loading","visible"])],64)}const rz={class:"tw-py-2 tw-space-y-1 tw-text-sm tw-text-gray-700 tw-max-h-[250px] tw-overflow-y-auto"},lz=["onClick"],oz={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},nz=(0,a._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter note",-1),dz={class:"tw-flex tw-justify-end tw-mt-2"};function cz(t,e,s,r,l,o){const n=(0,a.up)("popup-full"),d=(0,a.up)("OrderReporting"),c=(0,a.up)("OrderAnnuler");return(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",{key:s.confirmation,class:"tw-relative tw-min-w-[100px]"},[(0,a._)("button",{onClick:e[0]||(e[0]=(...t)=>o.toggle&&o.toggle(...t)),class:(0,Q.C_)([[o.selected.text,o.selected.bg,o.selected.ring],"focus:tw-ring-4 tw-min-w-[100px] focus:tw-outline-none tw-font-medium tw-rounded-lg tw-text-sm tw-px-2 tw-py-1 tw-text-center tw-inline-flex tw-items-center tw-justify-between"]),type:"button"},[(0,a.Uk)((0,Q.zw)(o.selected.name)+" ",1),l.isLoading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(J.t,{key:0,class:"tw-ml-1"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Q.zw)(l.isOpen?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})),l.isLoading?((0,a.wg)(),(0,a.j4)(J.t,{key:1,class:"tw-animate-spin tw-ml-1"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-loading")])),_:1})):(0,a.kq)("",!0)],2),(0,a._)("div",{class:(0,Q.C_)([{"tw-hidden":!l.isOpen},"tw-z-[20] tw-bg-white tw-absolute tw-top-full tw-left-0 tw-divide-y tw-divide-gray-100 tw-rounded-lg tw-shadow tw-w-44"])},[(0,a._)("ul",rz,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.options,(t=>((0,a.wg)(),(0,a.iD)("li",{onClick:e=>o.handleChange(t),key:t.id},[(0,a._)("a",{class:(0,Q.C_)(["tw-block tw-px-4 tw-py-2 hover:tw-bg-gray-100",[t.text,t.bg]])},(0,Q.zw)(t.name),3)],8,lz)))),128))])],2),(0,a.Wm)(n,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>l.showPopup=!1),visible:l.showPopup},{default:(0,a.w5)((()=>[(0,a._)("div",oz,[nz,(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.note=t),cols:"30",rows:"3",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n\r\n        ",512),[[i.nr,l.note]]),(0,a._)("div",dz,[(0,a.Wm)(G.T,{class:"tw-capitalize",loading:l.isLoading,variant:"flat",color:"green",onClick:o.handleClick},{default:(0,a.w5)((()=>[(0,a.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"]),(0,a.Wm)(d,{order:s.order,visible:l.showPopupReporter,onCancel:e[3]||(e[3]=t=>l.showPopupReporter=!1)},null,8,["order","visible"]),(0,a.Wm)(c,{order:s.order,visible:l.showPopupAnnuler,onCancel:e[4]||(e[4]=t=>l.showPopupAnnuler=!1)},null,8,["order","visible"])])),[[Zt.L,o.close]])}const wz={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},uz=(0,a._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Reported Date",-1),pz=(0,a._)("br",null,null,-1),mz=(0,a._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Note",-1),hz={class:"tw-flex tw-justify-end tw-mt-2"};function gz(t,e,s,r,l,o){const n=(0,a.up)("VueDatePicker"),d=(0,a.up)("popup-full");return(0,a.wg)(),(0,a.iD)("div",{key:s.order.id},[(0,a.Wm)(d,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>o.cancel()),visible:s.visible},{default:(0,a.w5)((()=>[(0,a._)("div",wz,[uz,(0,a.Wm)(n,{modelValue:l.date,"onUpdate:modelValue":e[0]||(e[0]=t=>l.date=t),format:o.format},null,8,["modelValue","format"]),pz,mz,(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.note=t),cols:"30",rows:"12",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n        ",512),[[i.nr,l.note]]),(0,a._)("div",hz,[(0,a.Wm)(G.T,{class:"tw-capitalize",loading:l.isLoading,variant:"flat",color:"green",onClick:o.handleConfirm},{default:(0,a.w5)((()=>[(0,a.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var fz={props:["visible","order"],data(){return{isLoading:!1,note:"",date:null,realDate:null,newOrder:null}},methods:{handleConfirm(){if(!this.date)return this.$alert({type:"warning",title:"Please select a date"}),!1;const t={...this.order};t.reported_agente_date=this.realDate,t.reported_agente_note=this.note,t.confirmation="reporter",this.isLoading=!0,vs.agenteUpdateConfirmation(t.id,"reporter",t).then((e=>{console.log(e.data),this.$alert({type:"success",title:"Order reported successfully"}),this.$store.dispatch("order/update",{id:t.id,order:t}),this.cancel()}),this.$handleApiError).finally((()=>this.isLoading=!1))},format(t){const e=t.getDate(),s=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getMonth()+1,a=i.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),r=t.getFullYear();return this.realDate=`${r}-${a}-${s}`,`${s}/${a}/${r}`},cancel(){this.$emit("cancel")}},mounted(){console.log(this.order)}};const vz=(0,d.Z)(fz,[["render",gz]]);var yz=vz;const _z={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},xz=(0,a._)("br",null,null,-1),bz=(0,a._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Note",-1),kz={class:"tw-flex tw-justify-end tw-mt-2"};function Cz(t,e,s,r,l,o){const n=(0,a.up)("popup-full");return(0,a.wg)(),(0,a.iD)("div",{key:s.order.id},[(0,a.Wm)(n,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[1]||(e[1]=t=>o.cancel()),visible:s.visible},{default:(0,a.w5)((()=>[(0,a._)("div",_z,[xz,bz,(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.note=t),cols:"30",rows:"12",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n          ",512),[[i.nr,l.note]]),(0,a._)("div",kz,[(0,a.Wm)(G.T,{class:"tw-capitalize",loading:l.isLoading,variant:"flat",color:"green",onClick:o.handleConfirm},{default:(0,a.w5)((()=>[(0,a.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var Dz={props:["visible","order"],data(){return{isLoading:!1,note:"",newOrder:null}},methods:{handleConfirm(){const t={...this.order};t.reported_agente_note=this.note,t.confirmation="annuler",this.isLoading=!0,vs.agenteUpdateConfirmation(t.id,"annuler",t).then((e=>{console.log(e.data),this.$alert({type:"success",title:"Order annuler successfully"}),this.$store.dispatch("order/update",{id:t.id,order:t}),this.cancel()}),this.$handleApiError).finally((()=>this.isLoading=!1))},cancel(){this.$emit("cancel")}},mounted(){console.log(this.order)}};const Sz=(0,d.Z)(Dz,[["render",Cz]]);var zz=Sz,Uz={props:["confirmation","id","order"],components:{OrderReporting:yz,OrderAnnuler:zz},data(){return{isLoading:!1,isOpen:!1,showPopup:!1,nextOption:null,note:"",selectedId:0,allOptions:Ko,showPopupReporter:!1,showPopupAnnuler:!1}},computed:{options(){return this.allOptions.filter((t=>t.id!==this.selectedId))},selected(){return this.allOptions.filter((t=>t.id==this.selectedId))[0]},availableOptions(){return this.allOptions.map((t=>t.value))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleResolved(t){t?(this.selectedId=this.nextOption,this.showPopup=!1,this.updateOrderWithNote().catch(this.$handleApiError).finally((()=>this.showPopup=!1))):this.showPopup=!1},handleClick(){this.selectedId=this.nextOption,this.showPopup=!1,this.updateOrderWithNote().catch(this.$handleApiError).finally((()=>this.showPopup=!1))},async handleChange(t){if(t.id===this.selectedId)return!1;["confirmer","reporter","annuler"].includes(t.value)?"reporter"===t.value?this.showPopupReporter=!0:"annuler"===t.value?this.showPopupAnnuler=!0:(this.nextOption=t.id,this.showPopup=!0):(this.selectedId=t.id,this.updateOrder()),this.close()},async updateOrder(){return this.isLoading=!0,vs.agenteUpdateConfirmation(this.id,this.selected.value).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateConfirmation(this.id,this.selected.value),this.isLoading=!1)}),(t=>this.$handleApiError(t)))},async updateOrderWithNote(){return this.isLoading=!0,vs.agenteUpdateConfirmationWithNote(this.id,this.selected.value,this.note).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateConfirmationWithNote(this.id,this.selected.value,this.note),this.isLoading=!1)}),(t=>this.$handleApiError(t))).then((()=>this.$emit("update",this.selected.value)))},updateConfirmation(t,e){this.$store.dispatch("order/updateConfirmation",{id:t,confirmation:e}),this.$emit("update",e)},updateConfirmationWithNote(t,e,s){this.$store.dispatch("order/updateConfirmationWithNote",{id:t,confirmation:e,note:s}),this.$emit("update",e)}},mounted(){this.availableOptions.includes(this.confirmation)?this.selectedId=this.allOptions.find((t=>t.value==this.confirmation)).id:this.selectedId=0}};const Lz=(0,d.Z)(Uz,[["render",cz]]);var Az=Lz;const Pz={class:"tw-py-2 tw-space-y-1 tw-text-sm tw-text-gray-700"},Wz=["onClick"];function Ez(t,e,s,i,r,l){return(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",{key:s.upsell,class:"tw-relative tw-w-[60px]"},[(0,a._)("button",{onClick:e[0]||(e[0]=(...t)=>l.toggle&&l.toggle(...t)),class:(0,Q.C_)([[l.selected.text,l.selected.bg,l.selected.ring],"focus:tw-ring-4 focus:tw-outline-none tw-font-medium tw-rounded-lg tw-text-sm tw-px-2 tw-py-1 tw-text-center tw-inline-flex tw-items-center"]),type:"button"},[(0,a.Uk)((0,Q.zw)(l.selected.name)+" ",1),r.isLoading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(J.t,{key:0,class:"tw-ml-1"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Q.zw)(r.isOpen?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})),r.isLoading?((0,a.wg)(),(0,a.j4)(J.t,{key:1,class:"tw-animate-spin tw-ml-1"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-loading")])),_:1})):(0,a.kq)("",!0)],2),(0,a._)("div",{class:(0,Q.C_)([{"tw-hidden":!r.isOpen},"tw-z-[20] tw-bg-white tw-absolute tw-top-full tw-left-0 tw-divide-y tw-divide-gray-100 tw-rounded-lg tw-shadow tw-w-44"])},[(0,a._)("ul",Pz,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.options,(t=>((0,a.wg)(),(0,a.iD)("li",{onClick:e=>l.handleChange(t),key:t.id},[(0,a._)("a",{class:(0,Q.C_)(["tw-block tw-px-4 tw-py-2 hover:tw-bg-gray-100",[t.text,t.bg]])},(0,Q.zw)(t.name),3)],8,Wz)))),128))])],2)])),[[Zt.L,l.close]])}var $z={props:["upsell","id"],data(){return{isLoading:!1,isOpen:!1,selectedId:0,allOptions:Zo}},computed:{options(){return this.allOptions},selected(){return this.allOptions.filter((t=>t.id==this.selectedId))[0]}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleChange(t){if(t.id==this.selectedId)return!1;this.selectedId=t.id,this.isLoading=!0,this.updateOrder(),this.close()},updateOrder(){vs.agenteUpdateUpsell(this.id,this.selected.value).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateUpsell(this.id,this.selected.value),this.$emit("update",this.selected.value),this.isLoading=!1)}),(t=>this.$handleApiError(t)))},updateUpsell(t,e){this.$store.dispatch("order/updateUpsell",{id:t,upsell:e})}},mounted(){switch(console.log(this.upsell),this.upsell){case"oui":console.log("found oui"),this.selectedId=1;break;case"non":console.log("found non"),this.selectedId=2;break;default:console.log("found nothing"),this.selectedId=0;break}}};const Tz=(0,d.Z)($z,[["render",Ez]]);var Oz=Tz;const Vz={class:"tw-py-2 tw-space-y-1 tw-text-sm tw-text-gray-700 tw-max-h-[250px] tw-overflow-y-auto"},Rz=["onClick"],qz={class:"tw-block tw-px-4 tw-py-2 hover:tw-bg-gray-100"},Fz={key:1,class:"tw-relative tw-min-w-[100px] tw-flex tw-items-center"};function Iz(t,e,s,i,r,l){return l.fetched?(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",{key:s.affectation,class:"tw-relative tw-min-w-[100px]"},[(0,a._)("button",{onClick:e[0]||(e[0]=(...t)=>l.toggle&&l.toggle(...t)),class:"tw-whitespace-nowrap focus:tw-ring-4 tw-ring-neutral-200 tw-bg-neutral-600/10 tw-text-neutral-800 focus:tw-outline-none tw-font-medium tw-rounded-lg tw-text-sm tw-px-2 tw-py-1 tw-text-center tw-inline-flex tw-items-center",type:"button"},[(0,a.Uk)((0,Q.zw)(l.selected.firstname)+" "+(0,Q.zw)(l.selected.lastname)+" ",1),r.isLoading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(J.t,{key:0,class:"tw-ml-1"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Q.zw)(r.isOpen?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})),r.isLoading?((0,a.wg)(),(0,a.j4)(J.t,{key:1,class:"tw-animate-spin tw-ml-1"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-loading")])),_:1})):(0,a.kq)("",!0)]),(0,a._)("div",{class:(0,Q.C_)([{"tw-hidden":!r.isOpen},"tw-z-[20] tw-bg-white tw-absolute tw-top-full tw-left-0 tw-divide-y tw-divide-gray-100 tw-rounded-lg tw-shadow tw-w-44"])},[(0,a._)("ul",Vz,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.options,(t=>((0,a.wg)(),(0,a.iD)("li",{onClick:e=>l.handleChange(t),key:t.id},[(0,a._)("a",qz,(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),1)],8,Rz)))),128))])],2)])),[[Zt.L,l.close]]):((0,a.wg)(),(0,a.iD)("div",Fz,[(0,a.Wm)(J.t,{class:"tw-animate-spin tw-ml-1 tw-text-orange-500"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-loading")])),_:1})]))}var Nz={props:["affectation","id","order"],data(){return{isOpen:!1,isLoading:!1,selectedId:null}},computed:{options(){return[{id:null,firstname:"select",lastname:""},...this.deliveries]},selected(){const t=[...this.deliveries.map((t=>parseInt(t.id)))];return null!=this.selectedId&&t.includes(parseInt(this.selectedId))?this.options.filter((t=>t.id==this.selectedId))[0]:{id:null,firstname:"select",lastname:""}},users(){return this.$store.getters["user/users"]},allDeliveries(){return this.users.filter((t=>"delivery"==t.role_name))},fetched(){return this.$store.getters["user/fetched"]},deliveries(){return this.allDeliveries.filter((t=>t.delivery_products.some((t=>this.order.items.some((e=>e.product_id==t.product_id))))))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleChange(t){if(this.old=this.affectation,t.id===this.selectedId)return!1;this.selectedId=t.id,this.isLoading=!0,this.updateOrder(),this.close()},updateOrder(){vs.agenteUpdateAffectaion(this.id,this.selectedId).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateAffectation(this.id,this.selected.id),this.isLoading=!1)}),(t=>{this.$handleApiError(t),this.isLoading=!1,this.selectedId=this.old}))},updateAffectation(t,e){this.$store.dispatch("order/updateAffectation",{id:t,affectation:e})}},mounted(){this.selectedId=this.affectation,console.log("id: ",this.id," affecte: ",this.affectation)}};const jz=(0,d.Z)(Nz,[["render",Iz]]);var Mz=jz;const Hz={key:0},Yz={key:2},Kz={key:3};function Zz(t,e,s,i,r,l){const o=(0,a.up)("UpdateDoubleOrder"),n=(0,a.up)("UpdateOrder");return s.order?((0,a.wg)(),(0,a.iD)("div",Hz,[s.only.includes("whatsapp")?((0,a.wg)(),(0,a.j4)(G.T,{key:0,link:"",target:"_blank",href:"https://api.whatsapp.com/send?phone="+s.order.phone.replace("+","").replace("-","").replace(" ",""),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-whatsapp")])),_:1})])),_:1},8,["href"])):(0,a.kq)("",!0),s.only.includes("update")?((0,a.wg)(),(0,a.j4)(G.T,{key:1,onClick:e[0]||(e[0]=t=>r.showUpdatePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-pencil-outline")])),_:1})])),_:1})):(0,a.kq)("",!0),s.double?((0,a.wg)(),(0,a.iD)("div",Yz,[r.showUpdatePopup?((0,a.wg)(),(0,a.j4)(o,{key:0,onUpdateOrder:e[1]||(e[1]=e=>t.$emit("updateOrder",e)),visible:r.showUpdatePopup,"onUpdate:visible":e[2]||(e[2]=t=>r.showUpdatePopup=t),order:s.order},null,8,["visible","order"])):(0,a.kq)("",!0)])):((0,a.wg)(),(0,a.iD)("div",Kz,[r.showUpdatePopup?((0,a.wg)(),(0,a.j4)(n,{key:0,visible:r.showUpdatePopup,"onUpdate:visible":e[3]||(e[3]=t=>r.showUpdatePopup=t),order:s.order},null,8,["visible","order"])):(0,a.kq)("",!0)]))])):(0,a.kq)("",!0)}const Qz={key:0,class:"md:tw-w-[80%] tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},Gz={key:1,class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[880px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},Bz=(0,a._)("h1",{class:"tw-text-lg"},"Update Order",-1),Jz={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},Xz={class:"md:tw-col-span-6 tw-col-span-12"},tU=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Client",-1),eU={class:"md:tw-col-span-6 tw-col-span-12"},sU=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Phone",-1),iU={class:"md:tw-col-span-6 tw-col-span-12"},aU=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"City",-1),rU=["value"],lU=["value"],oU={class:"md:tw-col-span-6 tw-col-span-12"},nU=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Address",-1),dU={class:"md:tw-col-span-12 tw-col-span-12 tw-mt-3 tw-border-t tw-border-neutral-300 tw-pt-3"},cU=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Confirmation",-1),wU={class:"md:tw-col-span-6 tw-col-span-12"},uU=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Affectation",-1),pU={class:"md:tw-col-span-6 tw-col-span-12"},mU=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Upsell",-1),hU=["value"],gU=(0,a._)("p",{class:"tw-col-span-12 tw-mt-5 tw-mb-2"},"Order Items",-1),fU={key:5,class:"tw-col-span-12 tw-rounded tw-text-center tw-p-5 tw-text-gray-700 tw-bg-gray-50"},vU={key:6,class:"md:tw-col-span-12 tw-col-span-12"},yU={class:"tw-max-w-full tw-overflow-auto"},_U={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},xU={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},bU={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},kU=["onUpdate:modelValue"],CU=(0,a._)("option",{value:0},"Select",-1),DU=["value"],SU={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},zU=["onUpdate:modelValue"],UU=(0,a._)("option",{value:0},"Select",-1),LU=["value"],AU={key:0},PU={key:1},WU={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},EU={class:"md:tw-col-span-6 tw-col-span-12"},$U=["onUpdate:modelValue"],TU={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},OU={key:0},VU={key:1,class:"md:tw-col-span-6 tw-col-span-12"},RU=["onUpdate:modelValue"],qU={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},FU={key:0,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},IU={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},NU=(0,a._)("option",{value:0},"Select",-1),jU=["value"],MU={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},HU=(0,a._)("option",{value:0},"Select",-1),YU=["value"],KU={key:0},ZU={key:1},QU={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},GU={class:"md:tw-col-span-6 tw-col-span-12"},BU={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},JU={class:"md:tw-col-span-6 tw-col-span-12"},XU=(0,a._)("th",{scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},null,-1),tL={class:"tw-w-full tw-col-span-12 tw-flex tw-justify-end tw-mt-3"},eL=(0,a._)("span",{class:"!tw-text-sm !tw-capitalize"},"Add",-1),sL={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},iL=(0,a._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),aL={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},rL=(0,a._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-mb-2 tw-whitespace-nowrap"},"Price: ",-1),lL={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},oL=(0,a._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),nL={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},dL=(0,a._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-whitespace-nowrap"},"Total Price: ",-1),cL={class:"tw-font-medium"},wL={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},uL=(0,a._)("span",{class:"text-white"}," Cancel ",-1),pL=(0,a._)("span",{class:"text-white"}," Update ",-1);function mL(t,e,s,r,l,o){const n=(0,a.up)("LoadingAnimation"),d=(0,a.up)("AddOrderConfirmation"),c=(0,a.up)("AddOrderAffectation"),w=(0,a.up)("popup-full");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(w,{onCancel:e[18]||(e[18]=e=>t.$emit("update:visible",!1)),visible:s.visible},{default:(0,a.w5)((()=>[o.isLoaded?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",Qz,[(0,a.Wm)(n)])),o.isLoaded?((0,a.wg)(),(0,a.iD)("div",Gz,[Bz,(0,a._)("div",Jz,[(0,a._)("div",Xz,[tU,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>l.sale.fullname=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[i.nr,l.sale.fullname]])]),(0,a._)("div",eU,[sU,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>l.sale.phone=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[i.nr,l.sale.phone]])]),(0,a._)("div",iU,[aU,(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.sale.city=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[(0,a._)("option",{disabled:"",value:l.sale.city},(0,Q.zw)(l.sale.city),9,rU),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.cities,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t.name,key:t.id},(0,Q.zw)(t.name),9,lU)))),128))],512),[[i.bM,l.sale.city]])]),(0,a._)("div",oU,[nU,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>l.sale.adresse=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[i.nr,l.sale.adresse]])]),(0,a._)("div",dU,[cU,(0,a.Wm)(d,{order:l.sale,id:l.sale.id,confirmation:l.sale.confirmation,"onUpdate:confirmation":e[4]||(e[4]=t=>l.sale.confirmation=t),onConfirmed:e[5]||(e[5]=t=>l.sale.note=t),onReported:o.handleReported},null,8,["order","id","confirmation","onReported"])]),(0,a._)("div",wU,[uU,(0,a.Wm)(c,{items:o.formatedItems,order:l.sale,confirmation:l.sale.confirmation,affectation:l.sale.affectation,"onUpdate:affectation":e[6]||(e[6]=t=>l.sale.affectation=t),id:l.sale.id},null,8,["items","order","confirmation","affectation","id"])]),(0,a._)("div",pU,[mU,(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[7]||(e[7]=t=>l.sale.upsell=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.upsells,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t.value,key:t.id},(0,Q.zw)(t.name),9,hU)))),128))],512),[[i.bM,l.sale.upsell]])]),(0,a.kq)("",!0),(0,a.kq)("",!0),(0,a.kq)("",!0),(0,a.kq)("",!0),(0,a.kq)("",!0),gU,l.items.length?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("p",fU," No Order items ")),l.items.length?((0,a.wg)(),(0,a.iD)("div",vU,[(0,a._)("div",yU,[((0,a.wg)(),(0,a.iD)("table",{key:l.items.length,class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},[(0,a._)("thead",_U,[(0,a._)("tr",null,[((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(["product","variation","quantity","price","actions"],(t=>(0,a._)("th",{class:(0,Q.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,a._)("div",xU,(0,Q.zw)(t),1)],2))),64))])]),(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.items,(t=>((0,a.wg)(),(0,a.iD)("tr",{key:t,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,a._)("th",bU,[(0,a._)("div",null,[(0,a._)("div",null,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e=>t.product.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[CU,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.filtredProducts,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,DU)))),128))],8,kU),[[i.bM,t.product.id]])])])]),(0,a._)("th",SU,[(0,a._)("div",null,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e=>t.product_variation.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[UU,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.getVariations(t.product)?.variations,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t.id,key:t.id},[t.size||t.color?((0,a.wg)(),(0,a.iD)("p",PU,(0,Q.zw)(t.size)+" / "+(0,Q.zw)(t.color),1)):((0,a.wg)(),(0,a.iD)("p",AU,"-"))],8,LU)))),128))],8,zU),[[i.bM,t.product_variation.id]])])]),(0,a._)("th",WU,[(0,a._)("div",EU,[(0,a.wy)((0,a._)("input",{type:"number","onUpdate:modelValue":e=>t.quantity=e,placeholder:"Quantity",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-[80px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,$U),[[i.nr,t.quantity]])])]),(0,a._)("th",TU,[(0,a._)("div",null,[null==t.price?((0,a.wg)(),(0,a.iD)("div",OU," - ")):((0,a.wg)(),(0,a.iD)("div",VU,[(0,a.wy)((0,a._)("input",{type:"number","onUpdate:modelValue":e=>t.price=e,placeholder:"Price",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[100px] tw-max-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,RU),[[i.nr,t.price]])]))])]),(0,a._)("th",qU,[(0,a._)("div",null,[(0,a.Wm)(G.T,{onClick:e=>o.deleteItem(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])])))),128)),l.isAddItem?((0,a.wg)(),(0,a.iD)("tr",FU,[(0,a._)("th",IU,[(0,a._)("div",null,[(0,a._)("div",null,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[13]||(e[13]=t=>l.product_id=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[NU,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.filtredProducts,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,jU)))),128))],512),[[i.bM,l.product_id]])])])]),(0,a._)("th",MU,[(0,a._)("div",null,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[14]||(e[14]=t=>l.product_variation_id=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[HU,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.variations,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t.id,key:t.id},[t.size||t.color?((0,a.wg)(),(0,a.iD)("p",ZU,(0,Q.zw)(t.size)+" / "+(0,Q.zw)(t.color),1)):((0,a.wg)(),(0,a.iD)("p",KU,"-"))],8,YU)))),128))],512),[[i.bM,l.product_variation_id]])])]),(0,a._)("th",QU,[(0,a._)("div",GU,[(0,a.wy)((0,a._)("input",{type:"number","onUpdate:modelValue":e[15]||(e[15]=t=>l.quantity=t),placeholder:"Quantity",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-[80px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[i.nr,l.quantity]])])]),(0,a._)("th",BU,[(0,a._)("div",JU,[(0,a.wy)((0,a._)("input",{type:"number","onUpdate:modelValue":e[16]||(e[16]=t=>l.price=t),placeholder:"Price",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[100px] tw-max-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[i.nr,l.price]])])]),XU])):(0,a.kq)("",!0)])]))])])):(0,a.kq)("",!0),(0,a._)("div",tL,[(0,a._)("div",null,[(0,a.Wm)(G.T,{onClick:o.addNewRow,class:"mr-2 !tw-px-1 !tw-py-1 !tw-pr-2 tw-flex tw-items-center tw-gap-2","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-plus")])),_:1}),eL])),_:1},8,["onClick"])])]),(0,a._)("div",sL,[iL,(0,a._)("div",aL,[rL,(0,a.wy)((0,a._)("input",{type:"number","onUpdate:modelValue":e[17]||(e[17]=t=>l.sale.price=t),class:"tw-py-1 tw-max-w-[100px] tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[i.nr,l.sale.price]])])]),(0,a._)("div",lL,[oL,(0,a._)("div",nL,[dL,(0,a._)("div",cL,(0,Q.zw)(o.total_price),1)])])]),(0,a._)("div",wL,[(0,a.Wm)(G.T,{onClick:o.handleCancel,color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,a.w5)((()=>[uL])),_:1},8,["onClick"]),(0,a.Wm)(G.T,{loading:l.isLoading,onClick:o.update,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,a.w5)((()=>[pL])),_:1},8,["loading","onClick"])])])):(0,a.kq)("",!0)])),_:1},8,["visible"])])}const hL={class:"tw-relative"},gL=["disabled"],fL=["value"],vL={key:1,class:"tw-relative tw-min-w-[100px] tw-flex tw-items-center"};function yL(t,e,s,r,l,o){return o.fetched?(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",{key:s.affectation,class:"tw-relative tw-min-w-[100px]"},[(0,a._)("div",null,[(0,a._)("div",hL,[(0,a.wy)((0,a._)("select",{disabled:"confirmer"!=s.confirmation,"onUpdate:modelValue":e[0]||(e[0]=t=>o.affectationValue=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.options,(t=>((0,a.wg)(),(0,a.iD)("option",{key:t.id,value:t.id},(0,Q.zw)(t.firstname+" "+t.lastname),9,fL)))),128))],8,gL),[[i.bM,o.affectationValue]]),(0,a.Wm)(J.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-chevron-down")])),_:1})])])])),[[Zt.L,o.close]]):((0,a.wg)(),(0,a.iD)("div",vL,[(0,a.Wm)(J.t,{class:"tw-animate-spin tw-ml-1 tw-text-orange-500"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-loading")])),_:1})]))}var _L={props:["affectation","id","order","confirmation","items"],data(){return{isOpen:!1,isLoading:!1,selectedId:null}},computed:{options(){return[{id:null,firstname:"select",lastname:""},...this.deliveries]},affectationValue:{get(){return this.affectation},set(t){this.$emit("update:affectation",t)}},selected(){const t=[...this.deliveries.map((t=>parseInt(t.id)))];return null!=this.selectedId&&t.includes(parseInt(this.selectedId))?this.options.filter((t=>t.id==this.selectedId))[0]:{id:null,firstname:"select",lastname:""}},users(){return this.$store.getters["user/users"]},allDeliveries(){return this.users.filter((t=>"delivery"==t.role_name))},fetched(){return this.$store.getters["user/fetched"]},deliveries(){return console.log(this.allDeliveries),console.log(this.order),this.order.created_at?this.allDeliveries.filter((t=>t.delivery_products.some((t=>this.items.some((e=>e.product_id==t.product_id)))))):[]}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleChange(t){if(t.id===this.selectedId)return!1;this.selectedId=t.id,this.isLoading=!0,this.updateOrder(),this.close()}},mounted(){this.selectedId=this.affectation}};const xL=(0,d.Z)(_L,[["render",yL]]);var bL=xL,kL={components:{AddOrderConfirmation:Ic,AddOrderAffectation:bL},props:["visible","order"],data(){return{upsells:Zo,isLoading:!1,isAddItem:!1,product_id:0,product_variation_id:0,warehouse_id:0,quantity:1,item_id:1,items:[],reported_date:null,price:0,sale:{fullname:"",phone:"",city:"",adresse:"",price:0,upsell:null,confirmation:null,counts_from_warehouse:!1}}},watch:{product_id(){this.selectedProduct&&this.selectedProduct.variations.length>0?this.product_variation_id=this.selectedProduct.variations[0].id:this.product_variation_id=0},warehouse_id(){this.product_id=0,this.product_variation_id=0}},computed:{products(){return this.$store.getters["product/products"]},isLoaded(){return this.$store.getters["product/fetched"]},warehouses(){const t=this.products.flatMap((t=>t.variations.map((t=>t.warehouse)))),e=t.map((t=>t.id));return t.filter(((t,s)=>e.indexOf(t.id)===s))},filtredProducts(){return this.products},cities(){return this.$store.getters["city/cities"]},variations(){return 0==this.product_id?[]:this.products.find((t=>t.id==this.product_id)).variations},selectedProduct(){return this.products.find((t=>t.id==this.product_id))},total_price:{get(){const t=this.items.reduce(((t,e)=>t+(e.price?e.price:0)),0);return parseFloat(this.sale.price?this.sale.price:0)+parseFloat(t)}},isItemsValid(){if(0==this.items.length)return!1;const t=this.items.some((t=>0==t.product.id||0==t.product_variation_id||0==t.quantity));return!t},isFormValid(){return!!this.sale.fullname&&!!this.sale.phone&&!!this.sale.adresse&&0!=this.sale.price&&this.items.length>0&&!!this.sale.city},formatedItems(){const t=this.items.map((t=>{const e=this.products.find((e=>e.id==t.product.id));if(!e)return t;const s=e.variations.find((e=>e.id==t.product_variation.id));return s?{...t,product:e,product_id:e.id,product_variation:s,product_variation_id:s.id,product_ref:e.ref}:t}));return t}},methods:{deleteItem(t){this.items=this.items.filter((e=>e.id!=t))},addNewRow(){const t={id:this.item_id,product_id:0,product_ref:null,product:{id:0},product_variation:{id:0},product_variation_id:0,order_id:this.order.id,quantity:0,price:0};this.items.push(t)},getVariations(t){return this.products.find((e=>e.id==t.id))},formatItems(){const t=this.items.map((t=>{const e=this.products.find((e=>e.id==t.product.id));if(!e)return t;const s=e.variations.find((e=>e.id==t.product_variation.id));return s?{...t,product:e,product_id:e.id,product_variation:s,product_variation_id:s.id,product_ref:e.ref}:t}));return this.items=t,t},addItem(){if([this.product_id,this.product_variation_id].includes(0))return this.$alert({title:"Choose a product",type:"warning"}),!1;const t=this.filtredProducts.find((t=>t.id==this.product_id)),e=this.variations.find((t=>t.id==this.product_variation_id)),s={id:this.item_id,product_id:t.id,product_ref:t.ref,product:t,product_variation:e,product_variation_id:e.id,quantity:this.quantity,price:this.price};this.items.push(s),this.product_id=0,this.product_variation_id=0,this.price=0,this.item_id+=1},update(){if(this.formatItems(),!this.isFormValid)return this.$alert({type:"warning",title:"Please fill all the form"}),!1;if(!this.isItemsValid)return this.$alert({type:"warning",title:"Order Items are not valid"}),!1;if(0==this.total_price)return this.$alert({type:"warning",title:"Total price cannot be 0"}),!1;this.isLoading=!0;const t={id:this.sale.id,fullname:this.sale.fullname,phone:this.sale.phone,city:this.sale.city,price:this.sale.price,adresse:this.sale.adresse,upsell:this.sale.upsell,counts_from_warehouse:this.sale.counts_from_warehouse,orderItems:this.items,confirmation:this.sale.confirmation,note:this.sale.note,affectation:this.sale.affectation,reported_agente_note:this.sale.reported_agente_note,reported_agente_date:this.sale.reported_agente_date};this.isLoading=!0,vs.update(t.id,t).then((e=>{"SUCCESS"==e.data.code&&(this.showUpdatePopup=!1,this.$alert({type:"success",title:"Order updated"}),this.$store.dispatch("order/update",{id:t.id,order:e.data.data.sale}),this.$emit("update:visible",!1),this.$emit("updateOrder",e.data.data.sale))})).catch((t=>{this.$handleApiError(t)})).finally((()=>{this.isLoading=!1}))},handleCancel(){this.sale={...this.order},this.items=[...this.order.items],this.$emit("update:visible",!1)},handleReported(t){this.sale.reported_agente_note=t.reported_agente_note,this.sale.reported_agente_date=t.reported_agente_date,console.log(t)},getProducts(){return ti.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))}},mounted(){this.sale={...this.order},this.items=[...this.order.items]}};const CL=(0,d.Z)(kL,[["render",mL]]);var DL=CL;const SL={key:0,class:"md:tw-w-[80%] tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},zL={key:1,class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[880px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},UL=(0,a._)("h1",{class:"tw-text-lg"},"Update Order",-1),LL={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},AL={class:"md:tw-col-span-6 tw-col-span-12"},PL=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Client",-1),WL={class:"md:tw-col-span-6 tw-col-span-12"},EL=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Phone",-1),$L={class:"md:tw-col-span-6 tw-col-span-12"},TL=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"City",-1),OL=["value"],VL=["value"],RL={class:"md:tw-col-span-6 tw-col-span-12"},qL=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Address",-1),FL={class:"md:tw-col-span-12 tw-col-span-12 tw-mt-3 tw-border-t tw-border-neutral-300 tw-pt-3"},IL=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Confirmation",-1),NL={class:"md:tw-col-span-6 tw-col-span-12"},jL=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Affectation",-1),ML={class:"md:tw-col-span-6 tw-col-span-12"},HL=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Upsell",-1),YL=["value"],KL=(0,a._)("p",{class:"tw-col-span-12 tw-mt-5 tw-mb-2"},"Order Items",-1),ZL={key:5,class:"tw-col-span-12 tw-rounded tw-text-center tw-p-5 tw-text-gray-700 tw-bg-gray-50"},QL={key:6,class:"md:tw-col-span-12 tw-col-span-12"},GL={class:"tw-max-w-full tw-overflow-auto"},BL={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},JL={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},XL={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},tA=["onUpdate:modelValue"],eA=(0,a._)("option",{value:0},"Select",-1),sA=["value"],iA={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},aA=["onUpdate:modelValue"],rA=(0,a._)("option",{value:0},"Select",-1),lA=["value"],oA={key:0},nA={key:1},dA={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},cA={class:"md:tw-col-span-6 tw-col-span-12"},wA=["onUpdate:modelValue"],uA={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},pA={key:0},mA={key:1,class:"md:tw-col-span-6 tw-col-span-12"},hA=["onUpdate:modelValue"],gA={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},fA={key:0,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},vA={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},yA=(0,a._)("option",{value:0},"Select",-1),_A=["value"],xA={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},bA=(0,a._)("option",{value:0},"Select",-1),kA=["value"],CA={key:0},DA={key:1},SA={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},zA={class:"md:tw-col-span-6 tw-col-span-12"},UA={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},LA={class:"md:tw-col-span-6 tw-col-span-12"},AA=(0,a._)("th",{scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},null,-1),PA={class:"tw-w-full tw-col-span-12 tw-flex tw-justify-end tw-mt-3"},WA=(0,a._)("span",{class:"!tw-text-sm !tw-capitalize"},"Add",-1),EA={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},$A=(0,a._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),TA={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},OA=(0,a._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-mb-2 tw-whitespace-nowrap"},"Price: ",-1),VA={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},RA=(0,a._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),qA={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},FA=(0,a._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-whitespace-nowrap"},"Total Price: ",-1),IA={class:"tw-font-medium"},NA={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},jA=(0,a._)("span",{class:"text-white"}," Cancel ",-1),MA=(0,a._)("span",{class:"text-white"}," Update ",-1);function HA(t,e,s,r,l,o){const n=(0,a.up)("LoadingAnimation"),d=(0,a.up)("AddOrderConfirmation"),c=(0,a.up)("AddOrderAffectation"),w=(0,a.up)("popup-full");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(w,{onCancel:e[18]||(e[18]=e=>t.$emit("update:visible",!1)),visible:s.visible},{default:(0,a.w5)((()=>[o.isLoaded?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",SL,[(0,a.Wm)(n)])),o.isLoaded?((0,a.wg)(),(0,a.iD)("div",zL,[UL,(0,a._)("div",LL,[(0,a._)("div",AL,[PL,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>l.sale.fullname=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[i.nr,l.sale.fullname]])]),(0,a._)("div",WL,[EL,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>l.sale.phone=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[i.nr,l.sale.phone]])]),(0,a._)("div",$L,[TL,(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.sale.city=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[(0,a._)("option",{disabled:"",value:l.sale.city},(0,Q.zw)(l.sale.city),9,OL),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.cities,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t.name,key:t.id},(0,Q.zw)(t.name),9,VL)))),128))],512),[[i.bM,l.sale.city]])]),(0,a._)("div",RL,[qL,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>l.sale.adresse=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[i.nr,l.sale.adresse]])]),(0,a._)("div",FL,[IL,(0,a.Wm)(d,{order:l.sale,id:l.sale.id,confirmation:l.sale.confirmation,"onUpdate:confirmation":e[4]||(e[4]=t=>l.sale.confirmation=t),onConfirmed:e[5]||(e[5]=t=>l.sale.note=t),onReported:o.handleReported},null,8,["order","id","confirmation","onReported"])]),(0,a._)("div",NL,[jL,(0,a.Wm)(c,{items:l.items,order:l.sale,confirmation:l.sale.confirmation,affectation:l.sale.affectation,"onUpdate:affectation":e[6]||(e[6]=t=>l.sale.affectation=t),id:l.sale.id},null,8,["items","order","confirmation","affectation","id"])]),(0,a._)("div",ML,[HL,(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[7]||(e[7]=t=>l.sale.upsell=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.upsells,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t.value,key:t.id},(0,Q.zw)(t.name),9,YL)))),128))],512),[[i.bM,l.sale.upsell]])]),(0,a.kq)("",!0),(0,a.kq)("",!0),(0,a.kq)("",!0),(0,a.kq)("",!0),(0,a.kq)("",!0),KL,l.items.length?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("p",ZL," No Order items ")),l.items.length?((0,a.wg)(),(0,a.iD)("div",QL,[(0,a._)("div",GL,[((0,a.wg)(),(0,a.iD)("table",{key:l.items.length,class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},[(0,a._)("thead",BL,[(0,a._)("tr",null,[((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(["product","variation","quantity","price","actions"],(t=>(0,a._)("th",{class:(0,Q.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,a._)("div",JL,(0,Q.zw)(t),1)],2))),64))])]),(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.items,(t=>((0,a.wg)(),(0,a.iD)("tr",{key:t,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,a._)("th",XL,[(0,a._)("div",null,[(0,a._)("div",null,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e=>t.product.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[eA,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.filtredProducts,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,sA)))),128))],8,tA),[[i.bM,t.product.id]])])])]),(0,a._)("th",iA,[(0,a._)("div",null,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e=>t.product_variation.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[rA,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.getVariations(t.product)?.variations,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t.id,key:t.id},[t.size||t.color?((0,a.wg)(),(0,a.iD)("p",nA,(0,Q.zw)(t.size)+" / "+(0,Q.zw)(t.color),1)):((0,a.wg)(),(0,a.iD)("p",oA,"-"))],8,lA)))),128))],8,aA),[[i.bM,t.product_variation.id]])])]),(0,a._)("th",dA,[(0,a._)("div",cA,[(0,a.wy)((0,a._)("input",{type:"number","onUpdate:modelValue":e=>t.quantity=e,placeholder:"Quantity",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-[80px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,wA),[[i.nr,t.quantity]])])]),(0,a._)("th",uA,[(0,a._)("div",null,[null==t.price?((0,a.wg)(),(0,a.iD)("div",pA," - ")):((0,a.wg)(),(0,a.iD)("div",mA,[(0,a.wy)((0,a._)("input",{type:"number","onUpdate:modelValue":e=>t.price=e,placeholder:"Price",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[100px] tw-max-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,hA),[[i.nr,t.price]])]))])]),(0,a._)("th",gA,[(0,a._)("div",null,[(0,a.Wm)(G.T,{onClick:e=>o.deleteItem(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])])))),128)),l.isAddItem?((0,a.wg)(),(0,a.iD)("tr",fA,[(0,a._)("th",vA,[(0,a._)("div",null,[(0,a._)("div",null,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[13]||(e[13]=t=>l.product_id=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[yA,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.filtredProducts,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,_A)))),128))],512),[[i.bM,l.product_id]])])])]),(0,a._)("th",xA,[(0,a._)("div",null,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[14]||(e[14]=t=>l.product_variation_id=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[bA,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.variations,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t.id,key:t.id},[t.size||t.color?((0,a.wg)(),(0,a.iD)("p",DA,(0,Q.zw)(t.size)+" / "+(0,Q.zw)(t.color),1)):((0,a.wg)(),(0,a.iD)("p",CA,"-"))],8,kA)))),128))],512),[[i.bM,l.product_variation_id]])])]),(0,a._)("th",SA,[(0,a._)("div",zA,[(0,a.wy)((0,a._)("input",{type:"number","onUpdate:modelValue":e[15]||(e[15]=t=>l.quantity=t),placeholder:"Quantity",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-[80px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[i.nr,l.quantity]])])]),(0,a._)("th",UA,[(0,a._)("div",LA,[(0,a.wy)((0,a._)("input",{type:"number","onUpdate:modelValue":e[16]||(e[16]=t=>l.price=t),placeholder:"Price",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[100px] tw-max-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[i.nr,l.price]])])]),AA])):(0,a.kq)("",!0)])]))])])):(0,a.kq)("",!0),(0,a._)("div",PA,[(0,a._)("div",null,[(0,a.Wm)(G.T,{onClick:o.addNewRow,class:"mr-2 !tw-px-1 !tw-py-1 !tw-pr-2 tw-flex tw-items-center tw-gap-2","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-plus")])),_:1}),WA])),_:1},8,["onClick"])])]),(0,a._)("div",EA,[$A,(0,a._)("div",TA,[OA,(0,a.wy)((0,a._)("input",{type:"number","onUpdate:modelValue":e[17]||(e[17]=t=>l.sale.price=t),class:"tw-py-1 tw-max-w-[100px] tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[i.nr,l.sale.price]])])]),(0,a._)("div",VA,[RA,(0,a._)("div",qA,[FA,(0,a._)("div",IA,(0,Q.zw)(o.total_price),1)])])]),(0,a._)("div",NA,[(0,a.Wm)(G.T,{onClick:o.handleCancel,color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,a.w5)((()=>[jA])),_:1},8,["onClick"]),(0,a.Wm)(G.T,{loading:l.isLoading,onClick:o.update,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,a.w5)((()=>[MA])),_:1},8,["loading","onClick"])])])):(0,a.kq)("",!0)])),_:1},8,["visible"])])}var YA={components:{AddOrderConfirmation:Ic,AddOrderAffectation:bL},props:["visible","order"],data(){return{upsells:Zo,isLoading:!1,isAddItem:!1,product_id:0,product_variation_id:0,warehouse_id:0,quantity:1,item_id:1,items:[],reported_date:null,price:0,sale:{fullname:"",phone:"",city:"",adresse:"",price:0,upsell:null,confirmation:null,counts_from_warehouse:!1}}},watch:{product_id(){this.selectedProduct&&this.selectedProduct.variations.length>0?this.product_variation_id=this.selectedProduct.variations[0].id:this.product_variation_id=0},warehouse_id(){this.product_id=0,this.product_variation_id=0}},computed:{products(){return this.$store.getters["product/products"]},isLoaded(){return this.$store.getters["product/fetched"]},warehouses(){const t=this.products.flatMap((t=>t.variations.map((t=>t.warehouse)))),e=t.map((t=>t.id));return t.filter(((t,s)=>e.indexOf(t.id)===s))},filtredProducts(){return this.products},cities(){return this.$store.getters["city/cities"]},variations(){return 0==this.product_id?[]:this.products.find((t=>t.id==this.product_id)).variations},selectedProduct(){return this.products.find((t=>t.id==this.product_id))},total_price:{get(){const t=this.items.reduce(((t,e)=>t+(e.price?e.price:0)),0);return parseFloat(this.sale.price?this.sale.price:0)+parseFloat(t)}},isItemsValid(){if(0==this.items.length)return!1;const t=this.items.some((t=>0==t.product.id||0==t.product_variation_id||0==t.quantity));return!t},isFormValid(){return!!this.sale.fullname&&!!this.sale.phone&&!!this.sale.adresse&&0!=this.sale.price&&this.items.length>0&&!!this.sale.city},formatedItems(){const t=this.items.map((t=>{const e=this.products.find((e=>e.id==t.product.id));if(!e)return t;const s=e.variations.find((e=>e.id==t.product_variation.id));return s?{...t,product:e,product_id:e.id,product_variation:s,product_variation_id:s.id,product_ref:e.ref}:t}));return t}},methods:{deleteItem(t){this.items=this.items.filter((e=>e.id!=t))},addNewRow(){const t={id:this.item_id,product_id:0,product_ref:null,product:{id:0},product_variation:{id:0},product_variation_id:0,order_id:this.order.id,quantity:0,price:0};this.items.push(t)},getVariations(t){return this.products.find((e=>e.id==t.id))},formatItems(){const t=this.items.map((t=>{const e=this.products.find((e=>e.id==t.product.id));if(!e)return t;const s=e.variations.find((e=>e.id==t.product_variation.id));return s?{...t,product:e,product_id:e.id,product_variation:s,product_variation_id:s.id,product_ref:e.ref}:t}));return console.log(t),this.items=t,t},addItem(){if([this.product_id,this.product_variation_id].includes(0))return this.$alert({title:"Choose a product",type:"warning"}),!1;const t=this.filtredProducts.find((t=>t.id==this.product_id)),e=this.variations.find((t=>t.id==this.product_variation_id)),s={id:this.item_id,product_id:t.id,product_ref:t.ref,product:t,product_variation:e,product_variation_id:e.id,quantity:this.quantity,price:this.price};this.items.push(s),this.product_id=0,this.product_variation_id=0,this.price=0,this.item_id+=1},update(){if(this.formatItems(),!this.isFormValid)return this.$alert({type:"warning",title:"Please fill all the form"}),!1;if(!this.isItemsValid)return this.$alert({type:"warning",title:"Order Items are not valid"}),!1;if(0==this.total_price)return this.$alert({type:"warning",title:"Total price cannot be 0"}),!1;this.isLoading=!0;const t={id:this.sale.id,fullname:this.sale.fullname,phone:this.sale.phone,city:this.sale.city,price:this.sale.price,adresse:this.sale.adresse,upsell:this.sale.upsell,counts_from_warehouse:this.sale.counts_from_warehouse,orderItems:this.items,confirmation:this.sale.confirmation,note:this.sale.note,affectation:this.sale.affectation,reported_agente_note:this.sale.reported_agente_note,reported_agente_date:this.sale.reported_agente_date};this.isLoading=!0,vs.update(t.id,t).then((t=>{"SUCCESS"==t.data.code&&(this.showUpdatePopup=!1,this.$alert({type:"success",title:"Order updated"}),this.$emit("update:visible",!1),this.$emit("updateOrder",t.data.data.sale))})).catch((t=>{this.$handleApiError(t)})).finally((()=>{this.isLoading=!1}))},handleCancel(){this.sale={...this.order},this.items=[...this.order.items],this.$emit("update:visible",!1)},handleReported(t){this.sale.reported_agente_note=t.reported_agente_note,this.sale.reported_agente_date=t.reported_agente_date,console.log(t)},getProducts(){return ti.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))}},mounted(){this.sale={...this.order},this.items=[...this.order.items]}};const KA=(0,d.Z)(YA,[["render",HA]]);var ZA=KA,QA={emits:["updateOrder"],components:{UpdateOrder:DL,UpdateDoubleOrder:ZA},props:{order:{required:!0},only:{required:!1,default:["update","whatsapp"]},double:{required:!1,default:!1}},name:"orderActions",data(){return{showPopup:!1,showUpdatePopup:!1,isLoading:!1,newOrder:null}},computed:{cities(){return this.$store.getters["city/cities"]}},methods:{},mounted(){}};const GA=(0,d.Z)(QA,[["render",Zz]]);var BA=GA,JA={props:["order","showNote"],components:{OrderConfirmation:Az,OrderUpsell:Oz,OrderAffectation:Mz,OrderActions:BA},data(){return{showPopup:!1,isLoading:!1,newNote:"",newOrder:null,todayDate:null}},computed:{id(){return this.order.id},fullname(){return this.order.fullname},product_name(){return this.order.product_name},agente_id(){return this.order.agente_id},upsell(){return this.order.upsell},phone(){return this.order.phone},city(){return this.order.city},adresse(){return this.order.adresse},quantity(){return this.order.quantity},price(){return this.order.price},confirmation(){return this.order.confirmation},affectation(){return this.order.affectation},delivery(){return this.order.delivery},note(){return this.order.note},created_at(){return this.order?.created_at}},methods:{getPrice(t){return sw(t)},handleClick(){this.showPopup=!0,this.newNote=this.note},handleResolved(t){t?(this.showPopup=!1,this.isLoading=!0,vs.agenteUpdateNote(this.id,this.newNote).then((t=>{"SUCCESS"==t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.$store.dispatch("order/updateNote",{note:this.newNote,id:this.id}))}),this.$handleApiError).finally((()=>this.isLoading=!1))):this.showPopup=!1},isReportedToday(t){return"reporter"==t.confirmation&&t.reported_agente_date==this.todayDate}},mounted(){this.newOrder=this.order;const t=new Date,e=t.getDate(),s=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getMonth()+1,a=i.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),r=t.getFullYear();this.todayDate=`${r}-${a}-${s}`}};const XA=(0,d.Z)(JA,[["render",az]]);var tP=XA,eP={props:["orders","note"],data(){return{allowedLimit:[5,10,20,50,100,200,500],currentPage:1,paginationLimit:50,todayDate:null,columnsNote:["id","date","client","product","confirmation","affectation","price","city","note","actions"],columnsNormal:["id","date","client","product","confirmation","affectation","price","city","actions"]}},components:{OrderRow:tP},computed:{columns(){return this.note?this.columnsNote:this.columnsNormal},deliveries(){return this.$store.getters["user/deliveries"]},prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.orders.length/this.paginationLimit)},items(){const t=[...this.reportedForToday,...this.orders.filter((t=>!this.isReportedToday(t)))];return t.slice(this.prevRange,this.nextRange)},reportedForToday(){return this.orders.filter(this.isReportedToday)}},methods:{getDeliveries(){K.deliveries().then((t=>{console.log(t.data.data),this.$store.dispatch("user/setDeliveries",t.data.data)}),this.$handleApiError)},isReportedToday(t){return"reporter"==t.confirmation&&t.reported_agente_date==this.todayDate}},mounted(){0==this.deliveries.length&&this.getDeliveries();const t=new Date,e=t.getDate(),s=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getMonth()+1,a=i.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),r=t.getFullYear();this.todayDate=`${r}-${a}-${s}`}};const sP=(0,d.Z)(eP,[["render",PS]]);var iP=sP,aP={components:{OrdersTable:iP},data(){return{localUrl:q,confirmations:Ko,isLoaded:!1,showFilters:!1,confirmationFilter:"all",affectationFilter:"all",upsellFilter:"all",search:""}},computed:{orders(){return this.$store.getters["order/orders"]},deliveries(){return this.$store.getters["user/deliveries"]},filteredOrders(){const t=this.confirmationFilter,e=this.affectationFilter,s=this.upsellFilter;return this.orders.filter((i=>{if("all"!==t&&i.confirmation!==t)return!1;if("all"!==e&&parseInt(i.affectation)!==parseInt(e))return!1;if("all"!==s&&i.upsell!==s)return!1;const a=((t,e)=>{for(const s in t)if(!["created_at","updated_at","sheets_id","reported_agente_note","reported_agente_note","reported_agente_date","reported_delivery_note","reported_delivery_date"].includes(s)&&String(t[s]).toLowerCase().includes(e.toLowerCase()))return!0;return!1})(i,this.search);return!!a}))}},methods:{async getDeliveries(){await K.deliveries().then((t=>{console.log(t.data.data),this.$store.dispatch("user/setDeliveries",t.data.data)}),this.$handleApiError)},getOrders(){vs.agenteOrders().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;this.$store.dispatch("order/setOrders",e),console.log(t.data),this.isLoaded=!0}})).catch(this.$handleApiError)}},mounted(){this.$store.dispatch("order/setOrders",[]),this.getOrders()}};const rP=(0,d.Z)(aP,[["render",fS]]);var lP=rP;const oP=(0,a._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,a._)("div",null,[(0,a._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Order"),(0,a._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Order Details")])],-1),nP={class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},dP={class:""},cP={class:"text-white"},wP={key:0},uP={class:"mt-5"},pP={key:0,class:"tw-py-5"},mP=(0,a._)("p",{class:"tw-text-neutral-400 tw-text-md"},"Original Order: ",-1),hP={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},gP={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},fP=(0,a._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},[(0,a._)("tr",null,[(0,a._)("th",{scope:"col",class:"px-6 py-3"}," # "),(0,a._)("th",{scope:"col",class:"px-6 py-3"}," Client "),(0,a._)("th",{scope:"col",class:"px-6 py-3"}," Phone "),(0,a._)("th",{scope:"col",class:"px-6 py-3"}," Product "),(0,a._)("th",{scope:"col",class:"px-6 py-3"}," Price "),(0,a._)("th",{scope:"col",class:"px-6 py-3"}," City "),(0,a._)("th",{scope:"col",class:"px-6 py-3"}," Adresse "),(0,a._)("th",{scope:"col",class:"px-6 py-3"},[(0,a._)("span",{class:"sr-only"},"Edit")])])],-1),vP={class:"tw-bg-white tw-border-b"},yP={scope:"row",class:"px-6 py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},_P={scope:"row",class:"px-6 py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},xP={class:"px-6 py-4 tw-flex tw-items-center"},bP={class:"px-6 py-4"},kP={class:"tw-text-orange-500 tw-font-bold tw-pr-1 tw-text-xs"},CP={key:0},DP={key:1},SP={class:"px-6 py-4"},zP={class:"px-6 py-4"},UP={class:"px-6 py-4"},LP={class:"px-6 py-4"},AP={class:"tw-flex tw-gap-2 tw-justify-end tw-mt-5"},PP=(0,a._)("span",{class:"text-white"}," Save ",-1),WP={key:1},EP=(0,a._)("p",{class:"tw-text-neutral-400 tw-py-5"},"No Order was found !",-1),$P=[EP];function TP(t,e,s,i,r,l){const o=(0,a.up)("NewOrder"),n=(0,a.up)("UpdateOrder");return(0,a.wg)(),(0,a.iD)("div",null,[oP,(0,a._)("div",nP,[(0,a._)("div",dP,[(0,a._)("div",null,[(0,a.Wm)(G.T,{onClick:l.addOrder,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,a.w5)((()=>[(0,a._)("span",cP,(0,Q.zw)(r.isLoaded?"Add Order":"Loading..."),1),r.isLoaded?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(J.t,{key:0,icon:"mdi-autorenew",class:"ml-2 text-white tw-animate-spin"}))])),_:1},8,["onClick"])]),r.isLoaded&&r.isOrderExists?((0,a.wg)(),(0,a.iD)("div",wP,[(0,a._)("div",uP,[r.newOrder.product_name?((0,a.wg)(),(0,a.iD)("div",pP,[mP,(0,a._)("p",null,[(0,a._)("ul",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.newOrder.product_name.split("\n"),(t=>((0,a.wg)(),(0,a.iD)("li",{key:t,class:"tw-font-bold"}," - "+(0,Q.zw)(t),1)))),128))])])])):(0,a.kq)("",!0),(0,a._)("div",hP,[(0,a._)("table",gP,[fP,(0,a._)("tbody",null,[(0,a._)("tr",vP,[(0,a._)("th",yP,(0,Q.zw)(r.newOrder.id),1),(0,a._)("th",_P,(0,Q.zw)(r.newOrder.fullname),1),(0,a._)("td",xP,[(0,a.Uk)((0,Q.zw)(r.newOrder.phone)+" ",1),(0,a.Wm)(G.T,{link:"",target:"_blank",href:"https://api.whatsapp.com/send?phone="+r.newOrder.phone.replace("+","").replace("-","").replace(" ",""),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"green",variant:"text",density:"comfortable",ripple:!1,size:"small"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"green"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-whatsapp")])),_:1})])),_:1},8,["href"])]),(0,a._)("td",bP,[(0,a._)("p",null,[(0,a._)("ul",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.newOrder.items,(t=>((0,a.wg)(),(0,a.iD)("li",{key:t.id,class:"tw-font-bold"},[(0,a.Uk)(" - "),(0,a._)("span",kP,(0,Q.zw)(t.quantity)+" X ",1),(0,a.Uk)((0,Q.zw)(t.product.name)+" ",1),t.product_variation.size?((0,a.wg)(),(0,a.iD)("span",CP,"| "+(0,Q.zw)(t.product_variation.size),1)):(0,a.kq)("",!0),t.product_variation.color?((0,a.wg)(),(0,a.iD)("span",DP,"| "+(0,Q.zw)(t.product_variation.color),1)):(0,a.kq)("",!0)])))),128))])])]),(0,a._)("td",SP,(0,Q.zw)(l.getPrice(r.newOrder)),1),(0,a._)("td",zP,(0,Q.zw)(r.newOrder.city),1),(0,a._)("td",UP,(0,Q.zw)(r.newOrder.adresse),1),(0,a._)("td",LP,[(r.newOrder.upsell,(0,a.wg)(),(0,a.j4)(G.T,{key:0,onClick:e[0]||(e[0]=t=>r.showUpdatePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-pencil-outline")])),_:1})])),_:1}))])]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.newOrder?.doubles,(t=>((0,a.wg)(),(0,a.j4)(o,{onUpdate:l.handleDoubleUpdate,order:t,key:t.id},null,8,["onUpdate","order"])))),128))])])])]),(0,a._)("div",AP,[(0,a.Wm)(G.T,{onClick:l.clearOrder,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,a.w5)((()=>[PP])),_:1},8,["onClick"])])])):(0,a.kq)("",!0),r.isLoaded&&!r.isOrderExists?((0,a.wg)(),(0,a.iD)("div",WP,$P)):(0,a.kq)("",!0)])]),r.showUpdatePopup?((0,a.wg)(),(0,a.j4)(n,{key:0,onUpdateOrder:l.handleUpdateOrder,visible:r.showUpdatePopup,"onUpdate:visible":e[1]||(e[1]=t=>r.showUpdatePopup=t),order:r.newOrder},null,8,["onUpdateOrder","visible","order"])):(0,a.kq)("",!0)])}const OP={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},VP={class:"tw-px-6 tw-py-4 tw-relative"},RP={class:"tw-absolute tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-text-xs"},qP={key:0,class:"tw-bg-purple-500/10 tw-text-purple-500 tw-px-2 tw-rounded-t"},FP={class:"px-6 py-4 tw-flex tw-items-center"},IP={class:"tw-px-6 tw-py-4 tw-relative"},NP={class:"tw-pb-2"},jP={class:"tw-text-orange-500 tw-font-bold tw-pr-1 tw-text-xs"},MP={key:0},HP={key:1},YP={class:"tw-px-6 tw-py-4"},KP={class:"tw-px-6 tw-py-4"},ZP={class:"tw-px-6 tw-py-4"},QP={key:3,class:"tw-px-6 tw-py-4"},GP={class:"tw-max-w-[300px] tw-min-w-[150px] tw-whitespace-normal"},BP={class:"tw-px-6 tw-py-4"},JP={class:"tw-min-w-[300px]"},XP=(0,a._)("p",null,"Edit note",-1);function tW(t,e,s,i,r,l){(0,a.up)("OrderUpsell"),(0,a.up)("OrderConfirmation"),(0,a.up)("OrderAffectation");const o=(0,a.up)("OrderActions"),n=(0,a.up)("popup");return(0,a.wg)(),(0,a.iD)(a.HY,null,[((0,a.wg)(),(0,a.iD)("tr",{key:s.order.id,class:(0,Q.C_)([["reporter"==s.order.confirmation&&"tw-relative",l.isReportedToday(s.order)&&"!tw-border tw-border-red-400"],"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"])},[(0,a._)("th",OP,(0,Q.zw)(l.id),1),(0,a._)("td",VP,[(0,a._)("p",null,(0,Q.zw)(l.fullname),1),(0,a._)("div",RP,[s.order.is_double?((0,a.wg)(),(0,a.iD)("p",qP," Maybe Double: "+(0,Q.zw)(s.order.double),1)):(0,a.kq)("",!0)])]),(0,a._)("td",FP,[(0,a.Uk)((0,Q.zw)(s.order.phone)+" ",1),(0,a.Wm)(G.T,{link:"",target:"_blank",href:"https://api.whatsapp.com/send?phone="+s.order.phone.replace("+","").replace("-","").replace(" ",""),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"green",variant:"text",density:"comfortable",ripple:!1,size:"small"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"green"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-whatsapp")])),_:1})])),_:1},8,["href"])]),(0,a._)("td",IP,[(0,a._)("div",NP,[(0,a._)("ul",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.order.items,(t=>((0,a.wg)(),(0,a.iD)("li",{key:t.id,class:"tw-font-bold"},[(0,a.Uk)(" - "),(0,a._)("span",jP,(0,Q.zw)(t.quantity)+" X ",1),(0,a.Uk)((0,Q.zw)(t.product.name)+" ",1),t.product_variation.size?((0,a.wg)(),(0,a.iD)("span",MP,"| "+(0,Q.zw)(t.product_variation.size),1)):(0,a.kq)("",!0),t.product_variation.color?((0,a.wg)(),(0,a.iD)("span",HP,"| "+(0,Q.zw)(t.product_variation.color),1)):(0,a.kq)("",!0)])))),128))])])]),(0,a.kq)("",!0),(0,a.kq)("",!0),(0,a.kq)("",!0),(0,a._)("td",YP,(0,Q.zw)(l.getPrice(s.order)),1),(0,a._)("td",KP,(0,Q.zw)(s.order.city),1),(0,a._)("td",ZP,(0,Q.zw)(s.order.adresse),1),s.showNote?((0,a.wg)(),(0,a.iD)("td",QP,[(0,a._)("div",GP,[(0,a.Uk)((0,Q.zw)(s.order.note)+" ",1),(0,a.Wm)(J.t,{onClick:l.handleClick,size:"x-small",class:(0,Q.C_)(["tw-ml-2 tw-text-blue-500 tw-cursor-pointer hover:tw-bg-neutral-900/10 tw-rounded-full tw-p-3",{"tw-animate-spin":r.isLoading}])},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Q.zw)(r.isLoading?"mdi-loading":"mdi-pencil"),1)])),_:1},8,["onClick","class"])])])):(0,a.kq)("",!0),(0,a._)("td",BP,[(0,a.Wm)(o,{double:!0,onUpdateOrder:e[0]||(e[0]=e=>t.$emit("update",e)),only:["update"],order:s.order},null,8,["order"])])],2)),(0,a.Wm)(n,{type:"info",title:"Add Note",onResolved:l.handleResolved,loading:r.isLoading,visible:r.showPopup},{default:(0,a.w5)((()=>[(0,a._)("div",JP,[XP,(0,a.Wm)(gu.z,{modelValue:r.newNote,"onUpdate:modelValue":e[1]||(e[1]=t=>r.newNote=t),variant:"outlined",class:"rounded-md",color:"primary-color"},null,8,["modelValue"])])])),_:1},8,["onResolved","loading","visible"])],64)}var eW={props:["order","showNote"],emits:["update"],components:{OrderConfirmation:Az,OrderUpsell:Oz,OrderAffectation:Mz,OrderActions:BA},data(){return{showPopup:!1,isLoading:!1,newNote:"",newOrder:null,todayDate:null}},computed:{id(){return this.order.id},fullname(){return this.order.fullname},product_name(){return this.order.product_name},agente_id(){return this.order.agente_id},upsell(){return this.order.upsell},phone(){return this.order.phone},city(){return this.order.city},adresse(){return this.order.adresse},quantity(){return this.order.quantity},price(){return this.order.price},confirmation(){return this.order.confirmation},affectation(){return this.order.affectation},delivery(){return this.order.delivery},note(){return this.order.note},created_at(){return this.order?.created_at}},methods:{getPrice(t){return sw(t)},handleClick(){this.showPopup=!0,this.newNote=this.note},handleResolved(t){t?(this.showPopup=!1,this.isLoading=!0,vs.agenteUpdateNote(this.id,this.newNote).then((t=>{"SUCCESS"==t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.$store.dispatch("order/updateNote",{note:this.newNote,id:this.id}))}),this.$handleApiError).finally((()=>this.isLoading=!1))):this.showPopup=!1},isReportedToday(t){return"reporter"==t.confirmation&&t.reported_agente_date==this.todayDate}},mounted(){this.newOrder=this.order;const t=new Date,e=t.getDate(),s=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getMonth()+1,a=i.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),r=t.getFullYear();this.todayDate=`${r}-${a}-${s}`}};const sW=(0,d.Z)(eW,[["render",tW]]);var iW=sW,aW={components:{UpdateOrder:DL,NewOrder:iW},data(){return{isOrderExists:!1,isLoaded:!1,isLoading:!1,showUpdatePopup:!1,form:{fullname:{valid:!0,message:""},phone:{valid:!0,message:""},city:{valid:!0,message:""},adresse:{valid:!0,message:""},quantity:{valid:!0,message:""},price:{valid:!0,message:""}},newOrder:null,popupOrder:null}},computed:{deliveries(){return this.$store.getters["user/deliveries"]},isFormValid(){return this.form.fullname.valid&&this.form.phone.valid&&this.form.city.valid&&this.form.adresse.valid&&this.form.quantity.valid&&this.form.price.valid},cities(){return this.$store.getters["city/cities"]}},methods:{updateConfirmation(t){this.newOrder.confirmation=t},getPrice(t){return sw(t)},updateUpsell(t){this.newOrder.upsell=t,this.popupOrder.upsell=t},handleCancel(){this.showUpdatePopup=!1,this.popupOrder={...this.newOrder}},handleUpdateOrder(t){this.newOrder={...t}},validateForm(){this.form.fullname=xt(this.popupOrder.fullname,"Client"),this.form.phone=xt(this.popupOrder.phone,"Phone"),this.form.city=xt(this.popupOrder.city,"City"),this.form.adresse=xt(this.popupOrder.adresse,"Address"),this.form.quantity=xt(this.popupOrder.quantity,"Quantity"),this.form.price=xt(this.popupOrder.price,"Price")},handleDoubleUpdate(t){this.newOrder.doubles=this.newOrder.doubles.map((e=>e.id==t.id?t:e))},clearOrder(){return this.newOrder.confirmation?this.newOrder.has_doubles&&this.newOrder.doubles.some((t=>!t.confirmation))?(this.$alert({type:"warning",title:"Double order confirmation not changed"}),!1):(this.isOrderExists=!1,this.$alert({type:"success",title:"Order Saved Successfully !"}),void this.$store.dispatch("order/addOrder",this.newOrder)):(this.$alert({type:"warning",title:"Order confirmation not changed"}),!1)},updateOrder(){if(this.validateForm(),!this.isFormValid)return!1;this.isLoading=!0,this.newOrder={...this.popupOrder},vs.update(this.newOrder.id,this.newOrder).then((t=>{"SUCCESS"==t.data.code&&(this.showUpdatePopup=!1,this.$alert({type:"success",title:"Order updated"}),this.$store.dispatch("order/setOrder",this.newOrder))})).catch((t=>{this.$handleApiError(t)})).finally((()=>{this.isLoading=!1}))},addOrder(){this.isLoaded=!1,vs.agenteAddOrder().then((t=>{if("ORDER_NOT_CONFIRMED"===t.data.code&&this.$alert({type:"warning",title:"Order was not confirmed"}),"SUCCESS"===t.data.code&&(console.log("order exists..."),t.data.data?.orders)){const e=t.data.data.orders;this.newOrder=e,this.popupOrder={...e},this.$store.dispatch("order/setOrder",this.order),this.isLoaded=!0,this.isOrderExists=!0}"NO_ORDERS"==t.data.code&&(this.isOrderExists=!1)})).catch(this.$handleApiError).finally((()=>{this.isLoaded=!0}))},getOrder(){vs.agenteGetOrder().then((t=>{if("SUCCESS"===t.data.code){const e=t.data.data.orders[0];console.log(e),this.newOrder=e,this.popupOrder={...e},this.$store.dispatch("order/setOrder",this.order),this.isLoaded=!0,this.isOrderExists=!0}"NO_ORDER"===t.data.code&&(this.isLoaded=!0)}),(t=>{this.$handleApiError(t),this.isLoaded=!0}))},getDeliveries(){K.deliveries().then((t=>{console.log(t.data.data),this.$store.dispatch("user/setDeliveries",t.data.data)}),this.$handleApiError)}},async mounted(){this.getOrder(),0==this.deliveries.length&&this.getDeliveries()}};const rW=(0,d.Z)(aW,[["render",TP]]);var lW=rW;const oW=(0,a._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,a._)("div",null,[(0,a._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Confirmed Orders"),(0,a._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"See your confirmed orders")])],-1),nW={key:0},dW={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},cW={class:"mb-5 tw-flex"},wW={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},uW={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},pW={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},mW=(0,a._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Upsell",-1),hW={class:"tw-relative"},gW=(0,a._)("option",{value:"all"},"Select",-1),fW=(0,a._)("option",{value:"oui"},"Oui",-1),vW=(0,a._)("option",{value:"non"},"Non",-1),yW=[gW,fW,vW],_W={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},xW=(0,a._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Confirmation",-1),bW={class:"tw-relative"},kW=["value"],CW={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},DW=(0,a._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Affecté",-1),SW={class:"tw-relative"},zW=(0,a._)("option",{value:"all"},"Select",-1),UW=["value"],LW={key:0},AW={key:1,class:""},PW=(0,a._)("p",{class:"tw-text-neutral-400 tw-py-5"},"Your order's list is empty !",-1),WW=[PW];function EW(t,e,s,r,l,o){const n=(0,a.up)("LoadingAnimation"),d=(0,a.up)("OrdersTable");return(0,a.wg)(),(0,a.iD)("div",null,[oW,l.isLoaded?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",nW,[(0,a.Wm)(n)])),l.isLoaded?((0,a.wg)(),(0,a.iD)("div",dW,[(0,a._)("div",cW,[(0,a.Wm)(G.T,{onClick:e[0]||(e[0]=t=>l.showFilters=!l.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white",size:"xx-large"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,a._)("div",wW,[(0,a.Wm)(Kt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[i.nr,l.search]])])]),(0,a._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":l.showFilters}])},[(0,a._)("div",uW,[(0,a._)("div",pW,[mW,(0,a._)("div",hW,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.upsellFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},yW,512),[[i.bM,l.upsellFilter]]),(0,a.Wm)(J.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-chevron-down")])),_:1})])]),(0,a._)("div",_W,[xW,(0,a._)("div",bW,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[3]||(e[3]=t=>l.confirmationFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.confirmations,(t=>((0,a.wg)(),(0,a.iD)("option",{key:t.id,value:t.value?t.value:"all"},(0,Q.zw)(t.name),9,kW)))),128))],512),[[i.bM,l.confirmationFilter]]),(0,a.Wm)(J.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-chevron-down")])),_:1})])]),(0,a._)("div",CW,[DW,(0,a._)("div",SW,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>l.affectationFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[zW,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.deliveries,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),9,UW)))),128))],512),[[i.bM,l.affectationFilter]]),(0,a.Wm)(J.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-chevron-down")])),_:1})])])])],2),o.confirmedOrders.length>0?((0,a.wg)(),(0,a.iD)("div",LW,[(0,a.Wm)(d,{note:!0,orders:o.filteredOrders},null,8,["orders"])])):((0,a.wg)(),(0,a.iD)("div",AW,WW))])):(0,a.kq)("",!0)])}var $W={components:{OrdersTable:iP},data(){return{localUrl:q,confirmations:Ko,isLoaded:!1,showFilters:!1,confirmationFilter:"all",affectationFilter:"all",upsellFilter:"all",search:""}},computed:{confirmedOrders(){return this.$store.getters["order/orders"]},deliveries(){return this.$store.getters["user/deliveries"]},filteredOrders(){const t=this.confirmationFilter,e=this.affectationFilter,s=this.upsellFilter;return this.confirmedOrders.filter((i=>{if("all"!==t&&i.confirmation!==t)return!1;if("all"!==e&&parseInt(i.affectation)!==parseInt(e))return!1;if("all"!==s&&i.upsell!==s)return!1;const a=((t,e)=>{for(const s in t)if(!["created_at","updated_at","sheets_id","reported_agente_note","reported_agente_note","reported_agente_date","reported_delivery_note","reported_delivery_date"].includes(s)&&String(t[s]).toLowerCase().includes(e.toLowerCase()))return!0;return!1})(i,this.search);return!!a}))}},methods:{getOrders(){vs.agenteConfirmedOrders().then((t=>{if("SUCCESS"==t?.data.code)if("No Order Confirmed Yet !"==t?.data.data)this.orders=[],this.isLoaded=!0;else{const e=t.data.data.orders;this.$store.dispatch("order/setOrders",e),this.isLoaded=!0}})).catch(this.$handleApiError)},async getDeliveries(){await K.deliveries().then((t=>{console.log(t.data.data),this.$store.dispatch("user/setDeliveries",t.data.data)}),this.$handleApiError)}},mounted(){this.$store.dispatch("order/setOrders",[]),this.getDeliveries(),this.getOrders()}};const TW=(0,d.Z)($W,[["render",EW]]);var OW=TW,VW={name:"orders",path:"/orders",component:ii,meta:{module:"order"},children:[{name:"order/list",path:"",component:lP,meta:{module:"order",subModule:"order/list",title:"Orders List",gate:"show_all_orders"}},{name:"order/show",path:"/order",component:lW,meta:{module:"order",subModule:"order/show",title:"Current Order",gate:"show_all_orders"}},{name:"order/confirmed",path:"/orders/confirmed",component:OW,meta:{module:"order",subModule:"order/confirmed",title:"Confirmed Orders",gate:"show_all_orders"}}]};const RW=(0,a._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,a._)("div",null,[(0,a._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Orders")])],-1),qW={key:0},FW={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},IW={key:0,class:"tw-grid tw-grid-cols-12 tw-gap-5"},NW={key:1},jW={class:"tw-min-h-[400px] tw-flex tw-flex-col tw-justify-center tw-items-center"},MW=(0,a._)("p",{class:"tw-font-medium tw-text-neutral-400 tw-text-lg tw-mb-n3"},"No Confirmed orders for now.",-1),HW=["src"];function YW(t,e,s,i,r,l){const o=(0,a.up)("LoadingAnimation"),n=(0,a.up)("OrderCard");return(0,a.wg)(),(0,a.iD)("div",null,[RW,r.isLoaded?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",qW,[(0,a.Wm)(o)])),r.isLoaded?((0,a.wg)(),(0,a.iD)("div",FW,[l.orders.length>0?((0,a.wg)(),(0,a.iD)("div",IW,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.filteredOrders,(t=>((0,a.wg)(),(0,a.iD)("div",{key:t.id,class:"tw-col-span-12 md:tw-col-span-4"},[((0,a.wg)(),(0,a.j4)(n,{order:t,key:t.id},null,8,["order"]))])))),128))])):((0,a.wg)(),(0,a.iD)("div",NW,[(0,a._)("div",jW,[MW,(0,a._)("img",{src:r.localUrl+"images/delivery.jpg",class:"tw-mt-0 tw-mx-auto tw-max-w-[600px] tw-w-full",alt:""},null,8,HW)])]))])):(0,a.kq)("",!0)])}var KW=s(9875),ZW=s(1888),QW=s(1334);const GW={class:"tw-text-sm tw-text-orange-500x tw-bg-orange-500x/10 tw-underline tw-underline-offset-2 tw-px-1 tw-w-fit tw-rounded"},BW={class:"tw-w-full tw-whitespace-normal"},JW=(0,a._)("div",{class:"tw-border-b tw-mb-1 tw-border-dashed"},null,-1),XW={class:"tw-flex tw-items-center"},tE={key:0},eE={key:1},sE={class:"tw-min-w-fit tw-w-[25px] tw-h-[25px] tw-flex tw-items-center tw-justify-center tw-text-md tw-font-bold tw-p-1 tw-rounded tw-text-orange-400 tw-bg-orange-400/10"},iE=(0,a._)("span",{class:"tw-text-sm"},"x",-1),aE={key:0},rE={key:0,class:"tw-px-5 tw-py-2 tw-mt-2 tw-border-neutral-200 tw-border-t tw-border-dashed"},lE=(0,a._)("p",{class:"tw-text-md tw-font-bold tw-text-pink-500"},"NOTE",-1),oE={class:"tw-flex tw-items-center tw-text-gray-500"},nE={class:"tw-flex tw-items-center tw-text-gray-500"};function dE(t,e,s,i,r,l){const o=(0,a.up)("OrderCardDelivery");return(0,a.wg)(),(0,a.j4)(Mi._,{class:(0,Q.C_)(["tw-mx-auto tw-relative tw-border-dashed !tw-shadow-lg !tw-shadow-gray-100/70",[!!s.order.note&&"tw-border-pink-00","livrer"==s.order.delivery&&"tw-border-emerald-400"]]),flat:"",border:""},{default:(0,a.w5)((()=>[(0,a._)("div",{class:(0,Q.C_)(["tw-absolute tw-top-0 tw-right-0 tw-py-1 tw-px-2 tw-rounded-bl tw-text-xs",[l.delivery?.bg,l.delivery?.text]])},(0,Q.zw)(s.order.delivery),3),(0,a.Wm)(KW._,null,{title:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a._)("p",GW,(0,Q.zw)(s.order.city),1),(0,a._)("p",BW,(0,Q.zw)(s.order.adresse),1)]),JW])),_:1}),(0,a.Wm)(ZW.Z,{class:"py-0"},{default:(0,a.w5)((()=>[(0,a.Wm)(ri.o,{align:"center","no-gutters":""},{default:(0,a.w5)((()=>[(0,a.Wm)(li.D,{cols:"12",class:"tw-flex tw-items-center tw-flex-wrap tw-text-gray-500"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{icon:"mdi-account",size:"small",class:"tw-mr-2 tw-text-sm"}),(0,a.Uk)(" "+(0,Q.zw)(s.order.fullname)+" ",1),s.order.note?((0,a.wg)(),(0,a.j4)(J.t,{key:0,icon:"mdi-note-outline",size:"small",class:"tw-ml-2 tw-text-sm !tw-text-pink-500"})):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(li.D,{cols:"12",class:"tw-text-gray-500 tw-space-y-1 tw-mt-2"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.order.items,(t=>((0,a.wg)(),(0,a.iD)("div",{class:"tw-flex tw-items-center tw-gap-3",key:t.id},[(0,a._)("div",XW,[(0,a._)("span",null,[(0,a.Uk)((0,Q.zw)(t.product.name)+" ",1),t.product_variation.size?((0,a.wg)(),(0,a.iD)("span",tE,"| "+(0,Q.zw)(t.product_variation.size),1)):(0,a.kq)("",!0),(0,a.Uk)(),t.product_variation.size?((0,a.wg)(),(0,a.iD)("span",eE,"| "+(0,Q.zw)(t.product_variation.size),1)):(0,a.kq)("",!0)])]),(0,a._)("div",null,[(0,a._)("p",sE,[iE,(0,a.Uk)(" "+(0,Q.zw)(t.quantity),1)])])])))),128))])),_:1}),(0,a.Wm)(li.D,{class:"text-h4 tw-my-3",cols:"12"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Q.zw)(l.getPrice(s.order)),1)])),_:1})])),_:1})])),_:1}),(0,a.kq)("",!0),(0,a.Wm)(zt.Fx,null,{default:(0,a.w5)((()=>[t.expand?((0,a.wg)(),(0,a.iD)("div",aE,[s.order.note?((0,a.wg)(),(0,a.iD)("div",rE,[lE,(0,a._)("p",null,(0,Q.zw)(s.order.note),1)])):(0,a.kq)("",!0),(0,a.Wm)(Qe.i,{class:"bg-transparent tw-space-y-2 !tw-px-5 tw-py-3 tw-border-neutral-200 tw-border-dashed tw-border-t tw-mt-5"},{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a._)("div",oE,[(0,a.Wm)(J.t,{icon:"mdi-phone",class:"mr-2 tw-text-sm"}),(0,a.Uk)(" "+(0,Q.zw)(s.order.phone),1)])]),(0,a._)("div",null,[(0,a._)("div",nE,[(0,a.Wm)(J.t,{icon:"mdi-calendar",class:"mr-2 tw-text-sm"}),(0,a.Uk)(" "+(0,Q.zw)(s.order.created_at?.split("T")[0].split("-").reverse().join(".")),1)])])])),_:1})])):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(Yt.J),(0,a.Wm)(QW.h,{class:"tw-flex tw-justify-end tw-gap-2 tw-flex-wrap"},{default:(0,a.w5)((()=>[(0,a.Wm)(G.T,{class:"tw-capitalize tw-mx-auto tw-bg-orange-500/5 tw-text-orange-500",rounded:"lg",density:"comfortable",icon:"",variant:"flat",onClick:e[0]||(e[0]=e=>t.expand=!t.expand)},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,Q.zw)(t.expand?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})])),_:1}),(0,a.Wm)(ts.C),s.order.phone?((0,a.wg)(),(0,a.j4)(G.T,{key:0,link:"",target:"_blank",href:"https://api.whatsapp.com/send?phone="+s.order.phone.replace("+","").replace("-","").replace(" ",""),class:"tw-capitalize tw-bg-green-500/5 tw-text-green-500 tw-border tw-border-green-500/30",icon:"",rounded:"lg",variant:"flat",density:"comfortable"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,null,{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-whatsapp")])),_:1})])),_:1},8,["href"])):(0,a.kq)("",!0),s.order.phone?((0,a.wg)(),(0,a.j4)(G.T,{key:1,link:"",target:"_blank",href:"tel:"+s.order.phone,class:"tw-capitalize tw-bg-blue-500/5 tw-text-blue-500 tw-border tw-border-blue-500/30",icon:"",rounded:"lg",variant:"flat",density:"comfortable"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,null,{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-phone")])),_:1})])),_:1},8,["href"])):(0,a.kq)("",!0),(0,a.Wm)(G.T,{onClick:e[1]||(e[1]=e=>t.confirmPopup=!0),class:"tw-capitalize tw-bg-emerald-500 tw-text-white tw-border tw-border-emerald-500/30",icon:"",rounded:"lg",variant:"flat",density:"comfortable"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,null,{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-check")])),_:1})])),_:1})])),_:1}),((0,a.wg)(),(0,a.j4)(o,{delivery:s.order.delivery,order:s.order,key:s.order,visible:t.confirmPopup,onCancel:e[2]||(e[2]=e=>t.confirmPopup=!1)},null,8,["delivery","order","visible"]))])),_:1},8,["class"])}const cE={class:"md:tw-w-[80%] tw-overflow-hidden tw-w-[95%] tw-max-w-[550px] tw-mx-auto tw-my-3 tw-min-h-[200px] tw-bg-white tw-rounded-lg tw-shadow-lg"},wE={class:"tw-px-5 tw-pt-5"},uE=(0,a._)("h1",{class:"tw-font-bold tw-text-gray-600"},"Select Status",-1),pE={class:"tw-mt-3 tw-flex tw-gap-3 tw-flex-wrap"},mE=["disabled","onClick"],hE={class:"tw-mt-5 tw-px-5 tw-py-3 tw-bg-gray-50 tw-border-t tw-flex tw-gap-2 tw-justify-end"},gE=(0,a._)("span",{class:"!tw-text-gray-500"},"Cancel",-1),fE=(0,a._)("span",{class:"!tw-text-white"},"Confirm",-1);function vE(t,e,s,i,r,l){const o=(0,a.up)("popup-full"),n=(0,a.up)("OrderReporting");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(o,{onCancel:l.cancel,visible:s.visible},{default:(0,a.w5)((()=>[(0,a._)("div",cE,[(0,a._)("div",wE,[uE,(0,a._)("div",pE,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.deliveryStatus,(e=>((0,a.wg)(),(0,a.iD)("button",{disabled:l.isDisabled(e),onClick:t=>l.handleChange(e),key:e.value,class:(0,Q.C_)([[l.isDisabled(e)&&"tw-saturate-0",e.text,e.bg,e.id==t.delivery&&[e.ring,"tw-ring"]],"tw-px-4 tw-py-2 tw-rounded"])},(0,Q.zw)(e.name),11,mE)))),128))])]),(0,a._)("div",hE,[(0,a.Wm)(G.T,{onClick:l.cancel,class:"!tw-capitalize",color:"grey-lighten-3",flat:""},{default:(0,a.w5)((()=>[gE])),_:1},8,["onClick"]),(0,a.Wm)(G.T,{onClick:l.handleConfirm,loading:t.isLoading,class:"!tw-capitalize",color:"primary-color",flat:""},{default:(0,a.w5)((()=>[fE])),_:1},8,["onClick","loading"])])])])),_:1},8,["onCancel","visible"]),(0,a.Wm)(n,{onOrderReported:l.cancel,order:s.order,visible:t.showPopupReporter,onCancel:e[0]||(e[0]=e=>t.showPopupReporter=!1)},null,8,["onOrderReported","order","visible"])])}const yE={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},_E=(0,a._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Reported Date",-1),xE=(0,a._)("br",null,null,-1),bE=(0,a._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Note",-1),kE={class:"tw-flex tw-justify-end tw-mt-2"};function CE(t,e,s,r,l,o){const n=(0,a.up)("VueDatePicker"),d=(0,a.up)("popup-full");return(0,a.wg)(),(0,a.iD)("div",{key:s.order.id},[(0,a.Wm)(d,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>o.cancel()),visible:s.visible},{default:(0,a.w5)((()=>[(0,a._)("div",yE,[_E,(0,a.Wm)(n,{modelValue:l.date,"onUpdate:modelValue":e[0]||(e[0]=t=>l.date=t),format:o.format},null,8,["modelValue","format"]),xE,bE,(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.note=t),cols:"30",rows:"12",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n        ",512),[[i.nr,l.note]]),(0,a._)("div",kE,[(0,a.Wm)(G.T,{class:"tw-capitalize",loading:l.isLoading,variant:"flat",color:"green",onClick:o.handleConfirm},{default:(0,a.w5)((()=>[(0,a.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var DE={props:["visible","order"],data(){return{isLoading:!1,note:"",date:null,realDate:null,newOrder:null}},methods:{handleConfirm(){if(!this.date)return this.$alert({type:"warning",title:"Please select a date"}),!1;const t={...this.order};t.reported_delivery_date=this.realDate,t.reported_delivery_note=this.note,t.delivery="reporter",this.isLoading=!0,vs.deliveryUpdateDelivery(t.id,"reporter",t).then((e=>{console.log(e.data),this.$alert({type:"success",title:"Order reported successfully"}),this.$emit("orderReported"),this.$store.dispatch("order/update",{id:t.id,order:t}),this.cancel()}),this.$handleApiError).finally((()=>this.isLoading=!1))},format(t){const e=t.getDate(),s=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getMonth()+1,a=i.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),r=t.getFullYear();return this.realDate=`${r}-${a}-${s}`,`${s}/${a}/${r}`},cancel(){this.$emit("cancel")}},mounted(){console.log(this.order)}};const SE=(0,d.Z)(DE,[["render",CE]]);var zE=SE,UE={props:["visible","order"],components:{OrderReporting:zE},data:()=>({status:Qo,disabled:Go,delivery:2,isLoading:!1,note:"",showPopupReporter:!1}),computed:{deliveryStatus(){return this.status.filter((t=>!!t.value))},selected(){return this.status.find((t=>t.id==this.delivery))}},watch:{order:{handler(t){this.delivery=this.getDeliveryId(t.delivery)},deep:!0,immediate:!0}},methods:{cancel(){this.getCurrentStatus(),this.$emit("cancel")},isDisabled(t){return this.disabled.includes(t.value)},handleChange(t){if(this.isDisabled(t))return!1;this.delivery=t.id},handleConfirm(){const t=this.selected;if(t.value===this.order.delivery)return this.cancel(),!1;"reporter"!=t.value&&this.updateOrder().then((()=>{this.cancel()})),"reporter"==t.value&&(this.showPopupReporter=!0)},async updateOrder(){return this.isLoading=!0,vs.deliveryUpdateDelivery(this.order.id,this.selected.value).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateDelivery(this.order.id,this.selected.value),this.isLoading=!1,this.cancel())}),(t=>this.$handleApiError(t))).then((()=>this.$emit("update",this.selected.value)))},updateDelivery(t,e){this.$store.dispatch("order/updateDelivery",{id:t,delivery:e})},getDeliveryId(t){return this.status.find((e=>e.value==t)).id||0},getCurrentStatus(){this.delivery=this.getDeliveryId(this.order.delivery)}},mounted(){this.getCurrentStatus()}};const LE=(0,d.Z)(UE,[["render",vE]]);var AE=LE,PE={components:{OrderCardDelivery:AE},props:["order"],data:()=>({deliveryStatus:Qo,expand:!1,confirmPopup:!1,labels:[{name:"Telephone",field:"phone",icon:"mdi-phone"},{name:"Date",field:"created_at",icon:"mdi-calendar"}]}),computed:{delivery(){return this.getDeliveryStatus(this.order.delivery)}},methods:{getDeliveryStatus(t){return this.deliveryStatus.find((e=>e.value==t))||this.deliveryStatus[0]},getPrice(t){return sw(t)}}};const WE=(0,d.Z)(PE,[["render",dE]]);var EE=WE,$E={components:{OrderCard:EE},data(){return{localUrl:q,deliveryStatus:Qo,isLoaded:!1,showFilters:!1,deliveryFilter:"all",affectationFilter:"all",upsellFilter:"all",search:""}},computed:{orders(){return this.$store.getters["order/orders"].filter((t=>"livrer"!=t.delivery))},filteredOrders(){const t=this.deliveryFilter;return this.orders.filter((e=>{if("all"!==t&&e.delivery!==t)return!1;const s=((t,e)=>{for(const s in t)if(!["created_at","updated_at"].includes(s)&&String(t[s]).toLowerCase().includes(e.toLowerCase()))return!0;return!1})(e,this.search);return!!s}))}},methods:{getOrders(){vs.deliveryOrders().then((t=>{const e=t.data.data.orders;this.$store.dispatch("order/setOrders",e),this.isLoaded=!0}),this.$handleApiError)}},mounted(){this.$store.dispatch("order/setOrders",[]),this.getOrders()}};const TE=(0,d.Z)($E,[["render",YW]]);var OE=TE;const VE=(0,a._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,a._)("div",null,[(0,a._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Delivered Orders"),(0,a._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Delivered orders list")])],-1),RE={key:0},qE={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},FE={class:"mb-5 tw-flex"},IE={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},NE={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},jE={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},ME=(0,a._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Delivery",-1),HE={class:"tw-relative"},YE=["value"],KE={key:0,class:""},ZE={key:1},QE=(0,a._)("p",null,"No orders for now",-1),GE=[QE];function BE(t,e,s,r,l,o){const n=(0,a.up)("LoadingAnimation"),d=(0,a.up)("OrdersTable");return(0,a.wg)(),(0,a.iD)("div",null,[VE,l.isLoaded?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",RE,[(0,a.Wm)(n)])),l.isLoaded?((0,a.wg)(),(0,a.iD)("div",qE,[(0,a._)("div",FE,[(0,a.Wm)(G.T,{onClick:e[0]||(e[0]=t=>l.showFilters=!l.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white",size:"xx-large"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,a._)("div",IE,[(0,a.Wm)(Kt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[i.nr,l.search]])])]),(0,a._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":l.showFilters}])},[(0,a._)("div",NE,[(0,a._)("div",jE,[ME,(0,a._)("div",HE,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.deliveryFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.deliveryStatus,(t=>((0,a.wg)(),(0,a.iD)("option",{key:t.id,value:t.value?t.value:"all"},(0,Q.zw)(t.name),9,YE)))),128))],512),[[i.bM,l.deliveryFilter]]),(0,a.Wm)(J.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-chevron-down")])),_:1})])])])],2),o.orders.length>0?((0,a.wg)(),(0,a.iD)("div",KE,[(0,a.Wm)(d,{orders:o.filteredOrders},null,8,["orders"])])):((0,a.wg)(),(0,a.iD)("div",ZE,GE))])):(0,a.kq)("",!0)])}const JE={class:"tw-relative tw-min-h-[400px] tw-overflow-x-auto tw-overflow-y-visible sm:tw-rounded-lg"},XE={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},t$={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},e$=(0,a._)("th",{scope:"col",class:"tw-p-4"},[(0,a._)("div",{class:"tw-flex tw-items-center"},[(0,a._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,a._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),s$={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},i$={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},a$={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},r$=(0,a._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),l$=["value"],o$={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},n$={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},d$={class:"tw-text-white"};function c$(t,e,s,r,l,o){const n=(0,a.up)("OrderRow");return(0,a.wg)(),(0,a.iD)("div",{key:s.orders.length},[(0,a._)("div",JE,[(0,a._)("table",XE,[(0,a._)("thead",t$,[(0,a._)("tr",null,[e$,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.columns,(t=>((0,a.wg)(),(0,a.iD)("th",{key:t,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,a._)("div",s$,(0,Q.zw)(t),1)])))),128))])]),(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.orders,(t=>((0,a.wg)(),(0,a.j4)(n,{key:t.id,order:t},null,8,["order"])))),128))])])]),(0,a._)("div",i$,[(0,a._)("div",a$,[r$,(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.allowedLimit,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t,key:t},(0,Q.zw)(t),9,l$)))),128))],512),[[i.bM,l.paginationLimit]])]),(0,a._)("div",o$,[(0,a._)("div",n$,(0,Q.zw)(o.prevRange+1)+" - "+(0,Q.zw)(l.currentPage==o.pageCount?s.orders.length:o.nextRange)+" of "+(0,Q.zw)(s.orders.length)+" items ",1),(0,a._)("div",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.pageCount,(t=>((0,a.wg)(),(0,a.j4)(G.T,{onClick:e=>l.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==l.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,a.w5)((()=>[(0,a._)("span",d$,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const w$=(0,a._)("td",{class:"tw-w-4 tw-p-4"},[(0,a._)("div",{class:"tw-flex tw-items-center"},[(0,a._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,a._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),u$={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},p$={class:"tw-px-6 tw-py-4 tw-relative"},m$={key:0},h$={class:"tw-px-6 tw-py-4"},g$={class:"tw-px-6 tw-py-4"},f$={class:"tw-px-6 tw-py-4"},v$={class:"tw-px-6 tw-py-4"},y$={class:"tw-pb-2"},_$={class:"tw-text-orange-500 tw-font-bold tw-pr-1 tw-text-xs"},x$={key:0},b$={key:1},k$={class:"tw-px-6 tw-py-4 tw-relative"},C$={class:"tw-flex tw-items-center tw-justify-center"},D$={class:"tw-flex tw-gap-1"},S$={key:0},z$={class:"tw-px-6 tw-py-4"},U$={class:"tw-px-6 tw-py-4"},L$={class:"tw-px-6 tw-py-4"},A$={class:"tw-max-w-[300px] tw-min-w-[150px] tw-whitespace-normal"},P$={class:"tw-px-6 tw-py-4"};function W$(t,e,s,i,r,l){const o=(0,a.up)("OrderDelivery"),n=(0,a.up)("OrderActions");return(0,a.wg)(),(0,a.iD)("tr",{key:s.order.id,class:(0,Q.C_)([["reporter"==s.order.delivery&&"tw-relative",l.isReportedToday(s.order)&&"!tw-border tw-border-red-400"],"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"])},[w$,(0,a._)("th",u$,(0,Q.zw)(s.order.id),1),(0,a._)("td",p$,[(0,a.Uk)((0,Q.zw)(s.order?.created_at?.split("T")[0])+" ",1),"reporter"==s.order.delivery?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,Q.C_)([l.isReportedToday(s.order)&&"!tw-bg-red-400","tw-text-xs tw-text-white tw-px-1 tw-rounded-t tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-absolute tw-bg-gray-500"])},[l.isReportedToday(s.order)?((0,a.wg)(),(0,a.iD)("span",m$," Reported for today ")):(0,a.kq)("",!0)],2)):(0,a.kq)("",!0)]),(0,a._)("td",h$,(0,Q.zw)(s.order.fullname),1),(0,a._)("td",g$,(0,Q.zw)(s.order.adresse),1),(0,a._)("td",f$,(0,Q.zw)(s.order.phone),1),(0,a._)("td",v$,[(0,a._)("div",y$,[(0,a._)("ul",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.order.items,(t=>((0,a.wg)(),(0,a.iD)("li",{key:t.id,class:"tw-font-bold"},[(0,a.Uk)(" - "),(0,a._)("span",_$,(0,Q.zw)(t.quantity)+" X ",1),(0,a.Uk)((0,Q.zw)(t.product.name)+" ",1),t.product_variation.size?((0,a.wg)(),(0,a.iD)("span",x$,"| "+(0,Q.zw)(t.product_variation.size),1)):(0,a.kq)("",!0),t.product_variation.color?((0,a.wg)(),(0,a.iD)("span",b$,"| "+(0,Q.zw)(t.product_variation.color),1)):(0,a.kq)("",!0)])))),128))])])]),(0,a._)("td",k$,[(0,a._)("div",C$,[((0,a.wg)(),(0,a.j4)(o,{class:(0,Q.C_)("reporter"==s.order.delivery&&"tw-mb-1"),order:s.order,id:s.order.id,key:s.order.delivery,delivery:s.order.delivery},null,8,["class","order","id","delivery"])),"reporter"==s.order.delivery?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,Q.C_)([l.isReportedToday(s.order)&&"!tw-bg-red-400","tw-text-xs tw-text-white tw-px-1 tw-rounded-t tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-absolute tw-bg-gray-500"])},[(0,a._)("span",D$,["reporter"==s.order.delivery?((0,a.wg)(),(0,a.iD)("span",S$,[(0,a.Wm)(J.t,{size:"x-small"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-autorenew")])),_:1}),(0,a._)("span",null,(0,Q.zw)(s.order?.reported_delivery_date?.split("T")[0]),1)])):(0,a.kq)("",!0)])],2)):(0,a.kq)("",!0)])]),(0,a._)("td",z$,(0,Q.zw)(l.getPrice(s.order)),1),(0,a._)("td",U$,(0,Q.zw)(s.order.city),1),(0,a._)("td",L$,[(0,a._)("div",A$,(0,Q.zw)(s.order.note),1)]),(0,a._)("td",P$,[((0,a.wg)(),(0,a.j4)(n,{key:s.order.id,order:s.order},null,8,["order"]))])],2)}const E$={key:0,class:"focus:tw-ring-4 tw-min-w-fit focus:tw-outline-none tw-font-medium tw-rounded-lg tw-text-sm tw-px-2 tw-py-1 tw-text-center tw-inline-flex tw-items-center tw-justify-between tw-bg-green-500/10 tw-text-green-500"},$$={key:1},T$={class:"tw-py-2 tw-space-y-1 tw-text-sm tw-text-gray-700 tw-max-h-[250px] tw-overflow-y-auto"},O$=["onClick"];function V$(t,e,s,i,r,l){const o=(0,a.up)("OrderReporting");return(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",{key:s.delivery,class:"tw-relative tw-min-w-[100px]"},["livrer"==s.delivery?((0,a.wg)(),(0,a.iD)("div",E$,(0,Q.zw)(l.selected.name),1)):(0,a.kq)("",!0),"livrer"!=s.delivery?((0,a.wg)(),(0,a.iD)("div",$$,[(0,a._)("button",{onClick:e[0]||(e[0]=(...t)=>l.toggle&&l.toggle(...t)),class:(0,Q.C_)([[l.selected.text,l.selected.bg,l.selected.ring],"focus:tw-ring-4 tw-min-w-[100px] focus:tw-outline-none tw-font-medium tw-rounded-lg tw-text-sm tw-px-2 tw-py-1 tw-text-center tw-inline-flex tw-items-center tw-justify-between"]),type:"button"},[(0,a.Uk)((0,Q.zw)(l.selected.name)+" ",1),r.isLoading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(J.t,{key:0,class:"tw-ml-1"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Q.zw)(r.isOpen?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})),r.isLoading?((0,a.wg)(),(0,a.j4)(J.t,{key:1,class:"tw-animate-spin tw-ml-1"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-loading")])),_:1})):(0,a.kq)("",!0)],2),(0,a._)("div",{class:(0,Q.C_)([{"tw-hidden":!r.isOpen},"tw-z-[20] tw-bg-white tw-absolute tw-top-full tw-left-0 tw-divide-y tw-divide-gray-100 tw-rounded-lg tw-shadow tw-w-44"])},[(0,a._)("ul",T$,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.options,(t=>((0,a.wg)(),(0,a.iD)("li",{onClick:e=>!r.disabled.includes(t.value)&&l.handleChange(t),key:t.id},[(0,a._)("a",{class:(0,Q.C_)(["tw-block tw-px-4 tw-py-2",[r.disabled.includes(t.value)?"tw-text-neutral-400/80 tw-bg-neutral-400/10":[t.text,t.bg]]])},(0,Q.zw)(t.name),3)],8,O$)))),128))])],2),(0,a.Wm)(o,{order:s.order,visible:r.showPopupReporter,onCancel:e[1]||(e[1]=t=>r.showPopupReporter=!1)},null,8,["order","visible"])])):(0,a.kq)("",!0)])),[[Zt.L,l.close]])}var R$={props:["delivery","id","order"],components:{OrderReporting:zE},data(){return{isLoading:!1,isOpen:!1,showPopup:!1,nextOption:null,note:"",selectedId:0,allOptions:Qo,disabled:Go,showPopupReporter:!1}},computed:{options(){return this.allOptions.filter((t=>t.id!==this.selectedId))},selected(){return this.allOptions.filter((t=>t.id==this.selectedId))[0]},availableOptions(){return this.allOptions.map((t=>t.value))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleChange(t){if(t.id===this.selectedId)return!1;"reporter"!=t.value&&(this.selectedId=t.id,this.updateOrder(),this.close()),"reporter"==t.value&&(this.showPopupReporter=!0)},async updateOrder(){return this.isLoading=!0,vs.deliveryUpdateDelivery(this.id,this.selected.value).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateDelivery(this.id,this.selected.value),this.isLoading=!1)}),(t=>this.$handleApiError(t))).then((()=>this.$emit("update",this.selected.value)))},updateDelivery(t,e){this.$store.dispatch("order/updateDelivery",{id:t,delivery:e})}},mounted(){this.availableOptions.includes(this.delivery)?this.selectedId=this.allOptions.find((t=>t.value==this.delivery)).id:this.selectedId=0}};const q$=(0,d.Z)(R$,[["render",V$]]);var F$=q$;const I$={key:0};function N$(t,e,s,i,r,l){return r.newOrder?((0,a.wg)(),(0,a.iD)("div",I$,[(0,a.Wm)(G.T,{link:"",target:"_blank",href:"https://api.whatsapp.com/send?phone="+s.order.phone.replace("+","").replace("-","").replace(" ",""),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-whatsapp")])),_:1})])),_:1},8,["href"])])):(0,a.kq)("",!0)}var j$={props:["order"],name:"orderActions",data(){return{newOrder:null}},computed:{},methods:{},mounted(){this.newOrder={...this.order}}};const M$=(0,d.Z)(j$,[["render",N$]]);var H$=M$,Y$={props:["order","showNote"],components:{OrderDelivery:F$,OrderActions:H$},data(){return{showPopup:!1,isLoading:!1,todayDate:null}},methods:{handleClick(){this.showPopup=!0},isReportedToday(t){return"reporter"==t.delivery&&t.reported_delivery_date==this.todayDate},getPrice(t){return sw(t)}},mounted(){const t=new Date,e=t.getDate(),s=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getMonth()+1,a=i.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),r=t.getFullYear();this.todayDate=`${r}-${a}-${s}`}};const K$=(0,d.Z)(Y$,[["render",W$]]);var Z$=K$,Q$={props:["orders"],components:{OrderRow:Z$},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10,todayDate:null,columns:["#","Date","Client","Address","Phone","Product","Delivery","Price","City","Note","Actions"]}},computed:{deliveries(){return this.$store.getters["user/deliveries"]},prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.orders.length/this.paginationLimit)},items(){const t=[...this.reportedForToday,...this.orders.filter((t=>!this.isReportedToday(t)))];return t.slice(this.prevRange,this.nextRange)},reportedForToday(){return this.orders.filter(this.isReportedToday)}},methods:{isReportedToday(t){return"reporter"==t.confirmation&&t.reported_agente_date==this.todayDate}},mounted(){const t=new Date,e=t.getDate(),s=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getMonth()+1,a=i.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),r=t.getFullYear();this.todayDate=`${r}-${a}-${s}`}};const G$=(0,d.Z)(Q$,[["render",c$]]);var B$=G$,J$={components:{OrdersTable:B$},data(){return{localUrl:q,deliveryStatus:Qo,isLoaded:!1,showFilters:!1,deliveryFilter:"all",affectationFilter:"all",upsellFilter:"all",search:""}},computed:{orders(){return this.$store.getters["order/orders"]},filteredOrders(){const t=this.deliveryFilter;return this.orders.filter((e=>{if("all"!==t&&e.delivery!==t)return!1;const s=((t,e)=>{for(const s in t)if(!["created_at","updated_at"].includes(s)&&String(t[s]).toLowerCase().includes(e.toLowerCase()))return!0;return!1})(e,this.search);return!!s}))}},methods:{getOrders(){vs.deliveryDeliveredOrders().then((t=>{const e=t.data.data.orders;this.$store.dispatch("order/setOrders",e),this.isLoaded=!0}),this.$handleApiError)}},mounted(){this.$store.dispatch("order/setOrders",[]),this.getOrders()}};const X$=(0,d.Z)(J$,[["render",BE]]);var tT=X$,eT={name:"deliveries",path:"/deliveries",component:ii,meta:{module:"delivery"},children:[{name:"delivery/list",path:"",component:OE,meta:{module:"delivery",subModule:"delivery/list",title:"Orders List",gate:"all"}},{name:"delivery/delivered",path:"/delivered",component:tT,meta:{module:"delivery",subModule:"delivery/delivered",title:"Delivered Orders List",gate:"all"}}]};const sT=(0,a._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,a._)("div",null,[(0,a._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Inventory State List "),(0,a._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"See your inventory state")])],-1),iT={key:0},aT={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},rT={class:"mb-5 tw-flex"},lT={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},oT={key:0,class:""};function nT(t,e,s,r,l,o){const n=(0,a.up)("LoadingAnimation"),d=(0,a.up)("InventoryStateTable");return(0,a.wg)(),(0,a.iD)("div",null,[sT,l.isLoaded?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",iT,[(0,a.Wm)(n)])),l.isLoaded?((0,a.wg)(),(0,a.iD)("div",aT,[(0,a._)("div",rT,[(0,a.Wm)(G.T,{icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white !tw-w-0 !tw-overflow-hidden"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white",size:"xx-large"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,a._)("div",lT,[(0,a.Wm)(Kt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-w-full tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[i.nr,l.search]])])]),o.inventoryState.length>0?((0,a.wg)(),(0,a.iD)("div",oT,[(0,a.Wm)(d,{columns:l.columns,states:o.filteredInventoryState},null,8,["columns","states"])])):(0,a.kq)("",!0)])):(0,a.kq)("",!0)])}class dT{async inventoryStates(){return await H.getCookie(),j.get("api/inventorystates")}async inventoryMovements(){return await H.getCookie(),j.get("api/inventorymovements")}async getMovement(t){return await H.getCookie(),j.get("api/inventorymovements/"+t)}async inventoryMovementCreate({product_id:t,delivery_id:e,variants:s}){return await H.getCookie(),j.post("api/inventorymovements/new",{product_id:t,delivery_id:e,variations:s})}async inventoryMovementUpdate(t,{product_id:e,delivery_id:s,variants:i,quantity:a}){return await H.getCookie(),j.post("api/inventorymovements/update/"+t,{product_id:e,delivery_id:s,variants:i,quantity:a})}async deliveryUpdateMovement(t,e,s){return await H.getCookie(),j.post("api/delivery/inventorymovements/update/"+t,{is_received:e,note:s})}async delete(t){return await H.getCookie(),j["delete"]("api/inventorymovements/delete/"+t)}}var cT=new dT;const wT={class:"tw-relative tw-min-h-[400px] tw-overflow-x-auto tw-overflow-y-visible sm:tw-rounded-lg"},uT={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},pT={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},mT=(0,a._)("th",{scope:"col",class:"tw-p-4"},[(0,a._)("div",{class:"tw-flex tw-items-center"},[(0,a._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,a._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),hT={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},gT=(0,a._)("td",{class:"tw-w-4 tw-p-4"},[(0,a._)("div",{class:"tw-flex tw-items-center"},[(0,a._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,a._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),fT={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},vT={class:"tw-px-6 tw-py-4 tw-underline tw-underline-offset-1 tw-font-medium"},yT={class:"tw-px-6 tw-py-4"},_T={class:"tw-px-6 tw-py-4"},xT={class:"tw-px-6 tw-py-4 tw-font-bold tw-text-green-500"},bT={class:"tw-px-6 tw-py-4"},kT={class:"tw-px-6 tw-py-4"},CT=(0,a._)("br",null,null,-1),DT={class:"tw-px-6 tw-py-4"},ST={class:"mt-5 tw-flex tw-justify-between"},zT={class:"d-flex align-center"},UT=(0,a._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700"},"Show per page: ",-1),LT={class:"d-flex align-center"},AT={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},PT={class:"tw-text-white"};function WT(t,e,s,i,r,l){const o=(0,a.up)("router-link"),n=(0,a.up)("InventoryStateActions");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",wT,[(0,a._)("table",uT,[(0,a._)("thead",pT,[(0,a._)("tr",null,[mT,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.columns,(t=>((0,a.wg)(),(0,a.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,a._)("div",hT,(0,Q.zw)(t.name),1)])))),128))])]),(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.items,((t,e)=>((0,a.wg)(),(0,a.iD)("tr",{key:e,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[gT,(0,a._)("th",fT,(0,Q.zw)(t.id),1),(0,a._)("td",vT,[(0,a.Wm)(o,{to:"products/"+t.id},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Q.zw)(t.name),1)])),_:2},1032,["to"])]),(0,a._)("td",yT,(0,Q.zw)(t.buying_price)+" DH ",1),(0,a._)("td",_T,(0,Q.zw)(t.selling_price)+" DH ",1),(0,a._)("td",xT,(0,Q.zw)(l.availableQuantity(t)),1),(0,a._)("td",bT,(0,Q.zw)(t.total_quantity),1),(0,a._)("td",kT,[(0,a.Uk)((0,Q.zw)(t.updated_at?.split("T")[0])+" ",1),CT,(0,a.Uk)(" "+(0,Q.zw)(t.updated_at?.split("T")[1].split(".")[0]),1)]),(0,a._)("td",DT,[(0,a.Wm)(n,{state:t},null,8,["state"])])])))),128))])])]),(0,a._)("div",ST,[(0,a._)("div",zT,[UT,(0,a.Wm)(hu.r,{"hide-details":!0,modelValue:r.paginationLimit,"onUpdate:modelValue":e[0]||(e[0]=t=>r.paginationLimit=t),items:r.allowedLimit,variant:"outlined",density:"compact",color:"primary-color"},null,8,["modelValue","items"])]),(0,a._)("div",LT,[(0,a._)("div",AT,(0,Q.zw)(l.prevRange+1)+" - "+(0,Q.zw)(r.currentPage==l.pageCount?s.states.length:l.nextRange)+" of "+(0,Q.zw)(s.states.length)+" items ",1),(0,a._)("div",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.pageCount,(t=>((0,a.wg)(),(0,a.j4)(G.T,{onClick:e=>r.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==r.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,a.w5)((()=>[(0,a._)("span",PT,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}function ET(t,e,s,i,r,l){const o=(0,a.up)("InventoryStateDetails"),n=(0,a.up)("popup-full");return(0,a.wg)(),(0,a.iD)("div",{key:s.state.id,class:"tw-flex tw-items-center"},[(0,a.Wm)(G.T,{onClick:e[0]||(e[0]=t=>r.detailsPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"blue",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-eye-outline")])),_:1})])),_:1}),(0,a.Wm)(n,{visible:r.detailsPopup,onCancel:e[2]||(e[2]=t=>r.detailsPopup=!1)},{default:(0,a.w5)((()=>[r.detailsPopup?((0,a.wg)(),(0,a.j4)(o,{key:0,onCancel:e[1]||(e[1]=t=>r.detailsPopup=!1),state:s.state},null,8,["state"])):(0,a.kq)("",!0)])),_:1},8,["visible"])])}const $T={class:"md:tw-w-[50%] tw-relative tw-max-h-full tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},TT={class:"tw-p-5"},OT={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500 tw-rounded-md tw-overflow-hidden"},VT=(0,a._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},[(0,a._)("tr",null,[(0,a._)("th",{scope:"col",class:"tw-px-4 tw-max-w-[50px] tw-py-3 text-truncate"}," ID "),(0,a._)("th",{scope:"col",class:"tw-px-6 tw-py-3 text-truncate"}," SIZE "),(0,a._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," COLOR "),(0,a._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," QUANTITY ")])],-1),RT={class:"tw-w-4 tw-p-4"},qT={class:"tw-w-4 tw-p-4"},FT={class:"tw-w-4 tw-p-4"},IT={class:"tw-w-4 tw-p-4"},NT={class:"tw-flex tw-items-center tw-gap-1"},jT={class:"tw-text-green-500"},MT={key:0},HT={class:"tw-text-red-400"},YT=(0,a.uE)('<div class="tw-flex tw-gap-3 mt-5"><div class="tw-flex tw-items-center tw-gap-1 tw-text-xs"><div class="tw-w-[10px] tw-h-[10px] tw-rounded-full tw-bg-green-500"></div><span>Available</span></div><div class="tw-flex tw-items-center tw-gap-1 tw-text-xs"><div class="tw-w-[10px] tw-h-[10px] tw-rounded-full tw-bg-neutral-700"></div><span>Initial</span></div><div class="tw-flex tw-items-center tw-gap-1 tw-text-xs"><div class="tw-w-[10px] tw-h-[10px] tw-rounded-full tw-bg-red-400"></div><span>Not Received</span></div></div>',1);function KT(t,e,s,i,r,l){return(0,a.wg)(),(0,a.iD)("div",$T,[(0,a.Wm)(G.T,{onClick:l.cancel,icon:"mdi-close",variant:"flat",size:"w-small",color:"red",class:"tw-absolute tw-top-3 tw-z-10 tw-right-3"},null,8,["onClick"]),(0,a._)("div",TT,[(0,a._)("table",OT,[VT,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.state.variations,(t=>((0,a.wg)(),(0,a.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,a._)("td",RT,(0,Q.zw)(t.id),1),(0,a._)("td",qT,(0,Q.zw)(t.size),1),(0,a._)("td",FT,(0,Q.zw)(t.color),1),(0,a._)("td",IT,[(0,a._)("div",NT,[(0,a._)("span",jT,(0,Q.zw)(t.available_quantity),1),(0,a._)("span",null,"/ "+(0,Q.zw)(t.quantity),1),t.on_hold>0?((0,a.wg)(),(0,a.iD)("span",MT,[(0,a.Uk)(" / "),(0,a._)("span",HT,(0,Q.zw)(t.on_hold),1)])):(0,a.kq)("",!0)])])])))),128))])]),YT])])}var ZT={props:["state"],data(){return{}},computed:{},methods:{cancel(){this.$emit("cancel")}},mounted(){console.log(this.state)}};const QT=(0,d.Z)(ZT,[["render",KT]]);var GT=QT,BT={props:["rowIndex","state"],components:{InventoryStateDetails:GT},name:"inventoryStateActions",data(){return{showPopup:!1,confirmPopup:!1,detailsPopup:!1,isConfirmed:!1,note:"",isLoading:!1}},computed:{user(){return this.$store.getters["user/user"]}},methods:{},mounted(){}};const JT=(0,d.Z)(BT,[["render",ET]]);var XT=JT,tO={props:["columns","states"],components:{InventoryStateActions:XT},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.states.length/this.paginationLimit)},items(){return this.states.slice(this.prevRange,this.nextRange)}},methods:{availableQuantity(t){let e=0;return t.variations.forEach((t=>{e+=t.available_quantity})),e}}};const eO=(0,d.Z)(tO,[["render",WT]]);var sO=eO,iO={components:{InventoryStateTable:sO},data(){return{localUrl:q,isLoaded:!1,showFilters:!1,search:"",columns:[{prop:"id",name:"#"},{prop:"product_name",name:"Product Name"},{prop:"buying_price",name:"Buying Price"},{prop:"selling_price",name:"Selling Price"},{prop:"available",name:"Available"},{prop:"quantity",name:"Quantity"},{prop:"updated_at",name:"Updated At"},{prop:"actions",name:"Actions"}]}},computed:{inventoryState(){return this.$store.getters["inventory/inventoryState"]},filteredInventoryState(){return this.inventoryState.filter((t=>!!(t.ref.toLowerCase().includes(this.search.toLowerCase())||t.name.toLowerCase().includes(this.search.toLowerCase())||t.description.toLowerCase().includes(this.search.toLowerCase()))))}},methods:{async getInventoryStates(){await cT.inventoryStates().then((t=>{if(console.log(t.data.data),"SHOW_ALL_INVENTORY_STATES"==t.data.code){const e=t.data.data;this.$store.dispatch("inventory/setInventoryState",e)}}),this.$handleApiError).finally((()=>{this.isLoaded=!0}))}},async mounted(){this.getInventoryStates()}};const aO=(0,d.Z)(iO,[["render",nT]]);var rO=aO;const lO=(0,a._)("div",{class:"mb-5"},[(0,a._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Add Inventory Movement"),(0,a._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Create New Movement")],-1),oO={key:0},nO={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},dO={class:"tw-w-full"},cO=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Delivery",-1),wO={class:"tw-relative"},uO=["disabled"],pO=["value"],mO={class:"tw-w-full"},hO=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Product Name",-1),gO={class:"tw-relative"},fO=["disabled"],vO=["value"],yO={class:"tw-w-full"},_O=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Variation",-1),xO={class:"tw-relative"},bO=["value"],kO={class:"tw-w-full"},CO=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),DO={class:"tw-w-full tw-h-full tw-flex tw-items-end"},SO=(0,a._)("span",{class:"text-white text-capitalize"},"Add",-1),zO={class:"tw-max-w-full"},UO={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},LO=(0,a._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},[(0,a._)("tr",null,[(0,a._)("th",{scope:"col",class:"tw-px-4 tw-max-w-[50px] tw-py-3 text-truncate"}," ID "),(0,a._)("th",{scope:"col",class:"tw-px-6 tw-py-3 text-truncate"}," SIZE "),(0,a._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," COLOR "),(0,a._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," QUANTITY "),(0,a._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate tw-max-w-[50px]"}," ACTIONS ")])],-1),AO={class:"tw-w-4 tw-p-4"},PO={class:"tw-w-4 tw-p-4"},WO={class:"tw-w-4 tw-p-4"},EO={class:"tw-w-4 tw-p-4"},$O={class:"tw-w-4 tw-p-4"},TO={class:"tw-w-fit tw-h-full tw-flex tw-items-end"},OO={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},VO=(0,a._)("span",{class:"text-white text-capitalize"},"Cancel",-1),RO=(0,a._)("span",{class:"text-white text-capitalize"},"Create",-1);function qO(t,e,s,r,l,o){const n=(0,a.up)("LoadingAnimation");return(0,a.wg)(),(0,a.iD)("div",null,[lO,l.isLoaded?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",oO,[(0,a.Wm)(n)])),l.isLoaded?((0,a.wg)(),(0,a.iD)("div",nO,[(0,a._)("div",null,[(0,a.Wm)(ri.o,null,{default:(0,a.w5)((()=>[(0,a.Wm)(li.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,a.w5)((()=>[(0,a._)("div",dO,[cO,(0,a._)("div",wO,[(0,a.wy)((0,a._)("select",{disabled:l.selectedVariations.length,"onUpdate:modelValue":e[0]||(e[0]=t=>l.delivery=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-capitalize tw-rounded-lg tw-border tw-border-solid tw-cursor-pointer tw-border-neutral-400 focus:tw-border-orange-500"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.deliveries,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.firstname+" "+t.lastname),9,pO)))),128))],8,uO),[[i.bM,l.delivery]]),(0,a.Wm)(J.t,{size:"small",class:"tw-absolute tw-right-3 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-chevron-down")])),_:1})])])])),_:1}),(0,a.Wm)(li.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,a.w5)((()=>[(0,a._)("div",mO,[hO,(0,a._)("div",gO,[(0,a.wy)((0,a._)("select",{disabled:l.selectedVariations.length>0,"onUpdate:modelValue":e[1]||(e[1]=t=>l.product=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-cursor-pointer tw-border-neutral-400 focus:tw-border-orange-500"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.products,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,vO)))),128))],8,fO),[[i.bM,l.product]]),(0,a.Wm)(J.t,{size:"small",class:"tw-absolute tw-right-3 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-chevron-down")])),_:1})])])])),_:1}),(0,a.Wm)(li.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,a.w5)((()=>[(0,a._)("div",yO,[_O,(0,a._)("div",xO,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.variation=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-cursor-pointer tw-border-neutral-400 focus:tw-border-orange-500"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.variations,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.color+" - "+t.size+"  ("+t.available_quantity+" items)"),9,bO)))),128))],512),[[i.bM,l.variation]]),(0,a.Wm)(J.t,{size:"small",class:"tw-absolute tw-right-3 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-chevron-down")])),_:1})])])])),_:1}),(0,a.Wm)(li.D,{class:"!tw-py-2",cols:"12",sm:"4",md:"4"},{default:(0,a.w5)((()=>[(0,a._)("div",kO,[CO,(0,a._)("div",null,[(0,a.Wm)(X.hw,{type:"number",onChange:o.handleQuantityChange,"hide-details":!0,modelValue:l.quantity,"onUpdate:modelValue":e[3]||(e[3]=t=>l.quantity=t),"clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","modelValue"])])])])),_:1}),(0,a.Wm)(li.D,{class:"!tw-py-2",cols:"12",sm:"2",md:"2"},{default:(0,a.w5)((()=>[(0,a._)("div",DO,[(0,a.Wm)(G.T,{onClick:o.addVariation,color:"primary-color",variant:"flat",size:"large"},{default:(0,a.w5)((()=>[SO])),_:1},8,["onClick"])])])),_:1}),(0,a.Wm)(li.D,{cols:"12"},{default:(0,a.w5)((()=>[(0,a._)("div",zO,[(0,a._)("table",UO,[LO,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.selectedVariations,(t=>((0,a.wg)(),(0,a.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,a._)("td",AO,(0,Q.zw)(t.id),1),(0,a._)("td",PO,(0,Q.zw)(t.size),1),(0,a._)("td",WO,(0,Q.zw)(t.color),1),(0,a._)("td",EO,(0,Q.zw)(t.quantity),1),(0,a._)("td",$O,[(0,a._)("div",TO,[(0,a.Wm)(G.T,{onClick:e=>o.deleteVariation(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])])))),128))])])])])),_:1})])),_:1})]),(0,a._)("div",OO,[(0,a.Wm)(G.T,{color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,a.w5)((()=>[VO])),_:1}),(0,a.Wm)(G.T,{onClick:o.create,loading:l.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,a.w5)((()=>[RO])),_:1},8,["onClick","loading"])])])):(0,a.kq)("",!0)])}var FO={data(){return{isLoading:!1,isLoaded:!1,variationId:0,product:1,delivery:1,quantity:0,variation:0,selectedVariations:[]}},computed:{products(){return this.$store.getters["product/products"]},deliveries(){return this.$store.getters["user/deliveries"]},variations(){return this.products.find((t=>t.id==this.product))?.variations.filter((t=>{let e=!0;return this.selectedVariations.forEach((s=>{t.id==s.id&&(e=!1)})),e}))}},watch:{product(){this.variations.length>0?this.variation=this.variations[0].id:this.variation=null}},methods:{addVariation(){if(0==this.variations.length)return!1;const t=this.variations.find((t=>t.id==this.variation));if(!t)return!1;if(this.quantity>t.available_quantity||0==this.quantity)return this.$alert({type:"warning",title:"Quantity should be between 1 and "+t.available_quantity}),!1;const e={id:t.id,size:t.size,color:t.color,quantity:this.quantity};this.quantity=0,this.selectedVariations.push(e),this.variations.length>0?this.variation=this.variations[0].id:this.variation=null},deleteVariation(t){this.selectedVariations=this.selectedVariations.filter((e=>e.id!==t)),1==this.variations.length&&(this.variation=this.variations[0].id)},create(){if(0==this.selectedVariations.length)return this.$alert({type:"warning",title:"You need to add some variations"}),!1;let t=0;this.selectedVariations.forEach((e=>t+=e.quantity)),this.isLoading=!0,cT.inventoryMovementCreate({product_id:this.product,delivery_id:this.delivery,variants:this.selectedVariations,quantity:this.qty}).then((t=>{"SUCCESS"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.selectedVariations=[],this.getData()),"ERROR_QUANTITY"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).finally((()=>this.isLoading=!1))},handleQuantityChange(){this.quantity<=0&&(this.quantity=0)},async getDeliveries(){await K.deliveries().then((t=>{const e=t.data.data;this.$store.dispatch("user/setDeliveries",e),e.length>0?this.delivery=e[0].id:this.delivery=null}),this.$handleApiError)},getProducts(){return cT.inventoryStates().then((t=>{if("SHOW_ALL_INVENTORY_STATES"==t.data.code){const e=t.data.data;if(this.$store.dispatch("product/setProducts",e),e.length>0){const t=e[0];this.product=t.id,this.variations.length>0&&(this.variation=this.variations[0].id)}else this.product=null}}),(t=>{this.$handleApiError(t)}))},getData(){this.isLoaded=!1,Promise.allSettled([this.getProducts(),this.getDeliveries()]).then((()=>{this.isLoaded=!0}))}},mounted(){this.getData()}};const IO=(0,d.Z)(FO,[["render",qO]]);var NO=IO;const jO=(0,a._)("div",{class:"mb-5"},[(0,a._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Update Inventory Movement"),(0,a._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Edit an existing Movement")],-1),MO={key:0},HO={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},YO={class:"tw-w-full"},KO=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Delivery",-1),ZO={class:"tw-relative"},QO=["value"],GO={class:"tw-w-full"},BO=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Variation",-1),JO={class:"tw-relative"},XO=["value"],tV={class:"tw-w-full"},eV=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),sV={class:"tw-w-full tw-h-full tw-flex tw-items-end"},iV=(0,a._)("span",{class:"text-white text-capitalize"},"Add",-1),aV={class:"tw-max-w-full"},rV={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},lV=(0,a._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},[(0,a._)("tr",null,[(0,a._)("th",{scope:"col",class:"tw-px-4 tw-max-w-[50px] tw-py-3 text-truncate"}," ID "),(0,a._)("th",{scope:"col",class:"tw-px-6 tw-py-3 text-truncate"}," SIZE "),(0,a._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," COLOR "),(0,a._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," QUANTITY "),(0,a._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate tw-max-w-[50px]"}," ACTIONS ")])],-1),oV={class:"tw-w-4 tw-p-4"},nV={class:"tw-w-4 tw-p-4"},dV={class:"tw-w-4 tw-p-4"},cV={class:"tw-w-4 tw-p-4"},wV={class:"tw-w-4 tw-p-4"},uV={class:"tw-w-fit tw-h-full tw-flex tw-items-end"},pV={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},mV=(0,a._)("span",{class:"text-white text-capitalize"},"Cancel",-1),hV=(0,a._)("span",{class:"text-white text-capitalize"},"Update",-1);function gV(t,e,s,r,l,o){const n=(0,a.up)("LoadingAnimation");return(0,a.wg)(),(0,a.iD)("div",null,[jO,l.isLoaded?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",MO,[(0,a.Wm)(n)])),l.isLoaded?((0,a.wg)(),(0,a.iD)("div",HO,[(0,a._)("div",null,[(0,a.Wm)(ri.o,null,{default:(0,a.w5)((()=>[(0,a.Wm)(li.D,{class:"!tw-py-2",cols:"12"},{default:(0,a.w5)((()=>[(0,a._)("div",YO,[KO,(0,a._)("div",ZO,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.delivery=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-capitalize tw-rounded-lg tw-border tw-border-solid tw-cursor-pointer tw-border-neutral-400 focus:tw-border-orange-500"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.deliveries,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.firstname+" "+t.lastname),9,QO)))),128))],512),[[i.bM,l.delivery]]),(0,a.Wm)(J.t,{size:"small",class:"tw-absolute tw-right-3 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-chevron-down")])),_:1})])])])),_:1}),(0,a.Wm)(li.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,a.w5)((()=>[(0,a._)("div",GO,[BO,(0,a._)("div",JO,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.variation=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-cursor-pointer tw-border-neutral-400 focus:tw-border-orange-500"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.variations,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.color+" / "+t.size+" / "+t.quantity),9,XO)))),128))],512),[[i.bM,l.variation]]),(0,a.Wm)(J.t,{size:"small",class:"tw-absolute tw-right-3 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-chevron-down")])),_:1})])])])),_:1}),(0,a.Wm)(li.D,{class:"!tw-py-2",cols:"12",sm:"4",md:"4"},{default:(0,a.w5)((()=>[(0,a._)("div",tV,[eV,(0,a._)("div",null,[(0,a.Wm)(X.hw,{type:"number",onChange:o.handleQuantityChange,"hide-details":!0,modelValue:l.quantity,"onUpdate:modelValue":e[2]||(e[2]=t=>l.quantity=t),"clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","modelValue"])])])])),_:1}),(0,a.Wm)(li.D,{class:"!tw-py-2",cols:"12",sm:"2",md:"2"},{default:(0,a.w5)((()=>[(0,a._)("div",sV,[(0,a.Wm)(G.T,{onClick:o.addVariation,color:"primary-color",variant:"flat",size:"large"},{default:(0,a.w5)((()=>[iV])),_:1},8,["onClick"])])])),_:1}),(0,a.Wm)(li.D,{cols:"12"},{default:(0,a.w5)((()=>[(0,a._)("div",aV,[(0,a._)("table",rV,[lV,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.selectedVariations,(t=>((0,a.wg)(),(0,a.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,a._)("td",oV,(0,Q.zw)(t.id),1),(0,a._)("td",nV,(0,Q.zw)(t.size),1),(0,a._)("td",dV,(0,Q.zw)(t.color),1),(0,a._)("td",cV,(0,Q.zw)(t.quantity),1),(0,a._)("td",wV,[(0,a._)("div",uV,[(0,a.Wm)(G.T,{onClick:e=>o.deleteVariation(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])])))),128))])])])])),_:1})])),_:1})]),(0,a._)("div",pV,[(0,a.Wm)(G.T,{color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,a.w5)((()=>[mV])),_:1}),(0,a.Wm)(G.T,{onClick:o.update,loading:l.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,a.w5)((()=>[hV])),_:1},8,["onClick","loading"])])])):(0,a.kq)("",!0)])}var fV={data(){return{isLoading:!1,isLoaded:!1,movement:null,variationId:0,product:1,delivery:1,quantity:0,variation:0,selectedVariations:[]}},computed:{products(){return this.$store.getters["product/products"]},deliveries(){return this.$store.getters["user/deliveries"]},id(){return this.$route.params.id},variations(){return this.products.find((t=>t.id==this.product))?.variations.filter((t=>{let e=!0;return this.selectedVariations.forEach((s=>{t.id==s.id&&(e=!1)})),e}))}},watch:{product(){this.variations.length>0?this.variation=this.variations[0].id:this.variation=null}},methods:{addVariation(){if(0==this.variations.length)return!1;const t=this.variations.find((t=>t.id==this.variation));if(!t)return!1;if(this.quantity>t.quantity||0==this.quantity)return this.$alert({type:"warning",title:"Quantity should be between 1 and "+t.quantity}),!1;const e={id:t.id,size:t.size,color:t.color,quantity:this.quantity};this.quantity=0,this.selectedVariations.push(e),this.variations.length>0?this.variation=this.variations[0].id:this.variation=null},deleteVariation(t){this.selectedVariations=this.selectedVariations.filter((e=>e.id!==t)),1==this.variations.length&&(this.variation=this.variations[0].id)},update(){if(0==this.selectedVariations.length)return this.$alert({type:"warning",title:"You need to add some variations"}),!1;let t=0;this.selectedVariations.forEach((e=>t+=e.quantity)),this.isLoading=!0,cT.inventoryMovementUpdate(this.id,{product_id:this.product,delivery_id:this.delivery,variants:this.selectedVariations,quantity:this.qty}).then((t=>{"SUCCESS"==t.data.code&&this.$alert({type:"success",title:t.data.message}),"ERROR_QUANTITY"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).finally((()=>this.isLoading=!1))},handleQuantityChange(){this.quantity<=0&&(this.quantity=0)},async getDeliveries(){await K.deliveries().then((t=>{const e=t.data.data;this.$store.dispatch("user/setDeliveries",e),e.length>0?this.delivery=e[0].id:this.delivery=null}),this.$handleApiError)},getProducts(){return ti.all().then((t=>{if("SUCCESS"==t.data.code){const e=t.data.data.products;this.$store.dispatch("product/setProducts",e),e.length>0?this.product=e[0].id:this.product=null}}),(t=>{this.$handleApiError(t)}))},getMovement(){return cT.getMovement(this.id).then((t=>{if("SUCCESS"==t.data.code){const e=t.data.data.movement;this.product=e.product.id,this.delivery=e.delivery.id,this.selectedVariations=e.inventory_movement_variations;let s=0;this.selectedVariations.forEach((t=>{s+=t.quantity})),this.quantity_total=s}}),(t=>{this.$handleApiError(t)}))}},mounted(){Promise.allSettled([this.getProducts(),this.getDeliveries(),this.getMovement()]).then((()=>{this.isLoaded=!0}))}};const vV=(0,d.Z)(fV,[["render",gV]]);var yV=vV;const _V=(0,a._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,a._)("div",null,[(0,a._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Inventory State List"),(0,a._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"See your inventory state")])],-1),xV={key:0},bV={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},kV={class:"mb-5 tw-flex"},CV={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},DV={key:0,class:""};function SV(t,e,s,r,l,o){const n=(0,a.up)("LoadingAnimation"),d=(0,a.up)("InventoryMovementsTable");return(0,a.wg)(),(0,a.iD)("div",null,[_V,l.isLoaded?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",xV,[(0,a.Wm)(n)])),l.isLoaded?((0,a.wg)(),(0,a.iD)("div",bV,[(0,a._)("div",kV,[(0,a.Wm)(G.T,{icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white !tw-w-0 !tw-overflow-hidden"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white",size:"xx-large"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,a._)("div",CV,[(0,a.Wm)(Kt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-w-full tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[i.nr,l.search]])])]),o.inventoryMovements.length>0?((0,a.wg)(),(0,a.iD)("div",DV,[(0,a.Wm)(d,{columns:l.columns,movements:o.inventoryMovements},null,8,["columns","movements"])])):(0,a.kq)("",!0)])):(0,a.kq)("",!0)])}const zV={class:"tw-relative tw-min-h-[400px] tw-overflow-x-auto tw-overflow-y-visible sm:tw-rounded-lg"},UV={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},LV={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},AV=(0,a._)("th",{scope:"col",class:"tw-p-4"},[(0,a._)("div",{class:"tw-flex tw-items-center"},[(0,a._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,a._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),PV={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},WV=(0,a._)("td",{class:"tw-w-4 tw-p-4"},[(0,a._)("div",{class:"tw-flex tw-items-center"},[(0,a._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,a._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),EV={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},$V={class:"tw-px-6 tw-py-4"},TV=(0,a._)("br",null,null,-1),OV={class:"tw-px-6 tw-py-4"},VV={class:"tw-px-6 tw-py-4"},RV={class:"tw-px-6 tw-py-4"},qV={class:"tw-px-6 tw-py-4"},FV={class:"tw-px-6 tw-py-4"},IV={class:"tw-w-[200px] !tw-whitespace-normal"},NV={class:"tw-px-6 tw-py-4"},jV={class:"tw-px-6 tw-py-4"},MV={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},HV={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},YV=(0,a._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),KV=["value"],ZV={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},QV={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},GV={class:"tw-text-white"};function BV(t,e,s,r,l,o){const n=(0,a.up)("router-link"),d=(0,a.up)("InventoryMovementsActions");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",zV,[(0,a._)("table",UV,[(0,a._)("thead",LV,[(0,a._)("tr",null,[AV,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.columns,(t=>((0,a.wg)(),(0,a.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,a._)("div",PV,(0,Q.zw)(t.name),1)])))),128))])]),(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.movements,((t,e)=>((0,a.wg)(),(0,a.iD)("tr",{key:e,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[WV,(0,a._)("th",EV,(0,Q.zw)(t.id),1),(0,a._)("td",$V,[(0,a.Uk)((0,Q.zw)(t.created_at?.split("T")[0])+" ",1),TV,(0,a.Uk)(" "+(0,Q.zw)(t.created_at?.split("T")[1].split(".")[0]),1)]),(0,a._)("td",OV,(0,Q.zw)(t.delivery.firstname+" "+t.delivery.lastname),1),(0,a._)("td",VV,[(0,a.Wm)(n,{to:"products/"+t.product.id},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Q.zw)(t.product.name),1)])),_:2},1032,["to"])]),(0,a._)("td",RV,(0,Q.zw)(o.quantityTotal(t.inventory_movement_variations)),1),(0,a._)("td",qV,[(0,a._)("div",{class:(0,Q.C_)([[t.is_received?"tw-text-green-500 tw-bg-green-500/10":"tw-text-red-500 tw-bg-red-500/10"],"tw-flex tw-justify-center tw-py-1 tw-rounded-lg tw-items-center"])},[(0,a._)("span",null,(0,Q.zw)(t.is_received?"Yes":"No"),1)],2)]),(0,a._)("td",FV,[(0,a._)("div",IV,(0,Q.zw)(t.note?t.note:"-"),1)]),(0,a._)("td",NV,(0,Q.zw)(t.delivery.city?.name),1),(0,a._)("td",jV,[(0,a.Wm)(d,{movement:t},null,8,["movement"])])])))),128))])])]),(0,a._)("div",MV,[(0,a._)("div",HV,[YV,(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.allowedLimit,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t,key:t},(0,Q.zw)(t),9,KV)))),128))],512),[[i.bM,l.paginationLimit]])]),(0,a._)("div",ZV,[(0,a._)("div",QV,(0,Q.zw)(o.prevRange+1)+" - "+(0,Q.zw)(l.currentPage==o.pageCount?s.movements.length:o.nextRange)+" of "+(0,Q.zw)(s.movements.length)+" items ",1),(0,a._)("div",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.pageCount,(t=>((0,a.wg)(),(0,a.j4)(G.T,{onClick:e=>l.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==l.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,a.w5)((()=>[(0,a._)("span",GV,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const JV={class:"md:tw-w-[50%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},XV=(0,a._)("h1",{class:"tw-text-lg tw-font-medium tw-text-blue-500"},"Confirmation",-1),tR={class:"mt-3"},eR=(0,a._)("h2",{class:"mb-2"},"Received",-1),sR={class:"tw-mt-3"},iR=(0,a._)("h2",{class:"tw-text-md mb-1"},"Add note",-1),aR={class:"tw-flex tw-gap-2 mt-3 tw-justify-end"},rR=(0,a._)("span",{class:"text-white"}," Cancel ",-1),lR=(0,a._)("span",{class:"text-white"}," Update ",-1);function oR(t,e,s,r,l,o){const n=(0,a.up)("popup-full"),d=(0,a.up)("MovementDetails"),c=(0,a.up)("popup");return(0,a.wg)(),(0,a.iD)("div",{key:s.movement.id,class:"tw-flex tw-items-center"},[["delivery","admin"].includes(o.user.role)?((0,a.wg)(),(0,a.j4)(G.T,{key:0,onClick:e[0]||(e[0]=t=>l.confirmPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-checkbox-marked-outline")])),_:1})])),_:1})):(0,a.kq)("",!0),(0,a.kq)("",!0),(t.$can("view_inventory_movement"),(0,a.wg)(),(0,a.j4)(G.T,{key:2,onClick:e[1]||(e[1]=t=>l.detailsPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"blue",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-eye-outline")])),_:1})])),_:1})),t.$can("delete_inventory_movement")?((0,a.wg)(),(0,a.j4)(G.T,{key:3,onClick:e[2]||(e[2]=t=>l.showPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,a.kq)("",!0),t.$can("confirmation_inventory_movement")?((0,a.wg)(),(0,a.j4)(n,{key:4,visible:l.confirmPopup,onCancel:e[6]||(e[6]=t=>l.confirmPopup=!1)},{default:(0,a.w5)((()=>[(0,a._)("div",JV,[XV,(0,a._)("div",tR,[eR,(0,a.Wm)(vl.G,{density:"compact","hide-details":!0,modelValue:l.isConfirmed,"onUpdate:modelValue":e[3]||(e[3]=t=>l.isConfirmed=t),color:"blue"},null,8,["modelValue"])]),(0,a._)("div",sR,[iR,(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":e[4]||(e[4]=t=>l.note=t),cols:"30",rows:"3",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n\r\n              ",512),[[i.nr,l.note]])]),(0,a._)("div",aR,[(0,a.Wm)(G.T,{onClick:e[5]||(e[5]=t=>l.confirmPopup=!1),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,a.w5)((()=>[rR])),_:1}),(0,a.Wm)(G.T,{loading:l.isLoading,onClick:o.updateMovement,color:"blue",variant:"flat",class:"text-capitalize"},{default:(0,a.w5)((()=>[lR])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])):(0,a.kq)("",!0),(0,a.Wm)(n,{visible:l.detailsPopup,onCancel:e[8]||(e[8]=t=>l.detailsPopup=!1)},{default:(0,a.w5)((()=>[l.detailsPopup?((0,a.wg)(),(0,a.j4)(d,{key:0,onCancel:e[7]||(e[7]=t=>l.detailsPopup=!1),movement:s.movement},null,8,["movement"])):(0,a.kq)("",!0)])),_:1},8,["visible"]),(0,a.Wm)(c,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this movement?</p> You won't be able to revert this!",loading:l.isLoading,visible:l.showPopup,onResolved:o.handleResolved},null,8,["loading","visible","onResolved"])])}const nR={class:"md:tw-w-[50%] tw-relative tw-max-h-full tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},dR={class:"tw-p-5"},cR={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500 tw-rounded-md tw-overflow-hidden"},wR=(0,a._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},[(0,a._)("tr",null,[(0,a._)("th",{scope:"col",class:"tw-px-4 tw-max-w-[50px] tw-py-3 text-truncate"}," ID "),(0,a._)("th",{scope:"col",class:"tw-px-6 tw-py-3 text-truncate"}," SIZE "),(0,a._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," COLOR "),(0,a._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," QUANTITY ")])],-1),uR={class:"tw-w-4 tw-p-4"},pR={class:"tw-w-4 tw-p-4"},mR={class:"tw-w-4 tw-p-4"},hR={class:"tw-w-4 tw-p-4"};function gR(t,e,s,i,r,l){return(0,a.wg)(),(0,a.iD)("div",nR,[(0,a.Wm)(G.T,{onClick:l.cancel,icon:"mdi-close",variant:"flat",size:"w-small",color:"red",class:"tw-absolute tw-top-3 tw-z-10 tw-right-3"},null,8,["onClick"]),(0,a._)("div",dR,[(0,a._)("table",cR,[wR,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.movement.inventory_movement_variations,(t=>((0,a.wg)(),(0,a.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,a._)("td",uR,(0,Q.zw)(t.id),1),(0,a._)("td",pR,(0,Q.zw)(t.product_variation.size),1),(0,a._)("td",mR,(0,Q.zw)(t.product_variation.color),1),(0,a._)("td",hR,(0,Q.zw)(t.quantity),1)])))),128))])])])])}var fR={props:["movement"],data(){return{}},computed:{},methods:{cancel(){this.$emit("cancel")}},mounted(){}};const vR=(0,d.Z)(fR,[["render",gR]]);var yR=vR,_R={props:["rowIndex","movement"],components:{MovementDetails:yR},name:"inventoryActions",data(){return{showPopup:!1,confirmPopup:!1,detailsPopup:!1,isConfirmed:!1,note:"",isLoading:!1}},computed:{user(){return this.$store.getters["user/user"]}},methods:{handleResolved(t){t?(this.isLoading=!0,cT["delete"](this.movement.id).then((t=>{"SUCCESS"==t.data.code&&(this.isLoading=!1,this.$alert({type:"success",title:"Inventory Movement Deleted Successfully"})),this.getMovements()})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1,this.showPopup=!1}))):this.showPopup=!1},updateMovement(){this.isLoading=!0,cT.deliveryUpdateMovement(this.movement.id,this.isConfirmed?1:0,this.note).then((t=>{"SUCCESS"==t.data.code&&(this.$alert({type:"success",title:"Inventory Movement Updated Successfully"}),this.getMovements())}),this.$handleApiError).finally((()=>{this.isLoading=!1,this.confirmPopup=!1}))},getMovements(){cT.inventoryMovements().then((t=>{if("SHOW_ALL_INVENTORY_MOVEMENTS"==t.data.code){const e=t.data.data;this.$store.dispatch("inventory/setInventoryMovements",e)}})).catch(this.$handleApiError)}},mounted(){this.note=this.movement.note,this.isConfirmed=1==this.movement.is_received}};const xR=(0,d.Z)(_R,[["render",oR]]);var bR=xR,kR={props:["columns","movements"],components:{InventoryMovementsActions:bR},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.movements.length/this.paginationLimit)},items(){return this.movements.slice(this.prevRange,this.nextRange)}},methods:{quantityTotal(t){let e=0;return t.forEach((t=>{e+=t.quantity})),e}}};const CR=(0,d.Z)(kR,[["render",BV]]);var DR=CR,SR={components:{InventoryMovementsTable:DR},data(){return{localUrl:q,isLoaded:!1,showFilters:!1,search:"",columns:[{prop:"id",name:"#"},{prop:"created_at",name:"Date"},{prop:"delivery",name:"Delivery"},{prop:"product",name:"Product"},{prop:"quantity",name:"Quantity"},{prop:"received",name:"Received"},{prop:"note",name:"Note"},{prop:"city",name:"City"},{prop:"actions",name:"Actions"}]}},computed:{inventoryMovements(){return this.$store.getters["inventory/inventoryMovements"]},filteredInventoryState(){return this.inventoryMovements.filter((()=>!0))}},methods:{async getInventoryMovements(){await cT.inventoryMovements().then((t=>{if(console.log(t.data.data),"SHOW_ALL_INVENTORY_MOVEMENTS"==t.data.code){const e=t.data.data;this.$store.dispatch("inventory/setInventoryMovements",e),console.log(e)}}),this.$handleApiError).finally((()=>{this.isLoaded=!0}))}},async mounted(){this.getInventoryMovements()}};const zR=(0,d.Z)(SR,[["render",SV]]);var UR=zR,LR={name:"inventory/list",path:"/inventories",component:ii,meta:{module:"inventory"},children:[{name:"inventory/state",path:"",component:rO,meta:{module:"inventory",subModule:"inventory/list",title:"Inventory State",gate:"show_all_inventory_states"}},{name:"inventory/movememnts",path:"movements",component:UR,meta:{module:"inventory",subModule:"inventory/movements",title:"Inventory Movements",gate:"show_all_inventory_movements"}},{name:"inventory/add",path:"add",component:NO,meta:{module:"inventory",subModule:"inventory/add",title:"Add Inventory Movement",gate:"create_inventory_movement"}},{name:"inventory/update",path:"update/:id",component:yV,meta:{module:"inventory",subModule:"inventory/update",title:"Update Inventory Movement",gate:"update_inventory_movement"}}]};const AR={class:"mb-5 tw-flex tw-justify-between tw-items-center"},PR=(0,a._)("div",null,[(0,a._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Shop List"),(0,a._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage your shops")],-1),WR={key:0},ER=(0,a._)("span",{class:"text-white"}," Add Shop ",-1),$R={key:0},TR={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},OR={class:"mb-5 tw-flex"},VR={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},RR={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},qR={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},FR=(0,a._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Date",-1),IR={class:"tw-relative"},NR={class:""};function jR(t,e,s,r,l,o){const n=(0,a.up)("LoadingAnimation"),d=(0,a.up)("ShopsTable");return(0,a.wg)(),(0,a.iD)("div",{key:o.shops.length},[(0,a._)("div",AR,[PR,t.$can("create_shop")?((0,a.wg)(),(0,a.iD)("div",WR,[(0,a.Wm)(G.T,{color:"primary-color",link:"",to:{name:"shop/add"},variant:"flat",class:"text-capitalize"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{icon:"mdi-plus",class:"mr-2 text-white"}),ER])),_:1})])):(0,a.kq)("",!0)]),l.isLoaded?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",$R,[(0,a.Wm)(n)])),l.isLoaded?((0,a.wg)(),(0,a.iD)("div",TR,[(0,a._)("div",OR,[(0,a.Wm)(G.T,{onClick:e[0]||(e[0]=t=>l.showFilters=!l.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white",size:"xx-large"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,a._)("div",VR,[(0,a.Wm)(Kt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[i.nr,l.search]])])]),(0,a._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":l.showFilters}])},[(0,a._)("div",RR,[(0,a._)("div",qR,[FR,(0,a._)("div",IR,[(0,a.wy)((0,a._)("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=t=>l.date=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},null,512),[[i.nr,l.date]])])])])],2),(0,a._)("div",NR,[(0,a.Wm)(d,{columns:l.columns,shops:o.filteredShops},null,8,["columns","shops"])])])):(0,a.kq)("",!0)])}class MR{async create(t){return await H.getCookie(),j.post("api/shops/new",{name:t.name})}async update(t,e){return await H.getCookie(),j.post("api/shops/update/"+t,{name:e.name})}async all(){return await H.getCookie(),j.get("api/shops")}async getShop(t){return await H.getCookie(),j.get("api/shops/"+t)}async delete(t){return await H.getCookie(),j["delete"]("api/shops/delete/"+t)}}var HR=new MR;const YR={class:"tw-relative tw-overflow-x-auto sm:tw-rounded-lg"},KR={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},ZR={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},QR=(0,a._)("th",{scope:"col",class:"tw-p-4"},[(0,a._)("div",{class:"tw-flex tw-items-center"},[(0,a._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,a._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),GR={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},BR=(0,a._)("td",{class:"tw-w-4 tw-p-4"},[(0,a._)("div",{class:"tw-flex tw-items-center"},[(0,a._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,a._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),JR={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},XR={class:"tw-px-6 tw-py-4"},tq={class:"tw-px-6 tw-py-4"},eq={class:"tw-flex tw-items-center tw-px-6 tw-py-4 tw-space-x-3"},sq={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},iq={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},aq=(0,a._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),rq=["value"],lq={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},oq={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},nq={class:"tw-text-white"};function dq(t,e,s,r,l,o){const n=(0,a.up)("ShopActions");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",YR,[(0,a._)("table",KR,[(0,a._)("thead",ZR,[(0,a._)("tr",null,[QR,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.columns,(t=>((0,a.wg)(),(0,a.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,a._)("div",GR,(0,Q.zw)(t.name),1)])))),128))])]),(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.shops,(t=>((0,a.wg)(),(0,a.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[BR,(0,a._)("th",JR,(0,Q.zw)(t.id),1),(0,a._)("td",XR,(0,Q.zw)(t.name),1),(0,a._)("td",tq,(0,Q.zw)(t.created_at.split("T")[0]),1),(0,a._)("td",eq,[(0,a.Wm)(n,{shop:t},null,8,["shop"])])])))),128))])])]),(0,a._)("div",sq,[(0,a._)("div",iq,[aq,(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.allowedLimit,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t,key:t},(0,Q.zw)(t),9,rq)))),128))],512),[[i.bM,l.paginationLimit]])]),(0,a._)("div",lq,[(0,a._)("div",oq,(0,Q.zw)(o.prevRange+1)+" - "+(0,Q.zw)(l.currentPage==o.pageCount?s.shops.length:o.nextRange)+" of "+(0,Q.zw)(s.shops.length)+" items ",1),(0,a._)("div",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.pageCount,(t=>((0,a.wg)(),(0,a.j4)(G.T,{onClick:e=>l.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==l.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,a.w5)((()=>[(0,a._)("span",nq,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const cq={class:"tw-flex tw-items-center tw-gap-1"};function wq(t,e,s,i,r,l){const o=(0,a.up)("popup");return(0,a.wg)(),(0,a.iD)("div",cq,[t.$can("update_shop")?((0,a.wg)(),(0,a.j4)(G.T,{key:0,to:"/shops/update/"+s.shop.id,class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-pencil-outline")])),_:1})])),_:1},8,["to"])):(0,a.kq)("",!0),t.$can("delete_shop")?((0,a.wg)(),(0,a.j4)(G.T,{key:1,onClick:e[0]||(e[0]=t=>r.showPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,a.kq)("",!0),(0,a.Wm)(o,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this shop?</p> You won't be able to revert this!",loading:r.isLoading,visible:r.showPopup,onResolved:l.handleResolved},null,8,["loading","visible","onResolved"])])}var uq={props:["rowIndex","shop"],name:"shopActions",data(){return{showPopup:!1,isLoading:!1}},methods:{handleResolved(t){t?(this.isLoading=!0,HR["delete"](this.shop.id).then((t=>{"SHOP_DELETED"==t.data.code&&(this.isLoading=!1,this.$alert({type:"success",title:"Shop Deleted Successfully"})),HR.all().then((t=>{"SUCCESS"==t.data.code&&this.$store.dispatch("shop/setShops",t.data.data.shops)})).catch(this.$handleApiError)})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1,this.showPopup=!1}))):this.showPopup=!1}}};const pq=(0,d.Z)(uq,[["render",wq]]);var mq=pq,hq={props:["columns","shops"],components:{ShopActions:mq},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.shops.length/this.paginationLimit)},items(){return this.shops.slice(this.prevRange,this.nextRange)}},methods:{}};const gq=(0,d.Z)(hq,[["render",dq]]);var fq=gq,vq={components:{ShopsTable:fq},data(){return{localUrl:q,isLoaded:!1,showFilters:!1,date:null,search:"",columns:[{prop:"id",name:"#"},{prop:"name",name:"Name"},{prop:"created_at",name:"Created at"},{prop:"actions",name:"Actions"}]}},computed:{shops(){return this.$store.getters["shop/shops"]},filteredShops(){const t=this.date;return this.shops.filter((e=>(!t||e?.created_at.split("T")[0]===t)&&!!e.name.toLowerCase().includes(this.search.toLowerCase())))}},mounted(){HR.all().then((t=>{"SUCCESS"==t.data.code&&this.$store.dispatch("shop/setShops",t.data.data.shops)}),(t=>{this.$handleApiError(t)})).finally((()=>this.isLoaded=!0))}};const yq=(0,d.Z)(vq,[["render",jR]]);var _q=yq;const xq=(0,a._)("div",{class:"mb-5"},[(0,a._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Add Shop "),(0,a._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Create new shop")],-1),bq={class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},kq={class:"tw-w-full"},Cq=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Shop Name ",-1),Dq={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Sq={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},zq=(0,a._)("span",{class:"text-white text-capitalize"},"Cancel",-1),Uq=(0,a._)("span",{class:"text-white text-capitalize"},"Create",-1);function Lq(t,e,s,i,r,l){return(0,a.wg)(),(0,a.iD)("div",null,[xq,(0,a._)("div",bq,[(0,a._)("div",null,[(0,a.Wm)(ri.o,null,{default:(0,a.w5)((()=>[(0,a.Wm)(li.D,{cols:"12",md:"6"},{default:(0,a.w5)((()=>[(0,a.Wm)(ri.o,null,{default:(0,a.w5)((()=>[(0,a.Wm)(li.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,a.w5)((()=>[(0,a._)("div",kq,[Cq,(0,a.Wm)(X.hw,{error:!r.formStatus.name.valid,onKeyup:e[0]||(e[0]=t=>l.resetError("name")),"hide-details":!0,modelValue:r.shop.name,"onUpdate:modelValue":e[1]||(e[1]=t=>r.shop.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,a._)("div",Dq,(0,Q.zw)(r.formStatus.name.message),1)])])),_:1})])),_:1})])),_:1})])),_:1})]),(0,a._)("div",Sq,[(0,a.Wm)(G.T,{color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,a.w5)((()=>[zq])),_:1}),(0,a.Wm)(G.T,{onClick:l.create,loading:r.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,a.w5)((()=>[Uq])),_:1},8,["onClick","loading"])])])])}var Aq={components:{},data(){return{isLoading:!1,shop:{name:""},formStatus:{name:{valid:!0,message:""}}}},methods:{create(){if(!this.validate())return!1;this.isLoading=!0;let t=this.shop;HR.create(t).then((t=>{"SHOP_CREATED"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.shop={name:""}),"VALIDATION_ERROR"==t.data.code&&this.$alert({type:"warning",title:t.data.errors.ref})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.name=xt(this.shop.name,"Shop name"),this.formStatus.name.valid}}};const Pq=(0,d.Z)(Aq,[["render",Lq]]);var Wq=Pq;const Eq=(0,a._)("div",{class:"mb-5"},[(0,a._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Update Shop"),(0,a._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Update shop informations")],-1),$q={key:0},Tq={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},Oq={class:"tw-flex tw-gap-2 tw-text-neutral-800 tw-items-center tw-mb-5"},Vq={class:"tw-block tw-py-1 tw-px-2 tw-rounded-md text-primary-color"},Rq={class:"tw-w-full"},qq=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Shop Name",-1),Fq={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Iq={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},Nq=(0,a._)("span",{class:"text-white text-capitalize"},"Cancel",-1),jq=(0,a._)("span",{class:"text-white text-capitalize"},"Update",-1);function Mq(t,e,s,i,r,l){const o=(0,a.up)("LoadingAnimation");return(0,a.wg)(),(0,a.iD)("div",null,[Eq,r.isLoaded?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",$q,[(0,a.Wm)(o)])),r.isLoaded?((0,a.wg)(),(0,a.iD)("div",Tq,[(0,a._)("div",Oq,[(0,a.Uk)(" Shop ID: "),(0,a._)("span",Vq,(0,Q.zw)(l.id),1)]),(0,a._)("div",null,[(0,a.Wm)(ri.o,null,{default:(0,a.w5)((()=>[(0,a.Wm)(li.D,{cols:"12",md:"6"},{default:(0,a.w5)((()=>[(0,a.Wm)(ri.o,null,{default:(0,a.w5)((()=>[(0,a.Wm)(li.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,a.w5)((()=>[(0,a._)("div",Rq,[qq,(0,a.Wm)(X.hw,{error:!r.formStatus.name.valid,onKeyup:e[0]||(e[0]=t=>l.resetError("name")),"hide-details":!0,modelValue:r.shop.name,"onUpdate:modelValue":e[1]||(e[1]=t=>r.shop.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,a._)("div",Fq,(0,Q.zw)(r.formStatus.name.message),1)])])),_:1})])),_:1})])),_:1})])),_:1})]),(0,a._)("div",Iq,[(0,a.Wm)(G.T,{color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,a.w5)((()=>[Nq])),_:1}),(0,a.Wm)(G.T,{onClick:l.update,loading:r.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,a.w5)((()=>[jq])),_:1},8,["onClick","loading"])])])):(0,a.kq)("",!0)])}var Hq={components:{},data(){return{isLoading:!1,isLoaded:!1,shop:{name:""},formStatus:{name:{valid:!0,message:""}}}},computed:{id(){return this.$route.params.id}},methods:{update(){if(!this.validate())return!1;this.isLoading=!0;let t=this.shop;HR.update(this.$route.params.id,t).then((t=>{"SHOP_UPDATED"==t.data.code&&this.$alert({type:"success",title:t.data.message}),"SHOP_NOT_UPDATED"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.name=xt(this.shop.name,"Shop name"),this.formStatus.name.valid}},mounted(){HR.getShop(this.$route.params.id).then((t=>{if("SUCCESS"==t.data.code){const{name:e}=t.data.data.shops;this.shop.name=e,this.isLoaded=!0}}),this.$handleApiError)}};const Yq=(0,d.Z)(Hq,[["render",Mq]]);var Kq=Yq,Zq={name:"shops",path:"/shops",component:ii,meta:{module:"shop"},children:[{name:"shop/list",path:"",component:_q,meta:{module:"shop",subModule:"shop/list",title:"Shop List",gate:"show_all_sales"}},{name:"shop/add",path:"add",component:Wq,meta:{module:"shop",subModule:"shop/add",title:"Shop Add",gate:"create_shop"}},{name:"shop/update",path:"update/:id",component:Kq,meta:{module:"shop",subModule:"shop/update",title:"Update Shop",gate:"update_shop"}}]};const Qq={class:"mb-5 tw-flex tw-justify-between tw-items-center"},Gq=(0,a._)("div",null,[(0,a._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Warehouse List"),(0,a._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage your warehouses")],-1),Bq={key:0},Jq=(0,a._)("span",{class:"text-white"}," Add Warehouse ",-1),Xq={key:0},tF={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},eF={class:"mb-5 tw-flex"},sF={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},iF={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},aF={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},rF=(0,a._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Date",-1),lF={class:"tw-relative"},oF={class:""};function nF(t,e,s,r,l,o){const n=(0,a.up)("LoadingAnimation"),d=(0,a.up)("WarehousesTable"),c=(0,a.up)("AddWarehouse");return(0,a.wg)(),(0,a.iD)("div",{key:o.warehouses.length},[(0,a._)("div",Qq,[Gq,t.$can("create_warehouse")?((0,a.wg)(),(0,a.iD)("div",Bq,[(0,a.Wm)(G.T,{color:"primary-color",onClick:e[0]||(e[0]=t=>l.showPopup=!0),variant:"flat",class:"text-capitalize"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{icon:"mdi-plus",class:"mr-2 text-white"}),Jq])),_:1})])):(0,a.kq)("",!0)]),l.isLoaded?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",Xq,[(0,a.Wm)(n)])),l.isLoaded?((0,a.wg)(),(0,a.iD)("div",tF,[(0,a._)("div",eF,[(0,a.Wm)(G.T,{onClick:e[1]||(e[1]=t=>l.showFilters=!l.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white",size:"xx-large"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,a._)("div",sF,[(0,a.Wm)(Kt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[i.nr,l.search]])])]),(0,a._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":l.showFilters}])},[(0,a._)("div",iF,[(0,a._)("div",aF,[rF,(0,a._)("div",lF,[(0,a.wy)((0,a._)("input",{type:"date","onUpdate:modelValue":e[3]||(e[3]=t=>l.date=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},null,512),[[i.nr,l.date]])])])])],2),(0,a._)("div",oF,[(0,a.Wm)(d,{columns:l.columns,warehouses:o.filteredWarehouses},null,8,["columns","warehouses"])]),(0,a.Wm)(c,{onCancel:e[4]||(e[4]=t=>l.showPopup=!1),visible:l.showPopup},null,8,["visible"])])):(0,a.kq)("",!0)])}const dF={class:"tw-relative tw-overflow-x-auto sm:tw-rounded-lg"},cF={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},wF={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},uF=(0,a._)("th",{scope:"col",class:"tw-p-4"},[(0,a._)("div",{class:"tw-flex tw-items-center"},[(0,a._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,a._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),pF={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},mF=(0,a._)("td",{class:"tw-w-4 tw-p-4"},[(0,a._)("div",{class:"tw-flex tw-items-center"},[(0,a._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,a._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),hF={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},gF={class:"tw-px-6 tw-py-4"},fF={class:"tw-px-6 tw-py-4"},vF={class:"tw-flex tw-items-center tw-px-6 tw-py-4 tw-space-x-3"},yF={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},_F={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},xF=(0,a._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),bF=["value"],kF={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},CF={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},DF={class:"tw-text-white"};function SF(t,e,s,r,l,o){const n=(0,a.up)("WarehouseActions");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",dF,[(0,a._)("table",cF,[(0,a._)("thead",wF,[(0,a._)("tr",null,[uF,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.columns,(t=>((0,a.wg)(),(0,a.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,a._)("div",pF,(0,Q.zw)(t.name),1)])))),128))])]),(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.warehouses,(t=>((0,a.wg)(),(0,a.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[mF,(0,a._)("th",hF,(0,Q.zw)(t.id),1),(0,a._)("td",gF,(0,Q.zw)(t.name),1),(0,a._)("td",fF,(0,Q.zw)(t.created_at.split("T")[0]),1),(0,a._)("td",vF,[(0,a.Wm)(n,{warehouse:t},null,8,["warehouse"])])])))),128))])])]),(0,a._)("div",yF,[(0,a._)("div",_F,[xF,(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.allowedLimit,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t,key:t},(0,Q.zw)(t),9,bF)))),128))],512),[[i.bM,l.paginationLimit]])]),(0,a._)("div",kF,[(0,a._)("div",CF,(0,Q.zw)(o.prevRange+1)+" - "+(0,Q.zw)(l.currentPage==o.pageCount?s.warehouses.length:o.nextRange)+" of "+(0,Q.zw)(s.warehouses.length)+" items ",1),(0,a._)("div",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.pageCount,(t=>((0,a.wg)(),(0,a.j4)(G.T,{onClick:e=>l.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==l.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,a.w5)((()=>[(0,a._)("span",DF,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const zF={class:"tw-flex tw-items-center tw-gap-1"};function UF(t,e,s,i,r,l){const o=(0,a.up)("UpdateWarehouse"),n=(0,a.up)("popup");return(0,a.wg)(),(0,a.iD)("div",zF,[t.$can("update_warehouse")?((0,a.wg)(),(0,a.j4)(G.T,{key:0,onClick:e[0]||(e[0]=t=>r.showUpdatePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-pencil-outline")])),_:1})])),_:1})):(0,a.kq)("",!0),t.$can("delete_warehouse")?((0,a.wg)(),(0,a.j4)(G.T,{key:1,onClick:e[1]||(e[1]=t=>r.showPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,a.kq)("",!0),((0,a.wg)(),(0,a.j4)(o,{visible:r.showUpdatePopup,onCancel:e[2]||(e[2]=t=>r.showUpdatePopup=!1),key:s.warehouse.id,warehouse:s.warehouse},null,8,["visible","warehouse"])),(0,a.Wm)(n,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this warehouse?</p> You won't be able to revert this!",loading:r.isLoading,visible:r.showPopup,onResolved:l.handleResolved},null,8,["loading","visible","onResolved"])])}const LF={class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[500px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},AF=(0,a._)("h1",{class:"tw-text-lg"},"Update Warehouse",-1),PF={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},WF={class:"tw-w-full tw-col-span-12"},EF=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Warehouse Name",-1),$F={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},TF={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},OF=(0,a._)("span",{class:"text-white"}," Cancel ",-1),VF=(0,a._)("span",{class:"text-white"}," Update ",-1);function RF(t,e,s,i,r,l){const o=(0,a.up)("popup-full");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(o,{onCancel:e[3]||(e[3]=e=>t.$emit("cancel")),visible:s.visible},{default:(0,a.w5)((()=>[(0,a._)("div",LF,[AF,(0,a._)("div",PF,[(0,a._)("div",WF,[EF,(0,a.Wm)(X.hw,{error:!r.formStatus.name.valid,onKeyup:e[0]||(e[0]=t=>l.resetError("name")),"hide-details":!0,modelValue:r.Warehouse.name,"onUpdate:modelValue":e[1]||(e[1]=t=>r.Warehouse.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,a._)("div",$F,(0,Q.zw)(r.formStatus.name.message),1)])]),(0,a._)("div",TF,[(0,a.Wm)(G.T,{onClick:e[2]||(e[2]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,a.w5)((()=>[OF])),_:1}),(0,a.Wm)(G.T,{loading:r.isLoading,onClick:l.update,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,a.w5)((()=>[VF])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var qF={components:{},props:["warehouse","visible"],data(){return{isLoading:!1,isLoaded:!1,Warehouse:{name:""},formStatus:{name:{valid:!0,message:""}}}},computed:{},methods:{update(){if(!this.validate())return!1;this.isLoading=!0,am.update(this.warehouse.id,this.Warehouse).then((t=>{"WAREHOUSE_UPDATED"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.$store.dispatch("warehouse/update",this.Warehouse),this.$emit("cancel")),"WAREHOUSE_NOT_UPDATED"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.name=xt(this.Warehouse.name,"Warehouse name"),this.formStatus.name.valid}},mounted(){this.Warehouse={...this.warehouse}}};const FF=(0,d.Z)(qF,[["render",RF]]);var IF=FF,NF={components:{UpdateWarehouse:IF},props:["rowIndex","warehouse"],name:"warehouseActions",data(){return{showPopup:!1,isLoading:!1,showUpdatePopup:!1}},methods:{handleResolved(t){t?(this.isLoading=!0,am["delete"](this.warehouse.id).then((t=>{"WAREHOUSE_DELETED"==t.data.code&&(this.isLoading=!1,this.$alert({type:"success",title:"Warehouse Deleted Successfully"}),this.$store.dispatch("warehouse/delete",this.warehouse.id))})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1,this.showPopup=!1}))):this.showPopup=!1}}};const jF=(0,d.Z)(NF,[["render",UF]]);var MF=jF,HF={props:["columns","warehouses"],components:{WarehouseActions:MF},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.warehouses.length/this.paginationLimit)},items(){return this.warehouses.slice(this.prevRange,this.nextRange)}},methods:{}};const YF=(0,d.Z)(HF,[["render",SF]]);var KF=YF;const ZF={class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[500px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},QF=(0,a._)("h1",{class:"tw-text-lg"},"Create Warehouse",-1),GF={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},BF={class:"tw-w-full tw-col-span-12"},JF=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Warehouse Name",-1),XF={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},tI={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},eI=(0,a._)("span",{class:"text-white"}," Cancel ",-1),sI=(0,a._)("span",{class:"text-white"}," Create ",-1);function iI(t,e,s,i,r,l){const o=(0,a.up)("popup-full");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(o,{onCancel:e[3]||(e[3]=e=>t.$emit("cancel")),visible:s.visible},{default:(0,a.w5)((()=>[(0,a._)("div",ZF,[QF,(0,a._)("div",GF,[(0,a._)("div",BF,[JF,(0,a.Wm)(X.hw,{error:!r.formStatus.name.valid,onKeyup:e[0]||(e[0]=t=>l.resetError("name")),"hide-details":!0,modelValue:r.warehouse.name,"onUpdate:modelValue":e[1]||(e[1]=t=>r.warehouse.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,a._)("div",XF,(0,Q.zw)(r.formStatus.name.message),1)])]),(0,a._)("div",tI,[(0,a.Wm)(G.T,{onClick:e[2]||(e[2]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,a.w5)((()=>[eI])),_:1}),(0,a.Wm)(G.T,{loading:r.isLoading,onClick:l.create,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,a.w5)((()=>[sI])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var aI={props:["visible"],components:{},data(){return{isLoading:!1,warehouse:{name:""},formStatus:{name:{valid:!0,message:""}}}},methods:{create(){if(!this.validate())return!1;this.isLoading=!0;let t=this.warehouse;am.create(t).then((t=>{if("WAREHOUSE_CREATED"==t.data.code){this.$alert({type:"success",title:t.data.message});const e=t.data.data.warehouse;this.$store.dispatch("warehouse/addWarehouse",e),this.$emit("cancel"),this.warehouse={name:""}}"VALIDATION_ERROR"==t.data.code&&this.$alert({type:"warning",title:t.data.errors.ref})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.name=xt(this.warehouse.name,"Warehouse name"),this.formStatus.name.valid}}};const rI=(0,d.Z)(aI,[["render",iI]]);var lI=rI,oI={components:{WarehousesTable:KF,AddWarehouse:lI},data(){return{localUrl:q,isLoaded:!1,showFilters:!1,date:null,search:"",showPopup:!1,columns:[{prop:"id",name:"#"},{prop:"name",name:"Name"},{prop:"created_at",name:"Created at"},{prop:"actions",name:"Actions"}]}},computed:{warehouses(){return this.$store.getters["warehouse/warehouses"]},filteredWarehouses(){const t=this.date;return this.warehouses.filter((e=>(!t||e?.created_at.split("T")[0]===t)&&!!e.name.toLowerCase().includes(this.search.toLowerCase())))}},mounted(){am.all().then((t=>{"SUCCESS"==t.data.code&&this.$store.dispatch("warehouse/setWarehouses",t.data.data.warehouses)}),(t=>{this.$handleApiError(t)})).finally((()=>this.isLoaded=!0))}};const nI=(0,d.Z)(oI,[["render",nF]]);var dI=nI,cI={name:"warehouses",path:"/warehouses",component:ii,meta:{module:"warehouse"},children:[{name:"warehouse/list",path:"",component:dI,meta:{module:"warehouse",subModule:"warehouse/list",title:"Warehouse List",gate:"show_all_warehouses"}}]};const wI=(0,a._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,a._)("div",null,[(0,a._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Factorisation List"),(0,a._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage your factorisations")])],-1),uI={key:0},pI={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},mI={class:"mb-5 tw-flex"},hI={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},gI={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},fI={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},vI=(0,a._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Date",-1),yI={class:"tw-relative"},_I={class:""};function xI(t,e,s,r,l,o){const n=(0,a.up)("LoadingAnimation"),d=(0,a.up)("FactorisationsTable");return(0,a.wg)(),(0,a.iD)("div",{key:o.factorisations.length},[wI,l.isLoaded?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",uI,[(0,a.Wm)(n)])),l.isLoaded?((0,a.wg)(),(0,a.iD)("div",pI,[(0,a._)("div",mI,[(0,a.Wm)(G.T,{onClick:e[0]||(e[0]=t=>l.showFilters=!l.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white",size:"xx-large"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,a._)("div",hI,[(0,a.Wm)(Kt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[i.nr,l.search]])])]),(0,a._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":l.showFilters}])},[(0,a._)("div",gI,[(0,a._)("div",fI,[vI,(0,a._)("div",yI,[(0,a.wy)((0,a._)("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=t=>l.date=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},null,512),[[i.nr,l.date]])])])])],2),(0,a._)("div",_I,[(0,a.Wm)(d,{columns:l.columns,factorisations:o.filteredFactorisations},null,8,["columns","factorisations"])])])):(0,a.kq)("",!0)])}class bI{async update(t,e){return await H.getCookie(),j.post("api/factorisations/update/"+t,{factorisation_id:e.factorisation_id,delivery_id:e.delivery_id,price:e.price,commands_number:e.commands_number})}async updateComment(t,e){return await H.getCookie(),j.post("api/factorisations/update/comment/"+t,{comment:e.comment})}async updatePaid(t,e){return await H.getCookie(),j.post("api/factorisations/update/payment/"+t,{paid:e})}async updateClose(t,e){return await H.getCookie(),j.post("api/factorisations/update/closing/"+t,{close:e})}async all(){return await H.getCookie(),j.get("api/factorisations")}async getFactorisation(t){return await H.getCookie(),j.get("api/factorisations/"+t)}async delete(t){return await H.getCookie(),j["delete"]("api/factorisations/delete/"+t)}}var kI=new bI;const CI={class:"tw-relative tw-overflow-x-auto sm:tw-rounded-lg"},DI={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},SI={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},zI=(0,a._)("th",{scope:"col",class:"tw-p-4"},[(0,a._)("div",{class:"tw-flex tw-items-center"},[(0,a._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,a._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),UI={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},LI={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},AI={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},PI=(0,a._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"}," Show per page: ",-1),WI=["value"],EI={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},$I={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},TI={class:"tw-text-white"};function OI(t,e,s,r,l,o){const n=(0,a.up)("FactorisationRow");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",CI,[(0,a._)("table",DI,[(0,a._)("thead",SI,[(0,a._)("tr",null,[zI,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.columns,(t=>((0,a.wg)(),(0,a.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,a._)("div",UI,(0,Q.zw)(t.name),1)])))),128))])]),(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.factorisations,(t=>((0,a.wg)(),(0,a.j4)(n,{factorisation:t,key:t.id},null,8,["factorisation"])))),128))])])]),(0,a._)("div",LI,[(0,a._)("div",AI,[PI,(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.allowedLimit,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t,key:t},(0,Q.zw)(t),9,WI)))),128))],512),[[i.bM,l.paginationLimit]])]),(0,a._)("div",EI,[(0,a._)("div",$I,(0,Q.zw)(o.prevRange+1)+" - "+(0,Q.zw)(l.currentPage==o.pageCount?s.factorisations.length:o.nextRange)+" of "+(0,Q.zw)(s.factorisations.length)+" items ",1),(0,a._)("div",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.pageCount,(t=>((0,a.wg)(),(0,a.j4)(G.T,{onClick:e=>l.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==l.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,a.w5)((()=>[(0,a._)("span",TI,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const VI={class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},RI=(0,a._)("td",{class:"tw-w-4 tw-p-4"},[(0,a._)("div",{class:"tw-flex tw-items-center"},[(0,a._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,a._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),qI={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},FI={class:"tw-px-6 tw-py-4"},II={class:"tw-px-6 tw-py-4"},NI={class:"tw-px-6 tw-py-4"},jI={class:"tw-px-6 tw-py-4"},MI={class:"tw-px-6 tw-py-4"},HI={class:"tw-px-6 tw-py-4"},YI={class:"tw-px-6 tw-py-4"},KI={class:"tw-flex tw-items-center tw-w-full tw-text-neutral-600 dark:tw-text-neutral-200 tw-text-md tw-py-1"},ZI={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit tw-scale-75"},QI=["disabled"],GI=(0,a._)("div",{class:"tw-flex tw-items-center peer-checked:tw-bg-emerald-500 tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),BI={class:"tw-px-6 tw-py-4"},JI={class:"tw-flex tw-items-center tw-w-full tw-text-neutral-600 dark:tw-text-neutral-200 tw-text-md tw-py-1"},XI={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit tw-scale-75"},tN=["disabled"],eN=(0,a._)("div",{class:"tw-flex tw-items-center peer-checked:tw-bg-emerald-500 tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),sN={class:"tw-px-6 tw-py-4"},iN={class:"tw-flex tw-items-center tw-px-6 tw-py-4 tw-space-x-3"};function aN(t,e,s,r,l,o){const n=(0,a.up)("FactorisationActions");return(0,a.wg)(),(0,a.iD)("tr",VI,[RI,(0,a._)("th",qI,(0,Q.zw)(s.factorisation.id),1),(0,a._)("td",FI,[(0,a._)("button",{class:"tw-underline",onClick:e[0]||(e[0]=t=>o.download(s.factorisation.id))},(0,Q.zw)(s.factorisation.factorisation_id),1)]),(0,a._)("td",II,(0,Q.zw)(o.deliveryName),1),(0,a._)("td",NI,(0,Q.zw)(s.factorisation.commands_number),1),(0,a._)("td",jI,(0,Q.zw)(s.factorisation.price),1),(0,a._)("td",MI,(0,Q.zw)(s.factorisation.close_at?.split("T")[0]),1),(0,a._)("td",HI,(0,Q.zw)(s.factorisation.paid_at?.split("T")[0]),1),(0,a._)("td",YI,[(0,a._)("div",KI,[(0,a._)("label",ZI,[(0,a.wy)((0,a._)("input",{disabled:l.isLoadingClose,"onUpdate:modelValue":e[1]||(e[1]=t=>o.close=t),type:"checkbox",class:"tw-sr-only tw-peer"},null,8,QI),[[i.e8,o.close]]),GI]),l.isLoadingClose?((0,a.wg)(),(0,a.j4)(J.t,{key:0,color:"green",size:"small",class:"tw-animate-spin"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-loading")])),_:1})):(0,a.kq)("",!0)])]),(0,a._)("td",BI,[(0,a._)("div",JI,[(0,a._)("label",XI,[(0,a.wy)((0,a._)("input",{disabled:l.isLoadingPaid,"onUpdate:modelValue":e[2]||(e[2]=t=>o.paid=t),type:"checkbox",class:"tw-sr-only tw-peer"},null,8,tN),[[i.e8,o.paid]]),eN]),l.isLoadingPaid?((0,a.wg)(),(0,a.j4)(J.t,{key:0,color:"green",size:"small",class:"tw-animate-spin"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-loading")])),_:1})):(0,a.kq)("",!0)])]),(0,a._)("td",sN,(0,Q.zw)(s.factorisation.created_at.split("T")[0]),1),(0,a._)("td",iN,[(0,a.Wm)(n,{factorisation:s.factorisation},null,8,["factorisation"])])])}const rN={class:"tw-flex tw-items-center tw-gap-1"};function lN(t,e,s,i,r,l){const o=(0,a.up)("UpdateFactorisation"),n=(0,a.up)("UpdateComment"),d=(0,a.up)("popup");return(0,a.wg)(),(0,a.iD)("div",rN,[t.$can("update_factorisation")?((0,a.wg)(),(0,a.j4)(G.T,{key:0,onClick:e[0]||(e[0]=t=>r.showUpdateCommentPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"blue",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-comment-text")])),_:1})])),_:1})):(0,a.kq)("",!0),t.$can("update_factorisation")?((0,a.wg)(),(0,a.j4)(G.T,{key:1,onClick:e[1]||(e[1]=t=>r.showUpdatePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-pencil-outline")])),_:1})])),_:1})):(0,a.kq)("",!0),t.$can("delete_factorisation")?((0,a.wg)(),(0,a.j4)(G.T,{key:2,onClick:e[2]||(e[2]=t=>r.showPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,a.kq)("",!0),((0,a.wg)(),(0,a.j4)(o,{visible:r.showUpdatePopup,onCancel:e[3]||(e[3]=t=>r.showUpdatePopup=!1),key:s.factorisation.id,factorisation:s.factorisation},null,8,["visible","factorisation"])),((0,a.wg)(),(0,a.j4)(n,{visible:r.showUpdateCommentPopup,onCancel:e[4]||(e[4]=t=>r.showUpdateCommentPopup=!1),key:s.factorisation.id,factorisation:s.factorisation},null,8,["visible","factorisation"])),(0,a.Wm)(d,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this factorisation?</p> You won't be able to revert this!",loading:r.isLoading,visible:r.showPopup,onResolved:l.handleResolved},null,8,["loading","visible","onResolved"])])}const oN={class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},nN=(0,a._)("h1",{class:"tw-text-lg"},"Update Factorisation",-1),dN={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},cN={class:"tw-w-full tw-col-span-6"},wN=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Factorisation Code ",-1),uN={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},pN={class:"tw-w-full tw-col-span-6"},mN=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Delivery",-1),hN={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},gN={class:"tw-w-full tw-col-span-6"},fN=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Total Price",-1),vN={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},yN={class:"tw-w-full tw-col-span-6"},_N=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Nb Commands",-1),xN={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},bN={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},kN=(0,a._)("span",{class:"text-white"}," Cancel ",-1),CN=(0,a._)("span",{class:"text-white"}," Update ",-1);function DN(t,e,s,i,r,l){const o=(0,a.up)("popup-full");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(o,{onCancel:e[9]||(e[9]=e=>t.$emit("cancel")),visible:s.visible},{default:(0,a.w5)((()=>[(0,a._)("div",oN,[nN,(0,a._)("div",dN,[(0,a._)("div",cN,[wN,(0,a.Wm)(X.hw,{error:!r.formStatus.factorisation_id.valid,onKeyup:e[0]||(e[0]=t=>l.resetError("factorisation_id")),"hide-details":!0,modelValue:r.Factorisation.factorisation_id,"onUpdate:modelValue":e[1]||(e[1]=t=>r.Factorisation.factorisation_id=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,a._)("div",uN,(0,Q.zw)(r.formStatus.factorisation_id.message),1)]),(0,a._)("div",pN,[mN,(0,a.Wm)(X.hw,{error:!r.formStatus.delivery_id.valid,onKeyup:e[2]||(e[2]=t=>l.resetError("delivery_id")),"hide-details":!0,disabled:!0,modelValue:l.deliveryName,"onUpdate:modelValue":e[3]||(e[3]=t=>l.deliveryName=t),clearable:"",disable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,a._)("div",hN,(0,Q.zw)(r.formStatus.delivery_id.message),1)]),(0,a._)("div",gN,[fN,(0,a.Wm)(X.hw,{error:!r.formStatus.price.valid,onKeyup:e[4]||(e[4]=t=>l.resetError("price")),"hide-details":!0,modelValue:r.Factorisation.price,"onUpdate:modelValue":e[5]||(e[5]=t=>r.Factorisation.price=t),disabled:!0,clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,a._)("div",vN,(0,Q.zw)(r.formStatus.price.message),1)]),(0,a._)("div",yN,[_N,(0,a.Wm)(X.hw,{error:!r.formStatus.commands_number.valid,disabled:!0,onKeyup:e[6]||(e[6]=t=>l.resetError("commands_number")),"hide-details":!0,modelValue:r.Factorisation.commands_number,"onUpdate:modelValue":e[7]||(e[7]=t=>r.Factorisation.commands_number=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,a._)("div",xN,(0,Q.zw)(r.formStatus.commands_number.message),1)])]),(0,a._)("div",bN,[(0,a.Wm)(G.T,{onClick:e[8]||(e[8]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,a.w5)((()=>[kN])),_:1}),(0,a.Wm)(G.T,{loading:r.isLoading,onClick:l.update,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,a.w5)((()=>[CN])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var SN={components:{},props:["factorisation","visible"],data(){return{isLoading:!1,isLoaded:!1,Factorisation:{factorisation_id:"",delivery_id:0,price:0,commands_number:0,note:""},formStatus:{factorisation_id:{valid:!0,message:""},delivery_id:{valid:!0,message:""},price:{valid:!0,message:""},commands_number:{valid:!0,message:""}}}},computed:{deliveryName:{get(){return this.Factorisation.delivery.firstname+" "+this.Factorisation.delivery.lastname},set(t){console.log(t)}}},methods:{update(){if(!this.validate())return!1;this.isLoading=!0,kI.update(this.factorisation.id,this.Factorisation).then((t=>{"FACTORISATION_UPDATED"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.$store.dispatch("factorisation/update",this.Factorisation),this.$emit("cancel")),"FACTORISATION_NOT_UPDATED"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.factorisation_id=xt(this.Factorisation.factorisation_id,"Factorisation Code"),this.formStatus.price=bt(this.Factorisation.price,"Factorisation Price"),this.formStatus.commands_number=bt(this.Factorisation.commands_number,"Factorisation Nb Commands"),this.formStatus.factorisation_id.valid&&this.formStatus.price.valid&&this.formStatus.commands_number.valid}},mounted(){this.Factorisation={...this.factorisation}}};const zN=(0,d.Z)(SN,[["render",DN]]);var UN=zN;const LN={class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},AN=(0,a._)("h1",{class:"tw-text-lg"},"Update Factorisation Comment",-1),PN={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},WN={class:"tw-w-full tw-col-span-6"},EN=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Total Price",-1),$N={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},TN={class:"tw-w-full tw-col-span-6"},ON=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Nb Commands",-1),VN={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},RN={class:"tw-w-full tw-col-span-12"},qN=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Comment",-1),FN=["error"],IN={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},NN={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},jN=(0,a._)("span",{class:"text-white"}," Cancel ",-1),MN=(0,a._)("span",{class:"text-white"}," Update ",-1);function HN(t,e,s,r,l,o){const n=(0,a.up)("popup-full");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(n,{onCancel:e[7]||(e[7]=e=>t.$emit("cancel")),visible:s.visible},{default:(0,a.w5)((()=>[(0,a._)("div",LN,[AN,(0,a._)("div",PN,[(0,a._)("div",WN,[EN,(0,a.Wm)(X.hw,{error:!l.formStatus.price.valid,onKeyup:e[0]||(e[0]=t=>o.resetError("price")),"hide-details":!0,modelValue:l.Factorisation.price,"onUpdate:modelValue":e[1]||(e[1]=t=>l.Factorisation.price=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",disabled:"",density:"compact"},null,8,["error","modelValue"]),(0,a._)("div",$N,(0,Q.zw)(l.formStatus.price.message),1)]),(0,a._)("div",TN,[ON,(0,a.Wm)(X.hw,{error:!l.formStatus.commands_number.valid,onKeyup:e[2]||(e[2]=t=>o.resetError("commands_number")),"hide-details":!0,modelValue:l.Factorisation.commands_number,"onUpdate:modelValue":e[3]||(e[3]=t=>l.Factorisation.commands_number=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",disabled:"",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,a._)("div",VN,(0,Q.zw)(l.formStatus.commands_number.message),1)]),(0,a._)("div",RN,[qN,(0,a.wy)((0,a._)("textarea",{error:!l.formStatus.commands_number.valid,onKeyup:e[4]||(e[4]=t=>o.resetError("commands_number")),"hide-details":!0,clearable:"","clear-icon":"mdi-close","onUpdate:modelValue":e[5]||(e[5]=t=>l.Factorisation.comment=t),variant:"outlined",density:"compact",cols:"30",rows:"5",color:"primary-color",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-400 focus:tw-border-orange-500"},"\r\n            ",40,FN),[[i.nr,l.Factorisation.comment]]),(0,a._)("div",IN,(0,Q.zw)(l.formStatus.commands_number.message),1)])]),(0,a._)("div",NN,[(0,a.Wm)(G.T,{onClick:e[6]||(e[6]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,a.w5)((()=>[jN])),_:1}),(0,a.Wm)(G.T,{loading:l.isLoading,onClick:o.update,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,a.w5)((()=>[MN])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var YN={components:{},props:["factorisation","visible"],data(){return{isLoading:!1,isLoaded:!1,Factorisation:{price:0,commands_number:0,comment:""},formStatus:{price:{valid:!0,message:""},commands_number:{valid:!0,message:""},comment:{valid:!0,message:""}}}},computed:{},methods:{update(){if(!this.validate())return!1;this.isLoading=!0,kI.updateComment(this.factorisation.id,this.Factorisation).then((t=>{"FACTORISATION_UPDATED"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.$store.dispatch("factorisation/update",this.Factorisation),this.$emit("cancel")),"FACTORISATION_NOT_UPDATED"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.comment=xt(this.Factorisation.comment,"Factorisation Comment"),this.formStatus.comment.valid}},mounted(){this.Factorisation={...this.factorisation}}};const KN=(0,d.Z)(YN,[["render",HN]]);var ZN=KN,QN={components:{UpdateFactorisation:UN,UpdateComment:ZN},props:["rowIndex","factorisation"],name:"factorisationActions",data(){return{showPopup:!1,isLoading:!1,showUpdatePopup:!1,showUpdateCommentPopup:!1}},methods:{handleResolved(t){t?(this.isLoading=!0,kI["delete"](this.factorisation.id).then((t=>{"FACTORISATION_DELETED"==t.data.code&&(this.isLoading=!1,this.$alert({type:"success",title:"Factorisation Deleted Successfully"}),this.$store.dispatch("factorisation/delete",this.factorisation.id)),"DELETE_ERROR"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1,this.showPopup=!1}))):this.showPopup=!1}}};const GN=(0,d.Z)(QN,[["render",lN]]);var BN=GN,JN={props:["factorisation"],components:{FactorisationActions:BN},data(){return{isLoadingPaid:!1,isLoadingClose:!1}},computed:{deliveryName:{get(){return this.factorisation.delivery.firstname+" "+this.factorisation.delivery.lastname},set(t){console.log(t)}},paid:{get(){return 1==this.factorisation.paid},set(t){this.updatePaid(t)}},close:{get(){return 1==this.factorisation.close},set(t){this.updateClose(t)}}},methods:{updatePaid(t){this.isLoadingPaid=!0,kI.updatePaid(this.factorisation.id,t).then((t=>{"FACTORISATION_UPDATED"==t.data.code&&this.$store.dispatch("factorisation/update",t.data.data.factorisation)}),this.$handleApiError).finally((()=>{this.isLoadingPaid=!1}))},updateClose(t){this.isLoadingClose=!0,kI.updateClose(this.factorisation.id,t).then((t=>{"FACTORISATION_UPDATED"==t.data.code&&this.$store.dispatch("factorisation/update",t.data.data.factorisation)}),this.$handleApiError).finally((()=>{this.isLoadingClose=!1}))},download(t){const e=F+"api/factorisations/generate-pdf/"+t,s=document.createElement("a");s.href=e,s.target="_blank",s.setAttribute("download","dd.pdf"),document.body.appendChild(s),s.click(),document.body.removeChild(s)}}};const XN=(0,d.Z)(JN,[["render",aN]]);var tj=XN,ej={props:["columns","factorisations"],components:{FactorisationRow:tj},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.factorisations.length/this.paginationLimit)},items(){return this.factorisations.slice(this.prevRange,this.nextRange)}},methods:{}};const sj=(0,d.Z)(ej,[["render",OI]]);var ij=sj,aj={components:{FactorisationsTable:ij},data(){return{localUrl:q,isLoaded:!1,showFilters:!1,date:null,search:"",showPopup:!1,columns:[{prop:"id",name:"#"},{prop:"factorisation_id",name:"Code"},{prop:"delivery_id",name:"Delivery"},{prop:"commands_number",name:"Nb Commands"},{prop:"price",name:"Total Price"},{prop:"close_at",name:"Closed at"},{prop:"paid_at",name:"Paid at"},{prop:"close",name:"Close"},{prop:"paid",name:"Paid"},{prop:"created_at",name:"Created at"},{prop:"actions",name:"Actions"}]}},computed:{factorisations(){return this.$store.getters["factorisation/factorisations"]},filteredFactorisations(){const t=this.date;return this.factorisations.filter((e=>!t||e?.created_at.split("T")[0]===t))}},mounted(){kI.all().then((t=>{"SUCCESS"==t.data.code&&this.$store.dispatch("factorisation/setFactorisations",t.data.data.factorisations)}),(t=>{this.$handleApiError(t)})).finally((()=>this.isLoaded=!0))}};const rj=(0,d.Z)(aj,[["render",xI]]);var lj=rj,oj={name:"factorisations",path:"/factorisations",component:ii,meta:{module:"factorisation"},children:[{name:"factorisation/list",path:"",component:lj,meta:{module:"factorisation",subModule:"factorisation/list",title:"Factorisations List",gate:"show_all_factorisations"}}]};const nj={class:"mb-5 tw-flex tw-justify-between tw-items-center"},dj=(0,a._)("div",null,[(0,a._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Google Sheets"),(0,a._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage your google sheets")],-1),cj=(0,a._)("span",{class:"text-white"}," Add Sheet ",-1),wj={key:0},uj={key:1,class:"py-5 px-5 tw-mb-5 tw-border bg-white tw-w-full tw-rounded-md"},pj={class:"tw-flex tw-items-center tw-gap-2"},mj=(0,a._)("h1",null,"Application's email",-1),hj={class:"tw-bg-gray-100 tw-border tw-border-gray-300 tw-rounded tw-py-2 tw-px-2 tw-text-sm tw-mt-2 tw-text-gray-700"},gj=(0,a._)("p",{class:"tw-mt-1 tw-text-xs tw-text-gray-400"}," Use this email to give access to Google Sheets ",-1),fj={key:2,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},vj={class:"mb-5 tw-flex"},yj={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},_j={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},xj={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},bj=(0,a._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Date",-1),kj={class:"tw-relative"},Cj={class:""};function Dj(t,e,s,r,l,o){const n=(0,a.up)("LoadingAnimation"),d=(0,a.up)("SheetsTable"),c=(0,a.up)("AddSheet");return(0,a.wg)(),(0,a.iD)("div",{key:o.sheets.length},[(0,a._)("div",nj,[dj,(0,a._)("div",null,[t.$can("create_sheet")?((0,a.wg)(),(0,a.j4)(G.T,{key:0,color:"primary-color",onClick:e[0]||(e[0]=t=>l.showPopup=!0),variant:"flat",class:"text-capitalize"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{icon:"mdi-plus",class:"mr-2 text-white"}),cj])),_:1})):(0,a.kq)("",!0)])]),l.isLoaded?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",wj,[(0,a.Wm)(n)])),l.isLoaded?((0,a.wg)(),(0,a.iD)("div",uj,[(0,a._)("div",pj,[mj,(0,a._)("button",{onClick:e[1]||(e[1]=(...t)=>o.copy&&o.copy(...t)),class:"tw-bg-gray-100 tw-border tw-border-gray-300 tw-rounded tw-w-[30px] tw-h-[30px] tw-text-gray-500 hover:tw-text-gray-700 tw-duration-300 tw-border-solid hover:tw-border-gray-400"},[(0,a.Wm)(J.t,{class:"tw-text-xs"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-content-copy")])),_:1})])]),(0,a._)("div",hj,(0,Q.zw)(l.email),1),gj])):(0,a.kq)("",!0),l.isLoaded?((0,a.wg)(),(0,a.iD)("div",fj,[(0,a._)("div",vj,[(0,a.Wm)(G.T,{onClick:e[2]||(e[2]=t=>l.showFilters=!l.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white",size:"xx-large"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,a._)("div",yj,[(0,a.Wm)(Kt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[i.nr,l.search]])])]),(0,a._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":l.showFilters}])},[(0,a._)("div",_j,[(0,a._)("div",xj,[bj,(0,a._)("div",kj,[(0,a.wy)((0,a._)("input",{type:"date","onUpdate:modelValue":e[4]||(e[4]=t=>l.date=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},null,512),[[i.nr,l.date]])])])])],2),(0,a._)("div",Cj,[(0,a.Wm)(d,{sheets:o.sheets},null,8,["sheets"])]),(0,a.Wm)(c,{onCancel:e[5]||(e[5]=t=>l.showPopup=!1),visible:l.showPopup},null,8,["visible"])])):(0,a.kq)("",!0)])}const Sj={class:"tw-relative tw-overflow-x-auto sm:tw-rounded-lg"},zj={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},Uj={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},Lj=(0,a._)("th",{scope:"col",class:"tw-p-4"},[(0,a._)("div",{class:"tw-flex tw-items-center"},[(0,a._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,a._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),Aj={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},Pj={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},Wj={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},Ej=(0,a._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"}," Show per page: ",-1),$j=["value"],Tj={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},Oj={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},Vj={class:"tw-text-white"};function Rj(t,e,s,r,l,o){const n=(0,a.up)("SheetRow");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",Sj,[(0,a._)("table",zj,[(0,a._)("thead",Uj,[(0,a._)("tr",null,[Lj,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.columns,(t=>((0,a.wg)(),(0,a.iD)("th",{key:t,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,a._)("div",Aj,(0,Q.zw)(t),1)])))),128))])]),(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.sheets,(t=>((0,a.wg)(),(0,a.j4)(n,{sheet:t,key:t.id},null,8,["sheet"])))),128))])])]),(0,a._)("div",Pj,[(0,a._)("div",Wj,[Ej,(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.allowedLimit,(t=>((0,a.wg)(),(0,a.iD)("option",{value:t,key:t},(0,Q.zw)(t),9,$j)))),128))],512),[[i.bM,l.paginationLimit]])]),(0,a._)("div",Tj,[(0,a._)("div",Oj,(0,Q.zw)(o.prevRange+1)+" - "+(0,Q.zw)(l.currentPage==o.pageCount?s.sheets.length:o.nextRange)+" of "+(0,Q.zw)(s.sheets.length)+" items ",1),(0,a._)("div",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.pageCount,(t=>((0,a.wg)(),(0,a.j4)(G.T,{onClick:e=>l.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==l.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,a.w5)((()=>[(0,a._)("span",Vj,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const qj={class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},Fj=(0,a._)("td",{class:"tw-w-4 tw-p-4"},[(0,a._)("div",{class:"tw-flex tw-items-center"},[(0,a._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,a._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),Ij={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},Nj={class:"tw-px-6 tw-py-4"},jj={class:"tw-px-6 tw-py-4"},Mj={class:"tw-px-6 tw-py-4"},Hj={class:"tw-flex tw-items-center tw-w-full tw-text-neutral-600 dark:tw-text-neutral-200 tw-text-md tw-py-1"},Yj={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit tw-scale-75"},Kj=["disabled"],Zj=(0,a._)("div",{class:"tw-flex tw-items-center peer-checked:tw-bg-emerald-500 tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),Qj={class:"tw-px-6 tw-py-4"},Gj={class:"tw-flex tw-items-center tw-px-6 tw-py-4 tw-space-x-3"};function Bj(t,e,s,r,l,o){const n=(0,a.up)("SheetActions");return(0,a.wg)(),(0,a.iD)("tr",qj,[Fj,(0,a._)("th",Ij,(0,Q.zw)(s.sheet.id),1),(0,a._)("td",Nj,[(0,a._)("div",null,[(0,a._)("span",{class:(0,Q.C_)(["tw-inline-block tw-w-[8px] tw-h-[8px] tw-rounded-full tw-mr-1",[1==s.sheet.active&&1==s.sheet.auto_fetch?"tw-bg-emerald-500":"tw-bg-red-500"]])},null,2),(0,a.Uk)(" "+(0,Q.zw)(s.sheet.name),1)])]),(0,a._)("td",jj,[(0,a._)("div",null,(0,Q.zw)(s.sheet.sheet_name),1)]),(0,a._)("td",Mj,[(0,a._)("div",Hj,[(0,a._)("label",Yj,[(0,a.wy)((0,a._)("input",{disabled:l.isLoadingAuto,"onUpdate:modelValue":e[0]||(e[0]=t=>o.autoFetch=t),type:"checkbox",class:"tw-sr-only tw-peer"},null,8,Kj),[[i.e8,o.autoFetch]]),Zj]),l.isLoadingAuto?((0,a.wg)(),(0,a.j4)(J.t,{key:0,color:"green",size:"small",class:"tw-animate-spin"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-loading")])),_:1})):(0,a.kq)("",!0)])]),(0,a._)("td",Qj,(0,Q.zw)(s.sheet.created_at.split("T")[0]),1),(0,a._)("td",Gj,[(0,a.Wm)(n,{sheet:s.sheet},null,8,["sheet"])])])}const Jj={key:0};function Xj(t,e,s,i,r,l){const o=(0,a.up)("UpdateSheet"),n=(0,a.up)("SheetOrders"),d=(0,a.up)("popup");return s.sheet?((0,a.wg)(),(0,a.iD)("div",Jj,[t.$can("update_sheet")?((0,a.wg)(),(0,a.j4)(G.T,{key:0,onClick:l.sync,class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"blue",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{class:(0,Q.C_)([r.isLoadingSheet&&"tw-animate-spin"]),color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-autorenew")])),_:1},8,["class"])])),_:1},8,["onClick"])):(0,a.kq)("",!0),t.$can("update_sheet")?((0,a.wg)(),(0,a.j4)(G.T,{key:1,onClick:e[0]||(e[0]=t=>r.showUpdatePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-pencil-outline")])),_:1})])),_:1})):(0,a.kq)("",!0),t.$can("delete_sheet")?((0,a.wg)(),(0,a.j4)(G.T,{key:2,onClick:e[1]||(e[1]=t=>r.showPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,a.w5)((()=>[(0,a.Wm)(J.t,{color:"white"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,a.kq)("",!0),(0,a.Wm)(o,{visible:r.showUpdatePopup,"onUpdate:visible":e[2]||(e[2]=t=>r.showUpdatePopup=t),sheet:s.sheet,onCancel:e[3]||(e[3]=t=>r.showUpdatePopup=!1)},null,8,["visible","sheet"]),(0,a.Wm)(n,{visible:r.showSheetPopup,"onUpdate:visible":e[4]||(e[4]=t=>r.showSheetPopup=t),sheet:s.sheet,orders:r.orders,onCancel:e[5]||(e[5]=t=>r.showSheetPopup=!1)},null,8,["visible","sheet","orders"]),(0,a.Wm)(d,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this sale?</p> You won't be able to revert this!",loading:r.isLoading,visible:r.showPopup,onResolved:l.handleDelete},null,8,["loading","visible","onResolved"])])):(0,a.kq)("",!0)}const tM={class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},eM=(0,a._)("h1",{class:"tw-text-lg"},"Create Sheet",-1),sM={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},iM={class:"md:tw-col-span-6 tw-col-span-12"},aM=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Name",-1),rM={class:"md:tw-col-span-6 tw-col-span-12"},lM=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Sheet Name",-1),oM={class:"md:tw-col-span-12 tw-col-span-12"},nM=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Sheet ID",-1),dM={class:"md:tw-col-span-6 tw-col-span-12"},cM=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Auto Fetch",-1),wM={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit tw-scale-75"},uM=(0,a._)("div",{class:"tw-flex tw-items-center peer-checked:tw-bg-emerald-500 tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),pM={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},mM=(0,a._)("span",{class:"text-white"}," Cancel ",-1),hM=(0,a._)("span",{class:"text-white"}," Save ",-1);function gM(t,e,s,r,l,o){const n=(0,a.up)("popup-full");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(n,{onCancel:e[5]||(e[5]=e=>t.$emit("cancel")),visible:s.visible},{default:(0,a.w5)((()=>[(0,a._)("div",tM,[eM,(0,a._)("div",sM,[(0,a._)("div",iM,[aM,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>l.newSheet.name=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[i.nr,l.newSheet.name]])]),(0,a._)("div",rM,[lM,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>l.newSheet.sheet_name=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[i.nr,l.newSheet.sheet_name]])]),(0,a._)("div",oM,[nM,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=t=>l.newSheet.sheet_id=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[i.nr,l.newSheet.sheet_id]])]),(0,a._)("div",dM,[cM,(0,a._)("label",wM,[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>l.newSheet.auto_fetch=t),type:"checkbox",class:"tw-sr-only tw-peer"},null,512),[[i.e8,l.newSheet.auto_fetch]]),uM])])]),(0,a._)("div",pM,[(0,a.Wm)(G.T,{onClick:e[4]||(e[4]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,a.w5)((()=>[mM])),_:1}),(0,a.Wm)(G.T,{loading:l.isLoading,onClick:o.update,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,a.w5)((()=>[hM])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var fM={props:["visible","sheet"],data(){return{isLoading:!1,newSheet:{name:"",sheet_id:"",sheet_name:"",auto_fetch:!0}}},watch:{visible(t){t&&(this.newSheet={...this.sheet,auto_fetch:1==this.sheet.auto_fetch})}},computed:{isFormValid(){return!!this.newSheet.name&&!!this.newSheet.sheet_id&&!!this.newSheet.sheet_name}},methods:{update(){if(!this.isFormValid)return this.$alert({type:"warning",title:"Please fill all the form"}),!1;this.isLoading=!0;const t=this.newSheet;Js.update(this.sheet.id,t).then((t=>{"SUCCESS"==t.data.code&&(this.$emit("cancel"),this.$alert({type:"success",title:"Sheet updated successfully"}),this.$store.dispatch("sheet/update",t.data.data.sheet))}),this.$handleApiError).finally((()=>this.isLoading=!1))}}};const vM=(0,d.Z)(fM,[["render",gM]]);var yM=vM;const _M={class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},xM={key:0},bM={class:"tw-flex tw-items-center tw-gap-2 tw-mb-2"},kM=(0,a._)("h1",{class:"tw-text-sm tw-font-medium tw-text-neutral-700"},"Sheet's New Orders",-1),CM={class:"tw-bg-emerald-500 tw-text-white tw-px-1 tw-text-sm tw-rounded"},DM={class:"tw-relative tw-overflow-x-auto"},SM={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500 tw-border tw-rounded"},zM=(0,a._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50 tw-rounded-t tw-overflow-hidden"},[(0,a._)("tr",null,[(0,a._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Fullname"),(0,a._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Product"),(0,a._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"SKU"),(0,a._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Qty"),(0,a._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Price")])],-1),UM={class:"tw-px-6 tw-py-2"},LM={class:"tw-px-6 tw-py-2"},AM={class:"tw-px-6 tw-py-2"},PM={class:"tw-px-6 tw-py-2"},WM={class:"tw-px-6 tw-py-2"},EM={class:"tw-flex tw-gap-2 mt-3 tw-justify-end"},$M=(0,a._)("span",{class:"text-white"}," Cancel ",-1),TM=(0,a._)("span",{class:"text-white"}," Save Orders",-1);function OM(t,e,s,i,r,l){const o=(0,a.up)("popup-full");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(o,{onCancel:e[1]||(e[1]=e=>t.$emit("cancel")),visible:s.visible},{default:(0,a.w5)((()=>[(0,a._)("div",_M,[s.orders.length>0?((0,a.wg)(),(0,a.iD)("div",xM,[(0,a._)("div",bM,[kM,(0,a._)("div",CM,(0,Q.zw)(s.orders.length),1)]),(0,a._)("div",null,[(0,a._)("div",DM,[(0,a._)("table",SM,[zM,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.orders,(t=>((0,a.wg)(),(0,a.iD)("tr",{key:t,class:"tw-bg-white tw-border-b"},[(0,a._)("td",UM,(0,Q.zw)(t["Full name"]),1),(0,a._)("td",LM,[(0,a._)("div",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t["Product name"].split("\n"),(t=>((0,a.wg)(),(0,a.iD)("p",{key:t},"- "+(0,Q.zw)(t),1)))),128))])]),(0,a._)("td",AM,[(0,a._)("div",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t["SKU"].split("\n"),(t=>((0,a.wg)(),(0,a.iD)("p",{key:t},(0,Q.zw)(t),1)))),128))])]),(0,a._)("td",PM,[(0,a._)("div",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t["Total quantity"].split("\n"),(t=>((0,a.wg)(),(0,a.iD)("p",{key:t},(0,Q.zw)(t),1)))),128))])]),(0,a._)("td",WM,(0,Q.zw)(t["Total charge"]),1)])))),128))])])])]),(0,a._)("div",EM,[(0,a.Wm)(G.T,{onClick:e[0]||(e[0]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,a.w5)((()=>[$M])),_:1}),(0,a.Wm)(G.T,{loading:r.isLoading,onClick:l.save,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,a.w5)((()=>[TM])),_:1},8,["loading","onClick"])])])):(0,a.kq)("",!0)])])),_:1},8,["visible"])])}var VM={props:["visible","sheet","orders"],data(){return{isLoading:!1}},computed:{sales(){return this.$store.getters["sale/sales"]}},methods:{save(){this.isLoading=!0,Js.saveOrders(this.sheet.id).then((t=>{"SUCCESS"==t.data.code&&(this.$alert({title:t.data.data.orders.length+" Order has been added",type:"success"}),this.$store.dispatch("sale/setSales",[...t.data.data.orders,...this.sales]),this.$emit("cancel"))}),(t=>{this.$handleApiError(t),"PERMISSION_DENIED"==t?.response?.data?.code&&this.$alert({title:"Access denied to this sheet",type:"warning"})})).finally((()=>{this.isLoading=!1}))}}};const RM=(0,d.Z)(VM,[["render",OM]]);var qM=RM,FM={props:["sheet"],name:"sheetActions",components:{UpdateSheet:yM,SheetOrders:qM},data(){return{showPopup:!1,showUpdatePopup:!1,showSheetPopup:!1,isLoading:!1,isLoadingSheet:!1,orders:[]}},computed:{},methods:{handleDelete(t){if(console.log(t),!t)return this.showPopup=!1,!1;this.delete()},delete(){this.isLoading=!0,Js["delete"](this.sheet.id).then((t=>{"SUCCESS"==t.data.code&&(this.$alert({title:"Deleted successfully",type:"success"}),this.$store.dispatch("sheet/delete",this.sheet.id),this.showPopup=!1)}),this.$handleApiError).finally((()=>{this.isLoading=!1}))},sync(){this.isLoadingSheet=!0,Js.sync(this.sheet.id).then((t=>{"SUCCESS"==t.data.code&&(0==t.data.data.orders.length?this.$alert({title:"0 Orders found",type:"info"}):(this.orders=t.data.data.orders,this.showSheetPopup=!0),console.log(t.data.data.sheet),this.$store.dispatch("sheet/update",t.data.data.sheet)),console.log(t.data)}),(t=>{this.$handleApiError(t),console.log(t),this.$store.dispatch("sheet/update",t.response.data.data.sheet),"PERMISSION_DENIED"==t?.response?.data?.code&&this.$alert({title:"Access denied to this Google Sheet",type:"error"})})).finally((()=>{this.isLoadingSheet=!1}))}},mounted(){}};const IM=(0,d.Z)(FM,[["render",Xj]]);var NM=IM,jM={props:["sheet"],components:{SheetActions:NM},data(){return{isLoadingAuto:!1}},computed:{autoFetch:{get(){return 1==this.sheet.auto_fetch},set(t){this.updateAutoFetch(t)}}},methods:{updateAutoFetch(t){this.isLoadingAuto=!0,Js.updateAutoFetch(this.sheet.id,t).then((e=>{"SUCCESS"==e.data.code&&(this.$alert({title:t?"Activated":"Disabled",type:"success"}),this.$store.dispatch("sheet/update",e.data.data.sheet))}),this.$handleApiError).finally((()=>{this.isLoadingAuto=!1}))}}};const MM=(0,d.Z)(jM,[["render",Bj]]);var HM=MM,YM={props:["sheets"],components:{SheetRow:HM},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10,columns:["id","name","sheet name","auto fetch","created","actions"]}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.sheets.length/this.paginationLimit)},items(){return this.sheets.slice(this.prevRange,this.nextRange)}},methods:{}};const KM=(0,d.Z)(YM,[["render",Rj]]);var ZM=KM;const QM={class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},GM=(0,a._)("h1",{class:"tw-text-lg"},"Create Sheet",-1),BM={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},JM={class:"md:tw-col-span-6 tw-col-span-12"},XM=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Name",-1),tH={class:"md:tw-col-span-6 tw-col-span-12"},eH=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Sheet Name",-1),sH={class:"md:tw-col-span-12 tw-col-span-12"},iH=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Sheet ID",-1),aH={class:"md:tw-col-span-6 tw-col-span-12"},rH=(0,a._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Auto Fetch",-1),lH={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit tw-scale-75"},oH=(0,a._)("div",{class:"tw-flex tw-items-center peer-checked:tw-bg-emerald-500 tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),nH={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},dH=(0,a._)("span",{class:"text-white"}," Cancel ",-1),cH=(0,a._)("span",{class:"text-white"}," Save ",-1);function wH(t,e,s,r,l,o){const n=(0,a.up)("popup-full");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(n,{onCancel:e[5]||(e[5]=e=>t.$emit("cancel")),visible:s.visible},{default:(0,a.w5)((()=>[(0,a._)("div",QM,[GM,(0,a._)("div",BM,[(0,a._)("div",JM,[XM,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>l.sheet.name=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[i.nr,l.sheet.name]])]),(0,a._)("div",tH,[eH,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>l.sheet.sheet_name=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[i.nr,l.sheet.sheet_name]])]),(0,a._)("div",sH,[iH,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=t=>l.sheet.sheet_id=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[i.nr,l.sheet.sheet_id]])]),(0,a._)("div",aH,[rH,(0,a._)("label",lH,[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>l.sheet.auto_fetch=t),type:"checkbox",class:"tw-sr-only tw-peer"},null,512),[[i.e8,l.sheet.auto_fetch]]),oH])])]),(0,a._)("div",nH,[(0,a.Wm)(G.T,{onClick:e[4]||(e[4]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,a.w5)((()=>[dH])),_:1}),(0,a.Wm)(G.T,{loading:l.isLoading,onClick:o.create,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,a.w5)((()=>[cH])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var uH={props:["visible"],data(){return{isLoading:!1,sheet:{name:"",sheet_id:"",sheet_name:"",auto_fetch:!0}}},computed:{isFormValid(){return!!this.sheet.name&&!!this.sheet.sheet_id&&!!this.sheet.sheet_name}},methods:{create(){if(!this.isFormValid)return this.$alert({type:"warning",title:"Please fill all the form"}),!1;this.isLoading=!0;const t=this.sheet;Js.create(t).then((t=>{"SUCCESS"==t.data.code&&(this.$emit("cancel"),this.$alert({type:"success",title:"Sheet created successfully"}),this.$store.dispatch("sheet/addSheet",t.data.data.sheet))}),this.$handleApiError).finally((()=>this.isLoading=!1))}}};const pH=(0,d.Z)(uH,[["render",wH]]);var mH=pH,hH={components:{SheetsTable:ZM,AddSheet:mH},data(){return{localUrl:q,isLoaded:!1,showFilters:!1,date:null,search:"",showPopup:!1,email:"new-service-account@testing-379416.iam.gserviceaccount.com"}},computed:{sheets(){return this.$store.getters["sheet/sheets"]}},methods:{getSheets(){return this.isLoaded=!1,Js.all().then((t=>("SUCCESS"==t.data.code&&this.$store.dispatch("sheet/setSheets",t.data.data.sheets),t)),this.$handleApiError).finally((()=>{this.isLoaded=!0}))},copy(){navigator.clipboard.writeText(this.email),this.$alert({title:"Email Copied !",type:"success"})}},mounted(){this.getSheets()}};const gH=(0,d.Z)(hH,[["render",Dj]]);var fH=gH,vH={name:"sheets",path:"/sheets",component:ii,meta:{module:"sheet"},children:[{name:"sheet/list",path:"",component:fH,meta:{module:"sheet",subModule:"sheet/list",title:"Google Sheets List",gate:"show_all_sheets"}}]};const yH=(0,a._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,a._)("div",null,[(0,a._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Page not found")])],-1),_H={class:"py-5 px-5 tw-border bg-white tw-w-full tw-flex tw-items-center tw-justify-center tw-rounded-md tw-min-h-[500px]"},xH={class:"tw-flex tw-items-center tw-flex-col"},bH=(0,a._)("div",{class:"md:tw-text-6xl tw-text-4xl tw-font-black text-primary-color"},"404",-1),kH={class:"tw-w-fit tw-flex tw-items-center md:tw-text-2xl tw-text-xl mt-md-5 mt-3 tw-gap-2"},CH=(0,a._)("div",{class:"tw-max-w-[400px] tw-text-center md:tw-text-lg tw-text-sm mt-5"}," The page you requested was not found or you don't have the permission to access it. ",-1);function DH(t,e,s,i,r,l){return(0,a.wg)(),(0,a.iD)("div",null,[yH,(0,a._)("div",_H,[(0,a._)("div",xH,[bH,(0,a._)("div",kH,[(0,a.Wm)(J.t,null,{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-alert-circle")])),_:1}),(0,a.Uk)(" Oops! Page not found! ")]),CH])])])}var SH={};const zH=(0,d.Z)(SH,[["render",DH]]);var UH=zH;const LH={class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"};function AH(t,e,s,i,r,l){return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",LH,[(0,a._)("div",null,[(0,a.Wm)(G.T,{onClick:l.sendRequest,loading:r.isLoading,variant:"flat",color:"primary-color"},{default:(0,a.w5)((()=>[(0,a.Uk)("Send Request")])),_:1},8,["onClick","loading"])])])])}const PH="api/orders/count",WH="get";var EH={name:"Orders from Youcan",sheet_id:"QSDfFsqdDSQDfrsqFDSRHTRzer",sheet_name:"Youcan-Orders",auto_fetch:!0},$H={data(){return{isLoading:!1,test:EH}},methods:{async sendRequest(){switch(this.isLoading=!0,await H.getCookie(),WH){case"get":j.get(PH).then((t=>{console.log("---- Success Response ----"),console.log(`---- Code ${t.status} ----`),console.log(t.data)}),(t=>{this.$handleApiError(t),console.log("---- Failed Response ----"),console.log(`---- Code ${t?.response.status} ----`),console.log(t?.response?.data)})).finally((()=>this.isLoading=!1));break;case"post":j.post(PH,EH).then((t=>{console.log("---- Success Response ----"),console.log(`---- Code ${t.status} ----`),console.log(t.data)}),(t=>{this.$handleApiError(t),console.log("---- Failed Response ----"),console.log(`---- Code ${t?.response.status} ----`),console.log(t?.response?.data)})).finally((()=>this.isLoading=!1));break;case"delete":j["delete"](PH).then((t=>{console.log("---- Success Response ----"),console.log(`---- Code ${t.status} ----`),console.log(t.data)}),(t=>{this.$handleApiError(t),console.log("---- Failed Response ----"),console.log(`---- Code ${t?.response.status} ----`),console.log(t?.response?.data)})).finally((()=>this.isLoading=!1));break;default:break}}}};const TH=(0,d.Z)($H,[["render",AH]]);var OH=TH;const VH=[Vt,Bw,Xf,rb,QD,VW,eT,LR,Zq,cI,oj,vH,{name:"default",path:"/test",component:ii,children:[{name:"test",path:"",component:OH,meta:{title:"Test abro m3a rasek",module:"test",gate:"all"}}]},{name:"not-found",path:"/404",component:ii,meta:{title:"Not Found"},children:[{name:"404",path:"",component:UH}]},{name:"catch-all",path:"/:pathMatch(.*)",beforeEnter:(t,e,s)=>s({name:"404"}),meta:{title:"Not Found"}}],RH=(0,u.p7)({history:(0,u.PO)("/"),routes:VH});RH.beforeEach(Z);var qH=RH,FH=(s(9773),s(8957));const IH={colors:{"primary-color":"#FF9F43","secondary-color":"#1B2850","primary-indigo":"#1B2850","primary-orange":"#FF9F43","primary-blue":"#00CFE8","primary-green":"#28C76F"}};var NH=(0,FH.Rd)({theme:{defaultTheme:"customTheme",themes:{customTheme:IH}}});const jH={install(t){t.config.globalProperties.$can=function(t){const e=this.$store.getters["user/permissions"];return e.includes(t)}}};var MH=jH;const HH={install(t){t.config.globalProperties.$alert=function(t){this.$store.dispatch("alert/toggleAlert",t)}}};var YH=HH;const KH={install(t){t.config.globalProperties.$handleApiError=function(e){const s=e?.response?.data?.code;let i="error",a="Something wrong happened. Try again",r=!0;const l=["VALIDATION_ERROR","NOT_ACTIVE_ERROR","INVALID_CREDENTIALS","PERMISSION_DENIED"];switch(l.includes(s)&&(r=!1),console.log(e),"ERR_NETWORK"==e.code&&(a="Network error. Check your connection"),s){case"NOT_ALLOWED":a="Your are not allowed to this resources";break;case"ERROR":a=e?.response?.data.message;break;case"NOT_AUTHENTICATED":a="Your session expired",setTimeout((()=>{t.config.globalProperties.$store.dispatch("user/logout"),t.config.globalProperties.$router.push("/login")}),2e3);break;case"NOT_FOUND":r=!1,t.config.globalProperties.$router.push({name:"404"});break;default:break}return r&&t.config.globalProperties.$alert({type:i,title:a}),e}}};var ZH=KH,QH=s(7025);const GH=t=>((0,a.dD)("data-v-ff4afcd0"),t=t(),(0,a.Cn)(),t),BH={class:"tw-min-h-[500px] tw-flex tw-items-center tw-justify-center tw-bg-white tw-rounded-md tw-border"},JH=GH((()=>(0,a._)("div",{class:"tw-w-[40px] tw-h-[40px] tw-animate-spin loading tw-border-4 tw-border-x-transparent tw-border-t-transparent tw-rounded-full"},null,-1))),XH=[JH];function tY(t,e,s,i,r,l){return(0,a.wg)(),(0,a.iD)("div",BH,XH)}var eY={};const sY=(0,d.Z)(eY,[["render",tY],["__scopeId","data-v-ff4afcd0"]]);var iY=sY;const aY={key:0},rY={ref:"popup",class:"tw-fixed tw-top-0 tw-left-0 tw-z-[50999] tw-right-0 tw-bottom-0 tw-flex tw-items-center tw-justify-center"},lY={name:"body",class:"tw-z-[50999] tw-bg-white md:tw-min-w-[300px] md:tw-max-w-[800px] tw-flex tw-flex-col md:tw-min-h-[170px] tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5"},oY=["innerHTML"],nY={key:1,class:"tw-text-lg tw-text-gray-700"},dY={class:"tw-flex tw-gap-3 tw-justify-end mt-5"};function cY(t,e,s,i,r,l){return s.visible?((0,a.wg)(),(0,a.iD)("div",aY,[((0,a.wg)(),(0,a.j4)(a.lR,{to:"body"},[(0,a._)("div",null,[(0,a._)("div",rY,[(0,a._)("div",lY,[(0,a._)("div",{class:(0,Q.C_)(["tw-font-medium tw-text-lg mb-5 tw-text-start",l.currentType.class])},[(0,a.Wm)(J.t,{size:"small",class:"mr-1"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Q.zw)(l.currentType.icon),1)])),_:1}),(0,a._)("span",null,(0,Q.zw)(s.title),1)],2),s.body?((0,a.wg)(),(0,a.iD)("div",{key:0,class:"tw-text-center tw-text-lg tw-text-gray-700",innerHTML:s.body},null,8,oY)):((0,a.wg)(),(0,a.iD)("div",nY,[(0,a.WI)(t.$slots,"default")])),(0,a.Wm)(ts.C),(0,a._)("div",dY,[(0,a.Wm)(G.T,{variant:"flat",color:"grey",onClick:e[0]||(e[0]=t=>l.resolve(!1))},{default:(0,a.w5)((()=>[(0,a.Uk)("Cancel")])),_:1}),s.noConfirm?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(G.T,{key:0,loading:s.loading,variant:"flat",color:s.btnColor?s.btnColor:"red",onClick:e[1]||(e[1]=t=>l.resolve(!0))},{default:(0,a.w5)((()=>[(0,a.Uk)("Confirm")])),_:1},8,["loading","color"]))])]),(0,a._)("div",{onClick:e[2]||(e[2]=t=>l.resolve(!1)),class:(0,Q.C_)(["tw-duration-300 tw-absolute tw-top-0 tw-left-0 tw-w-full tw-h-full tw-bg-neutral-900/50 tw-opacity-0",{"!tw-opacity-100":s.visible}])},null,2)],512)])]))])):(0,a.kq)("",!0)}var wY={props:["visible","loading","title","body","type","noConfirm","btnColor"],data(){return{show:!0,types:{warning:{class:"tw-text-orange-400",icon:"mdi-alert-circle-outline"},info:{class:"tw-text-blue-400",icon:"mdi-information-outline"}}}},watch:{visible(t){this.show=t}},methods:{resolve(t){this.$emit("resolved",t)}},computed:{currentType(){return this.types[this.type]}}};const uY=(0,d.Z)(wY,[["render",cY]]);var pY=uY;const mY={key:0},hY={ref:"popup",class:"tw-fixed tw-top-0 tw-left-0 tw-z-[50999] tw-right-0 tw-bottom-0 tw-flex tw-items-center tw-justify-center"};function gY(t,e,s,r,l,o){return s.visible?((0,a.wg)(),(0,a.iD)("div",mY,[((0,a.wg)(),(0,a.j4)(a.lR,{to:".my-application"},[(0,a._)("div",null,[(0,a._)("div",hY,[(0,a._)("div",{name:"body",onClick:e[0]||(e[0]=(0,i.iM)((t=>o.resolve(!1)),["self"])),class:"tw-z-[50999] tw-w-full md:tw-min-w-[300px] tw-overflow-y-auto tw-max-h-screen tw-flex tw-flex-col md:tw-min-h-[170px]"},[(0,a.WI)(t.$slots,"default")]),(0,a._)("div",{onClick:e[1]||(e[1]=t=>o.resolve(!1)),class:(0,Q.C_)(["tw-duration-300 tw-absolute tw-top-0 tw-left-0 tw-w-full tw-h-full tw-bg-neutral-900/50 tw-opacity-0",{"!tw-opacity-100":s.visible}])},null,2)],512)])]))])):(0,a.kq)("",!0)}var fY={props:["visible","loading","title","body","type","noConfirm","btnColor"],data(){return{show:!0,types:{warning:{class:"tw-text-orange-400",icon:"mdi-alert-circle-outline"},info:{class:"tw-text-blue-400",icon:"mdi-information-outline"}}}},watch:{visible(t){this.show=t}},methods:{resolve(t){this.$emit("cancel",t)}},computed:{currentType(){return this.types[this.type]}}};const vY=(0,d.Z)(fY,[["render",gY]]);var yY=vY,_Y=s(4679),xY=s(5781),bY=s.n(xY);(0,i.ri)(w).use(qH).use(V).use(NH).use(MH).use(YH).use(ZH).use(QH.Z).component("LoadingAnimation",iY).component("Popup",pY).component("PopupFull",yY).component("VueDatePicker",_Y.Z).component("downloadCsv",bY()).mount("#app")}},e={};function s(i){var a=e[i];if(void 0!==a)return a.exports;var r=e[i]={exports:{}};return t[i].call(r.exports,r,r.exports,s),r.exports}s.m=t,function(){var t=[];s.O=function(e,i,a,r){if(!i){var l=1/0;for(c=0;c<t.length;c++){i=t[c][0],a=t[c][1],r=t[c][2];for(var o=!0,n=0;n<i.length;n++)(!1&r||l>=r)&&Object.keys(s.O).every((function(t){return s.O[t](i[n])}))?i.splice(n--,1):(o=!1,r<l&&(l=r));if(o){t.splice(c--,1);var d=a();void 0!==d&&(e=d)}}return e}r=r||0;for(var c=t.length;c>0&&t[c-1][2]>r;c--)t[c]=t[c-1];t[c]=[i,a,r]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){var t,e=Object.getPrototypeOf?function(t){return Object.getPrototypeOf(t)}:function(t){return t.__proto__};s.t=function(i,a){if(1&a&&(i=this(i)),8&a)return i;if("object"===typeof i&&i){if(4&a&&i.__esModule)return i;if(16&a&&"function"===typeof i.then)return i}var r=Object.create(null);s.r(r);var l={};t=t||[null,e({}),e([]),e(e)];for(var o=2&a&&i;"object"==typeof o&&!~t.indexOf(o);o=e(o))Object.getOwnPropertyNames(o).forEach((function(t){l[t]=function(){return i[t]}}));return l["default"]=function(){return i},s.d(r,l),r}}(),function(){s.d=function(t,e){for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){s.f={},s.e=function(t){return Promise.all(Object.keys(s.f).reduce((function(e,i){return s.f[i](t,e),e}),[]))}}(),function(){s.u=function(t){return"js/"+t+"."+{128:"65a19ac7",269:"6bcf28cc",617:"ac7ccd9f"}[t]+".js"}}(),function(){s.miniCssF=function(t){}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="production:";s.l=function(i,a,r,l){if(t[i])t[i].push(a);else{var o,n;if(void 0!==r)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var w=d[c];if(w.getAttribute("src")==i||w.getAttribute("data-webpack")==e+r){o=w;break}}o||(n=!0,o=document.createElement("script"),o.charset="utf-8",o.timeout=120,s.nc&&o.setAttribute("nonce",s.nc),o.setAttribute("data-webpack",e+r),o.src=i),t[i]=[a];var u=function(e,s){o.onerror=o.onload=null,clearTimeout(p);var a=t[i];if(delete t[i],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach((function(t){return t(s)})),e)return e(s)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=u.bind(null,o.onerror),o.onload=u.bind(null,o.onload),n&&document.head.appendChild(o)}}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){s.p="/"}(),function(){var t={143:0};s.f.j=function(e,i){var a=s.o(t,e)?t[e]:void 0;if(0!==a)if(a)i.push(a[2]);else{var r=new Promise((function(s,i){a=t[e]=[s,i]}));i.push(a[2]=r);var l=s.p+s.u(e),o=new Error,n=function(i){if(s.o(t,e)&&(a=t[e],0!==a&&(t[e]=void 0),a)){var r=i&&("load"===i.type?"missing":i.type),l=i&&i.target&&i.target.src;o.message="Loading chunk "+e+" failed.\n("+r+": "+l+")",o.name="ChunkLoadError",o.type=r,o.request=l,a[1](o)}};s.l(l,n,"chunk-"+e,e)}},s.O.j=function(e){return 0===t[e]};var e=function(e,i){var a,r,l=i[0],o=i[1],n=i[2],d=0;if(l.some((function(e){return 0!==t[e]}))){for(a in o)s.o(o,a)&&(s.m[a]=o[a]);if(n)var c=n(s)}for(e&&e(i);d<l.length;d++)r=l[d],s.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return s.O(c)},i=self["webpackChunkproduction"]=self["webpackChunkproduction"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=s.O(void 0,[998],(function(){return s(8740)}));i=s.O(i)})();
//# sourceMappingURL=app.07ff5cda.js.map